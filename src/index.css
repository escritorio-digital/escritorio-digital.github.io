@tailwind base;
@tailwind components;
@tailwind utilities;

.desktop-clock-colon {
  display: inline-block;
  margin: 0 0.08em;
  opacity: 0;
}

.desktop-clock-colon.is-on {
  opacity: 1;
}

html {
  font-size: calc(16px * var(--font-scale, 1));
}

body {
  /* Usamos las variables CSS que definimos en el ThemeContext */
  background-color: var(--color-bg);
  
  /* ¡AQUÍ ESTÁ EL CAMBIO! Cambiamos a 'Mulish' */
  font-family: 'Mulish', sans-serif;

  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

body.high-contrast {
  --color-text-dark: #000000;
  --color-text-light: #ffffff;
  --color-border: #000000;
}

.high-contrast .widget-window {
  border-color: #000000;
  box-shadow: 0 0 0 2px #000000, 0 16px 28px rgba(0, 0, 0, 0.4);
}

.high-contrast .widget-header {
  background-color: #000000;
  color: #ffffff;
}

.widget-header-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
}

.widget-header-icon img,
.widget-header-icon svg {
  width: 20px;
  height: 20px;
  object-fit: contain;
}

.widget-window.is-inactive {
  filter: none;
  backdrop-filter: none;
}

/* --- Theme color picker (clean circular swatch) --- */
.theme-color-input {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  border: none;
  padding: 0;
  width: 40px;
  height: 40px;
  cursor: pointer;
}

.theme-color-input::-webkit-color-swatch-wrapper {
  padding: 0;
}

.theme-color-input::-webkit-color-swatch {
  border: none;
  border-radius: 9999px;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.08);
}

.theme-color-input::-moz-color-swatch {
  border: none;
  border-radius: 9999px;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.08);
}

/* --- Calendar Widget (responsive) --- */
.calendar-widget {
  @apply w-full h-full flex flex-col;
  container-type: size;
  padding: clamp(12px, 3cqw, 20px);
  color: var(--calendar-text);
}

.calendar-widget--dark {
  --calendar-text: var(--color-text-light);
  --calendar-title-bg: rgba(0, 0, 0, 0.35);
  --calendar-chip-bg: rgba(0, 0, 0, 0.28);
  --calendar-chip-border: rgba(255, 255, 255, 0.2);
  --calendar-chip-hover: rgba(255, 255, 255, 0.14);
  --calendar-text-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}

.calendar-widget--light {
  --calendar-text: var(--color-text-dark);
  --calendar-title-bg: rgba(255, 255, 255, 0.85);
  --calendar-chip-bg: rgba(255, 255, 255, 0.9);
  --calendar-chip-border: rgba(0, 0, 0, 0.12);
  --calendar-chip-hover: rgba(0, 0, 0, 0.08);
  --calendar-text-shadow: none;
}

.calendar-header {
  @apply flex justify-between items-center;
  margin-bottom: clamp(8px, 2.5cqw, 16px);
}

.calendar-title {
  @apply font-bold;
  font-size: 1.1rem;
  font-size: clamp(1rem, 3cqw, 1.6rem);
  color: var(--calendar-text);
  text-shadow: var(--calendar-text-shadow);
  background: var(--calendar-title-bg);
  padding: clamp(4px, 1.2cqw, 8px) clamp(10px, 2.4cqw, 16px);
  border-radius: 999px;
}

.calendar-nav-button {
  @apply rounded-full;
  background-color: transparent;
  transition: background-color 0.2s ease;
  padding: clamp(6px, 2cqw, 12px);
}

.calendar-nav-button:hover {
  background-color: var(--calendar-chip-hover);
}

.calendar-nav-button svg {
  width: clamp(16px, 3cqw, 24px);
  height: clamp(16px, 3cqw, 24px);
}

.calendar-days {
  @apply grid grid-cols-7 text-center font-semibold;
  margin-bottom: clamp(6px, 2cqw, 12px);
  font-size: 0.85rem;
  font-size: clamp(0.75rem, 2.2cqw, 1rem);
  color: var(--calendar-text);
}

.calendar-days span {
  background: var(--calendar-chip-bg);
  padding: clamp(3px, 0.8cqw, 6px) clamp(6px, 1.6cqw, 10px);
  border-radius: 999px;
  text-shadow: var(--calendar-text-shadow);
}

.calendar-grid {
  @apply grid grid-cols-7 text-center;
  gap: clamp(4px, 1.4cqw, 8px);
  color: var(--calendar-text);
}

.calendar-cell {
  @apply flex items-center justify-center rounded-full;
  width: clamp(28px, 8cqw, 54px);
  height: clamp(28px, 8cqw, 54px);
  font-size: 0.85rem;
  font-size: clamp(0.75rem, 2.2cqw, 1.05rem);
  background: var(--calendar-chip-bg);
  border: 1px solid var(--calendar-chip-border);
  text-shadow: var(--calendar-text-shadow);
}

.calendar-cell--hover:hover {
  background: var(--calendar-chip-hover);
}

.calendar-cell--today {
  background: var(--color-accent);
  color: var(--color-text-dark);
  border: none;
  text-shadow: none;
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
}

/* --- Work List Widget (responsive) --- */
.work-list-widget {
  @apply w-full h-full flex flex-col text-text-dark;
  container-type: size;
  padding: clamp(12px, 3cqw, 20px);
}

.work-list-input {
  @apply flex-grow bg-white/85 border-2 border-accent rounded focus:border-widget-header outline-none text-text-dark;
  padding: clamp(6px, 1.8cqw, 12px);
  font-size: 0.95rem;
  font-size: clamp(0.9rem, 2.4cqw, 1.15rem);
}

.work-list-icon-button {
  @apply relative bg-accent rounded hover:bg-[#8ec9c9] transition-colors;
  padding: clamp(6px, 1.8cqw, 12px);
}

.work-list-icon-button .save-indicator-icon {
  @apply relative inline-flex;
}

.work-list-icon-button svg {
  width: clamp(16px, 3cqw, 22px);
  height: clamp(16px, 3cqw, 22px);
}

.work-list-icon-button .save-indicator-dot {
  @apply absolute -top-1 -right-1 h-2 w-2 rounded-full bg-red-500;
}

.work-list-items {
  @apply flex-grow overflow-y-auto pr-2 min-h-0 space-y-2;
}

.work-list-item {
  @apply flex items-center gap-3 rounded-md border border-black/10 bg-white/85 shadow-sm;
  padding: clamp(6px, 1.6cqw, 12px);
  font-size: 0.95rem;
  font-size: clamp(0.9rem, 2.4cqw, 1.15rem);
}

.work-list-checkbox {
  @apply rounded border-2 border-accent focus:ring-widget-header accent-accent;
  width: clamp(16px, 3cqw, 22px);
  height: clamp(16px, 3cqw, 22px);
  background-color: white;
}

.work-list-edit-input {
  @apply flex-grow bg-white border border-widget-header rounded;
  padding: clamp(4px, 1.2cqw, 8px);
  font-size: inherit;
}

.work-list-action {
  @apply text-gray-400 hover:text-blue-500;
}

.work-list-action.delete {
  @apply hover:text-red-500;
}

.work-list-hint {
  @apply text-center text-gray-500;
  font-size: clamp(0.75rem, 1.8cqw, 0.95rem);
  margin-top: clamp(6px, 1.6cqw, 12px);
}

.alarm-toast-stack {
  @apply fixed bottom-4 right-4 z-[10004] flex flex-col gap-3;
}

.alarm-toast {
  @apply flex items-center justify-between gap-3 rounded-xl border border-green-600 bg-gray-900/95 px-4 py-3 text-white shadow-lg;
  min-width: min(320px, 90vw);
}

.alarm-toast-title {
  @apply text-xs uppercase tracking-wide text-green-300 font-semibold;
}

.alarm-toast-message {
  @apply text-sm font-semibold;
}

.alarm-toast-action {
  @apply rounded-full border border-green-400 px-3 py-1 text-xs font-semibold text-green-200 hover:bg-green-500/20 transition;
}
