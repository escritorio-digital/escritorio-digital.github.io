import{u as w,a as T,r as d,j as s,T as N}from"./index-uVrkX2LA.js";import{Z as S}from"./index-uVrkX2LA.js";const f=[{cityKey:"los_angeles",timezone:"America/Los_Angeles"},{cityKey:"new_york",timezone:"America/New_York"},{cityKey:"london",timezone:"Europe/London"},{cityKey:"paris",timezone:"Europe/Paris"},{cityKey:"madrid",timezone:"Europe/Madrid"},{cityKey:"tokyo",timezone:"Asia/Tokyo"},{cityKey:"sydney",timezone:"Australia/Sydney"},{cityKey:"mexico_city",timezone:"America/Mexico_City"},{cityKey:"buenos_aires",timezone:"America/Argentina/Buenos_Aires"},{cityKey:"moscow",timezone:"Europe/Moscow"},{cityKey:"dubai",timezone:"Asia/Dubai"},{cityKey:"shanghai",timezone:"Asia/Shanghai"}],g=i=>{const t=new Date,c=new Date(t.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(t.toLocaleString("en-US",{timeZone:i})).getTime()-c.getTime())/(1e3*60*60)},v=()=>{const{t:i}=w(),[t,c]=T("global-clocks-selection",["Europe/London","Asia/Tokyo"]),[a,p]=d.useState(new Date),[l,h]=d.useState("America/New_York"),x=a.getSeconds()%2===0,y=e=>{const o=e.split(":");return o.length<2?e:o.flatMap((u,n)=>{const r=s.jsx("span",{children:u},`part-${n}`);return n===0?[r]:[s.jsx("span",{className:`time-colon${x?" is-on":""}`,children:":"},`colon-${n}`),r]})};d.useEffect(()=>{const e=setInterval(()=>p(new Date),1e3);return()=>clearInterval(e)},[]);const k=()=>{l&&!t.includes(l)&&c([...t,l])},j=e=>{c(t.filter(o=>o!==e))},m=g(Intl.DateTimeFormat().resolvedOptions().timeZone);return s.jsxs("div",{className:"global-clocks-widget",children:[s.jsxs("div",{className:"clocks-list",children:[s.jsxs("div",{className:"clock-row local",children:[s.jsxs("div",{className:"city-info",children:[s.jsx("span",{className:"city-name",children:i("widgets.global_clocks.your_local_time")}),s.jsxs("span",{className:"offset",children:["GMT",m>=0?"+":"",m]})]}),s.jsx("span",{className:"time-display",children:y(a.toLocaleTimeString())})]}),t.map(e=>{const o=f.find(r=>r.timezone===e);if(!o)return null;const n=g(e)-m;return s.jsxs("div",{className:"clock-row",children:[s.jsxs("div",{className:"city-info",children:[s.jsx("span",{className:"city-name",children:i(`widgets.global_clocks.cities.${o.cityKey}`)}),s.jsxs("span",{className:"offset",children:[n>=0?"+":"",n,"h"]})]}),s.jsx("span",{className:"time-display",children:y(a.toLocaleTimeString(void 0,{timeZone:e}))}),s.jsx("button",{onClick:()=>j(e),className:"remove-clock-btn",children:s.jsx(N,{size:16})})]},e)})]}),s.jsxs("div",{className:"clocks-footer",children:[s.jsx("select",{value:l,onChange:e=>h(e.target.value),children:f.filter(e=>!t.includes(e.timezone)).map(e=>s.jsx("option",{value:e.timezone,children:i(`widgets.global_clocks.cities.${e.cityKey}`)},e.timezone))}),s.jsx("button",{onClick:k,children:i("widgets.global_clocks.add_clock")})]})]})};export{v as GlobalClocksWidget,S as widgetConfig};
