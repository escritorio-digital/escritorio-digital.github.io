import{g as ll,c as kg,r as _,j as qe,a as Eg,e as $h,f as xc}from"./react-vendor-WCYW3yxo.js";function Og(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var ao={exports:{}},lo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vc;function Rg(){return vc||(vc=1,function(n){function e(x,w){var E=x.length;x.push(w);e:for(;0<E;){var O=E-1>>>1,F=x[O];if(0<r(F,w))x[O]=w,x[E]=F,E=O;else break e}}function t(x){return x.length===0?null:x[0]}function i(x){if(x.length===0)return null;var w=x[0],E=x.pop();if(E!==w){x[0]=E;e:for(var O=0,F=x.length,B=F>>>1;O<B;){var U=2*(O+1)-1,V=x[U],H=U+1,q=x[H];if(0>r(V,E))H<F&&0>r(q,V)?(x[O]=q,x[H]=E,O=H):(x[O]=V,x[U]=E,O=U);else if(H<F&&0>r(q,E))x[O]=q,x[H]=E,O=H;else break e}}return w}function r(x,w){var E=x.sortIndex-w.sortIndex;return E!==0?E:x.id-w.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,d=!1,p=!1,m=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function P(x){for(var w=t(c);w!==null;){if(w.callback===null)i(c);else if(w.startTime<=x)i(c),w.sortIndex=w.expirationTime,e(l,w);else break;w=t(c)}}function R(x){if(m=!1,P(x),!p)if(t(l)!==null)p=!0,D||(D=!0,M());else{var w=t(c);w!==null&&S(R,w.startTime-x)}}var D=!1,A=-1,g=5,y=-1;function T(){return b?!0:!(n.unstable_now()-y<g)}function N(){if(b=!1,D){var x=n.unstable_now();y=x;var w=!0;try{e:{p=!1,m&&(m=!1,C(A),A=-1),d=!0;var E=h;try{t:{for(P(x),f=t(l);f!==null&&!(f.expirationTime>x&&T());){var O=f.callback;if(typeof O=="function"){f.callback=null,h=f.priorityLevel;var F=O(f.expirationTime<=x);if(x=n.unstable_now(),typeof F=="function"){f.callback=F,P(x),w=!0;break t}f===t(l)&&i(l),P(x)}else i(l);f=t(l)}if(f!==null)w=!0;else{var B=t(c);B!==null&&S(R,B.startTime-x),w=!1}}break e}finally{f=null,h=E,d=!1}w=void 0}}finally{w?M():D=!1}}}var M;if(typeof k=="function")M=function(){k(N)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=N,M=function(){$.postMessage(null)}}else M=function(){v(N,0)};function S(x,w){A=v(function(){x(n.unstable_now())},w)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(x){x.callback=null},n.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<x?Math.floor(1e3/x):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_next=function(x){switch(h){case 1:case 2:case 3:var w=3;break;default:w=h}var E=h;h=w;try{return x()}finally{h=E}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(x,w){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var E=h;h=x;try{return w()}finally{h=E}},n.unstable_scheduleCallback=function(x,w,E){var O=n.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?O+E:O):E=O,x){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=E+F,x={id:u++,callback:w,priorityLevel:x,startTime:E,expirationTime:F,sortIndex:-1},E>O?(x.sortIndex=E,e(c,x),t(l)===null&&x===t(c)&&(m?(C(A),A=-1):m=!0,S(R,E-O))):(x.sortIndex=F,e(l,x),p||d||(p=!0,D||(D=!0,M()))),x},n.unstable_shouldYield=T,n.unstable_wrapCallback=function(x){var w=h;return function(){var E=h;h=w;try{return x.apply(this,arguments)}finally{h=E}}}}(lo)),lo}var Sc;function kk(){return Sc||(Sc=1,ao.exports=Rg()),ao.exports}var co,wc;function Ag(){return wc||(wc=1,co={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),co}var Pg=Ag();const Mg=ll(Pg);var Dg=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Tc(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Mg[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(Dg),s=null;(s=r.exec(n))!==null;)if(s[0].trim())if(s[1]){var o=s[1].trim(),a=[o,""];o.indexOf("=")>-1&&(a=o.split("=")),e.attrs[a[0]]=a[1],r.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var Ng=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Lg=/^\s*$/,Ig=Object.create(null);function Uh(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(Uh,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Ek={parse:function(n,e){e||(e={}),e.components||(e.components=Ig);var t,i=[],r=[],s=-1,o=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");i.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(Ng,function(l,c){if(o){if(l!=="</"+t.name+">")return;o=!1}var u,f=l.charAt(1)!=="/",h=l.startsWith("<!--"),d=c+l.length,p=n.charAt(d);if(h){var m=Tc(l);return s<0?(i.push(m),i):((u=r[s]).children.push(m),i)}if(f&&(s++,(t=Tc(l)).type==="tag"&&e.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!p||p==="<"||t.children.push({type:"text",content:n.slice(d,n.indexOf("<",d))}),s===0&&i.push(t),(u=r[s-1])&&u.children.push(t),r[s]=t),(!f||t.voidElement)&&(s>-1&&(t.voidElement||t.name===l.slice(2,-1))&&(s--,t=s===-1?i:r[s]),!o&&p!=="<"&&p)){u=s===-1?i:r[s].children;var b=n.indexOf("<",d),v=n.slice(d,b===-1?void 0:b);Lg.test(v)&&(v=" "),(b>-1&&s+u.length>=0||v!==" ")&&u.push({type:"text",content:v})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+Uh("",t)},"")}};const Vg="modulepreload",Fg=function(n){return"/"+n},Cc={},Bg=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(t.map(c=>{if(c=Fg(c),c in Cc)return;Cc[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Vg,u||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((d,p)=>{h.addEventListener("load",d),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var uo={exports:{}},fo,kc;function zg(){if(kc)return fo;kc=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return fo=n,fo}var ho,Ec;function jg(){if(Ec)return ho;Ec=1;var n=zg();function e(){}function t(){}return t.resetWarningCache=e,ho=function(){function i(o,a,l,c,u,f){if(f!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},ho}var Oc;function Ok(){return Oc||(Oc=1,uo.exports=jg()()),uo.exports}function Wh(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=Wh(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function Rc(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=Wh(n))&&(i&&(i+=" "),i+=e);return i}const _g=Object.freeze(Object.defineProperty({__proto__:null,clsx:Rc,default:Rc},Symbol.toStringTag,{value:"Module"})),Rk=kg(_g);var we=function(){return we=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},we.apply(this,arguments)},Ac={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Pc={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},vr={width:"20px",height:"20px",position:"absolute",zIndex:1},$g={top:we(we({},Ac),{top:"-5px"}),right:we(we({},Pc),{left:void 0,right:"-5px"}),bottom:we(we({},Ac),{top:void 0,bottom:"-5px"}),left:we(we({},Pc),{left:"-5px"}),topRight:we(we({},vr),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:we(we({},vr),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:we(we({},vr),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:we(we({},vr),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Ug=_.memo(function(n){var e=n.onResizeStart,t=n.direction,i=n.children,r=n.replaceStyles,s=n.className,o=_.useCallback(function(c){e(c,t)},[e,t]),a=_.useCallback(function(c){e(c,t)},[e,t]),l=_.useMemo(function(){return we(we({position:"absolute",userSelect:"none"},$g[t]),r??{})},[r,t]);return qe.jsx("div",{className:s||void 0,style:l,onMouseDown:o,onTouchStart:a,children:i})}),Wg=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xt=function(){return xt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},xt.apply(this,arguments)},Hg={width:"auto",height:"auto"},Sr=function(n,e,t){return Math.max(Math.min(n,t),e)},Mc=function(n,e,t){var i=Math.round(n/e);return i*e+t*(i-1)},Fn=function(n,e){return new RegExp(n,"i").test(e)},wr=function(n){return!!(n.touches&&n.touches.length)},Kg=function(n){return!!((n.clientX||n.clientX===0)&&(n.clientY||n.clientY===0))},Dc=function(n,e,t){t===void 0&&(t=0);var i=e.reduce(function(s,o,a){return Math.abs(o-n)<Math.abs(e[s]-n)?a:s},0),r=Math.abs(e[i]-n);return t===0||r<t?e[i]:n},po=function(n){return n=n.toString(),n==="auto"||n.endsWith("px")||n.endsWith("%")||n.endsWith("vh")||n.endsWith("vw")||n.endsWith("vmax")||n.endsWith("vmin")?n:"".concat(n,"px")},Tr=function(n,e,t,i){if(n&&typeof n=="string"){if(n.endsWith("px"))return Number(n.replace("px",""));if(n.endsWith("%")){var r=Number(n.replace("%",""))/100;return e*r}if(n.endsWith("vw")){var r=Number(n.replace("vw",""))/100;return t*r}if(n.endsWith("vh")){var r=Number(n.replace("vh",""))/100;return i*r}}return n},qg=function(n,e,t,i,r,s,o){return i=Tr(i,n.width,e,t),r=Tr(r,n.height,e,t),s=Tr(s,n.width,e,t),o=Tr(o,n.height,e,t),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof r>"u"?void 0:Number(r),minWidth:typeof s>"u"?void 0:Number(s),minHeight:typeof o>"u"?void 0:Number(o)}},Jg=function(n){return Array.isArray(n)?n:[n,n]},Gg=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Nc="__resizable_base__",Ak=function(n){Wg(e,n);function e(t){var i,r,s,o,a=n.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var l=a.parentNode;if(!l)return null;var c=a.window.document.createElement("div");return c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.transform="scale(0, 0)",c.style.left="0",c.style.flex="0 0 100%",c.classList?c.classList.add(Nc):c.className+=Nc,l.appendChild(c),c},a.removeBase=function(l){var c=a.parentNode;c&&c.removeChild(l)},a.state={isResizing:!1,width:(r=(i=a.propsSize)===null||i===void 0?void 0:i.width)!==null&&r!==void 0?r:"auto",height:(o=(s=a.propsSize)===null||s===void 0?void 0:s.height)!==null&&o!==void 0?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Hg},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,i=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,s=this.resizable.offsetHeight,o=this.resizable.style.position;o!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:r,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:s,this.resizable.style.position=o}return{width:t,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,i=this.props.size,r=function(a){var l;if(typeof t.state[a]>"u"||t.state[a]==="auto")return"auto";if(t.propsSize&&t.propsSize[a]&&(!((l=t.propsSize[a])===null||l===void 0)&&l.toString().endsWith("%"))){if(t.state[a].toString().endsWith("%"))return t.state[a].toString();var c=t.getParentSize(),u=Number(t.state[a].toString().replace("px","")),f=u/c[a]*100;return"".concat(f,"%")}return po(t.state[a])},s=i&&typeof i.width<"u"&&!this.state.isResizing?po(i.width):r("width"),o=i&&typeof i.height<"u"&&!this.state.isResizing?po(i.height):r("height");return{width:s,height:o}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var i=!1,r=this.parentNode.style.flexWrap;r!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var s={width:t.offsetWidth,height:t.offsetHeight};return i&&(this.parentNode.style.flexWrap=r),this.removeBase(t),s},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,i){var r=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===t&&(typeof r>"u"||r==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,i){var r=this.props.boundsByDirection,s=this.state.direction,o=r&&Fn("left",s),a=r&&Fn("top",s),l,c;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(l=o?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),c=a?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,c=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),c=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(t=t&&t<l?t:l),c&&Number.isFinite(c)&&(i=i&&i<c?i:c),{maxWidth:t,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(t,i){var r=this.props.scale||1,s=Jg(this.props.resizeRatio||1),o=s[0],a=s[1],l=this.state,c=l.direction,u=l.original,f=this.props,h=f.lockAspectRatio,d=f.lockAspectRatioExtraHeight,p=f.lockAspectRatioExtraWidth,m=u.width,b=u.height,v=d||0,C=p||0;return Fn("right",c)&&(m=u.width+(t-u.x)*o/r,h&&(b=(m-C)/this.ratio+v)),Fn("left",c)&&(m=u.width-(t-u.x)*o/r,h&&(b=(m-C)/this.ratio+v)),Fn("bottom",c)&&(b=u.height+(i-u.y)*a/r,h&&(m=(b-v)*this.ratio+C)),Fn("top",c)&&(b=u.height-(i-u.y)*a/r,h&&(m=(b-v)*this.ratio+C)),{newWidth:m,newHeight:b}},e.prototype.calculateNewSizeFromAspectRatio=function(t,i,r,s){var o=this.props,a=o.lockAspectRatio,l=o.lockAspectRatioExtraHeight,c=o.lockAspectRatioExtraWidth,u=typeof s.width>"u"?10:s.width,f=typeof r.width>"u"||r.width<0?t:r.width,h=typeof s.height>"u"?10:s.height,d=typeof r.height>"u"||r.height<0?i:r.height,p=l||0,m=c||0;if(a){var b=(h-p)*this.ratio+m,v=(d-p)*this.ratio+m,C=(u-m)/this.ratio+p,k=(f-m)/this.ratio+p,P=Math.max(u,b),R=Math.min(f,v),D=Math.max(h,C),A=Math.min(d,k);t=Sr(t,P,R),i=Sr(i,D,A)}else t=Sr(t,u,f),i=Sr(i,h,d);return{newWidth:t,newHeight:i}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var r=i.getBoundingClientRect();this.parentLeft=r.left*t,this.parentTop=r.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*t,this.targetTop=s.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),a=o.left,l=o.top,c=o.right,u=o.bottom;this.resizableLeft=a*t,this.resizableRight=c*t,this.resizableTop=l*t,this.resizableBottom=u*t}},e.prototype.onResizeStart=function(t,i){if(!(!this.resizable||!this.window)){var r=0,s=0;if(t.nativeEvent&&Kg(t.nativeEvent)?(r=t.nativeEvent.clientX,s=t.nativeEvent.clientY):t.nativeEvent&&wr(t.nativeEvent)&&(r=t.nativeEvent.touches[0].clientX,s=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var o=this.props.onResizeStart(t,i,this.resizable);if(o===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var c=this.parentNode;if(c){var u=this.window.getComputedStyle(c).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",a=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var f={original:{x:r,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:xt(xt({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:i,flexBasis:a};this.setState(f)}},e.prototype.onMouseMove=function(t){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&wr(t))try{t.preventDefault(),t.stopPropagation()}catch{}var r=this.props,s=r.maxWidth,o=r.maxHeight,a=r.minWidth,l=r.minHeight,c=wr(t)?t.touches[0].clientX:t.clientX,u=wr(t)?t.touches[0].clientY:t.clientY,f=this.state,h=f.direction,d=f.original,p=f.width,m=f.height,b=this.getParentSize(),v=qg(b,this.window.innerWidth,this.window.innerHeight,s,o,a,l);s=v.maxWidth,o=v.maxHeight,a=v.minWidth,l=v.minHeight;var C=this.calculateNewSizeFromDirection(c,u),k=C.newHeight,P=C.newWidth,R=this.calculateNewMaxFromBoundary(s,o);this.props.snap&&this.props.snap.x&&(P=Dc(P,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(k=Dc(k,this.props.snap.y,this.props.snapGap));var D=this.calculateNewSizeFromAspectRatio(P,k,{width:R.maxWidth,height:R.maxHeight},{width:a,height:l});if(P=D.newWidth,k=D.newHeight,this.props.grid){var A=Mc(P,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),g=Mc(k,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),y=this.props.snapGap||0,T=y===0||Math.abs(A-P)<=y?A:P,N=y===0||Math.abs(g-k)<=y?g:k;P=T,k=N}var M={width:P-d.width,height:k-d.height};if(this.delta=M,p&&typeof p=="string"){if(p.endsWith("%")){var z=P/b.width*100;P="".concat(z,"%")}else if(p.endsWith("vw")){var $=P/this.window.innerWidth*100;P="".concat($,"vw")}else if(p.endsWith("vh")){var S=P/this.window.innerHeight*100;P="".concat(S,"vh")}}if(m&&typeof m=="string"){if(m.endsWith("%")){var z=k/b.height*100;k="".concat(z,"%")}else if(m.endsWith("vw")){var $=k/this.window.innerWidth*100;k="".concat($,"vw")}else if(m.endsWith("vh")){var S=k/this.window.innerHeight*100;k="".concat(S,"vh")}}var x={width:this.createSizeForCssProperty(P,"width"),height:this.createSizeForCssProperty(k,"height")};this.flexDir==="row"?x.flexBasis=x.width:this.flexDir==="column"&&(x.flexBasis=x.height);var w=this.state.width!==x.width,E=this.state.height!==x.height,O=this.state.flexBasis!==x.flexBasis,F=w||E||O;F&&Eg.flushSync(function(){i.setState(x)}),this.props.onResize&&F&&this.props.onResize(t,h,this.resizable,M)}},e.prototype.onMouseUp=function(t){var i,r,s=this.state,o=s.isResizing,a=s.direction;s.original,!(!o||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,a,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(r=this.props.size.height)!==null&&r!==void 0?r:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:xt(xt({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var i,r;this.setState({width:(i=t.width)!==null&&i!==void 0?i:"auto",height:(r=t.height)!==null&&r!==void 0?r:"auto"})},e.prototype.renderResizer=function(){var t=this,i=this.props,r=i.enable,s=i.handleStyles,o=i.handleClasses,a=i.handleWrapperStyle,l=i.handleWrapperClass,c=i.handleComponent;if(!r)return null;var u=Object.keys(r).map(function(f){return r[f]!==!1?qe.jsx(Ug,{direction:f,onResizeStart:t.onResizeStart,replaceStyles:s&&s[f],className:o&&o[f],children:c&&c[f]?c[f]:null},f):null});return qe.jsx("div",{className:l,style:a,children:u})},e.prototype.render=function(){var t=this,i=Object.keys(this.props).reduce(function(o,a){return Gg.indexOf(a)!==-1||(o[a]=t.props[a]),o},{}),r=xt(xt(xt({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(r.flexBasis=this.state.flexBasis);var s=this.props.as||"div";return qe.jsxs(s,xt({style:r,className:this.props.className},i,{ref:function(o){o&&(t.resizable=o)},children:[this.state.isResizing&&qe.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(_.PureComponent);const cl=_.createContext({});function ul(n){const e=_.useRef(null);return e.current===null&&(e.current=n()),e.current}const fl=typeof window<"u",Hh=fl?_.useLayoutEffect:_.useEffect,Ws=_.createContext(null);function hl(n,e){n.indexOf(e)===-1&&n.push(e)}function dl(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $t=(n,e,t)=>t>e?e:t<n?n:t;let pl=()=>{};const Ut={},Kh=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function qh(n){return typeof n=="object"&&n!==null}const Jh=n=>/^0[^.\s]+$/u.test(n);function ml(n){let e;return()=>(e===void 0&&(e=n()),e)}const at=n=>n,Xg=(n,e)=>t=>e(n(t)),ur=(...n)=>n.reduce(Xg),Wi=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class gl{constructor(){this.subscriptions=[]}add(e){return hl(this.subscriptions,e),()=>dl(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Et=n=>n*1e3,Ot=n=>n/1e3;function Gh(n,e){return e?n*(1e3/e):0}const Xh=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Yg=1e-7,Qg=12;function Zg(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=Xh(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>Yg&&++a<Qg);return o}function fr(n,e,t,i){if(n===e&&t===i)return at;const r=s=>Zg(s,0,1,n,t);return s=>s===0||s===1?s:Xh(r(s),e,i)}const Yh=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Qh=n=>e=>1-n(1-e),Zh=fr(.33,1.53,.69,.99),yl=Qh(Zh),ed=Yh(yl),td=n=>(n*=2)<1?.5*yl(n):.5*(2-Math.pow(2,-10*(n-1))),bl=n=>1-Math.sin(Math.acos(n)),nd=Qh(bl),id=Yh(bl),ey=fr(.42,0,1,1),ty=fr(0,0,.58,1),rd=fr(.42,0,.58,1),ny=n=>Array.isArray(n)&&typeof n[0]!="number",sd=n=>Array.isArray(n)&&typeof n[0]=="number",iy={linear:at,easeIn:ey,easeInOut:rd,easeOut:ty,circIn:bl,circInOut:id,circOut:nd,backIn:yl,backInOut:ed,backOut:Zh,anticipate:td},ry=n=>typeof n=="string",Lc=n=>{if(sd(n)){pl(n.length===4);const[e,t,i,r]=n;return fr(e,t,i,r)}else if(ry(n))return iy[n];return n},Cr=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function sy(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),n()),u(a)}const c={schedule:(u,f=!1,h=!1)=>{const p=h&&r?t:i;return f&&o.add(u),p.has(u)||p.add(u),u},cancel:u=>{i.delete(u),o.delete(u)},process:u=>{if(a=u,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(l),t.clear(),r=!1,s&&(s=!1,c.process(u))}};return c}const oy=40;function od(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Cr.reduce((k,P)=>(k[P]=sy(s),k),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:f,preRender:h,render:d,postRender:p}=o,m=()=>{const k=Ut.useManualTiming?r.timestamp:performance.now();t=!1,Ut.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(k-r.timestamp,oy),1)),r.timestamp=k,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),f.process(r),h.process(r),d.process(r),p.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(m))},b=()=>{t=!0,i=!0,r.isProcessing||n(m)};return{schedule:Cr.reduce((k,P)=>{const R=o[P];return k[P]=(D,A=!1,g=!1)=>(t||b(),R.schedule(D,A,g)),k},{}),cancel:k=>{for(let P=0;P<Cr.length;P++)o[Cr[P]].cancel(k)},state:r,steps:o}}const{schedule:de,cancel:ln,state:Pe,steps:mo}=od(typeof requestAnimationFrame<"u"?requestAnimationFrame:at,!0);let Fr;function ay(){Fr=void 0}const Je={now:()=>(Fr===void 0&&Je.set(Pe.isProcessing||Ut.useManualTiming?Pe.timestamp:performance.now()),Fr),set:n=>{Fr=n,queueMicrotask(ay)}},ad=n=>e=>typeof e=="string"&&e.startsWith(n),xl=ad("--"),ly=ad("var(--"),vl=n=>ly(n)?cy.test(n.split("/*")[0].trim()):!1,cy=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ci={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Hi={...ci,transform:n=>$t(0,1,n)},kr={...ci,default:1},Oi=n=>Math.round(n*1e5)/1e5,Sl=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uy(n){return n==null}const fy=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wl=(n,e)=>t=>!!(typeof t=="string"&&fy.test(t)&&t.startsWith(n)||e&&!uy(t)&&Object.prototype.hasOwnProperty.call(t,e)),ld=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(Sl);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},hy=n=>$t(0,255,n),go={...ci,transform:n=>Math.round(hy(n))},bn={test:wl("rgb","red"),parse:ld("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+go.transform(n)+", "+go.transform(e)+", "+go.transform(t)+", "+Oi(Hi.transform(i))+")"};function dy(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const ua={test:wl("#"),parse:dy,transform:bn.transform},hr=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),qt=hr("deg"),Rt=hr("%"),J=hr("px"),py=hr("vh"),my=hr("vw"),Ic={...Rt,parse:n=>Rt.parse(n)/100,transform:n=>Rt.transform(n*100)},Jn={test:wl("hsl","hue"),parse:ld("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Rt.transform(Oi(e))+", "+Rt.transform(Oi(t))+", "+Oi(Hi.transform(i))+")"},Te={test:n=>bn.test(n)||ua.test(n)||Jn.test(n),parse:n=>bn.test(n)?bn.parse(n):Jn.test(n)?Jn.parse(n):ua.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?bn.transform(n):Jn.transform(n),getAnimatableNone:n=>{const e=Te.parse(n);return e.alpha=0,Te.transform(e)}},gy=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function yy(n){return isNaN(n)&&typeof n=="string"&&(n.match(Sl)?.length||0)+(n.match(gy)?.length||0)>0}const cd="number",ud="color",by="var",xy="var(",Vc="${}",vy=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ki(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(vy,l=>(Te.test(l)?(i.color.push(s),r.push(ud),t.push(Te.parse(l))):l.startsWith(xy)?(i.var.push(s),r.push(by),t.push(l)):(i.number.push(s),r.push(cd),t.push(parseFloat(l))),++s,Vc)).split(Vc);return{values:t,split:a,indexes:i,types:r}}function fd(n){return Ki(n).values}function hd(n){const{split:e,types:t}=Ki(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===cd?s+=Oi(r[o]):a===ud?s+=Te.transform(r[o]):s+=r[o]}return s}}const Sy=n=>typeof n=="number"?0:Te.test(n)?Te.getAnimatableNone(n):n;function wy(n){const e=fd(n);return hd(n)(e.map(Sy))}const cn={test:yy,parse:fd,createTransformer:hd,getAnimatableNone:wy};function yo(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Ty({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=yo(l,a,n+1/3),s=yo(l,a,n),o=yo(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function qr(n,e){return t=>t>0?e:n}const ge=(n,e,t)=>n+(e-n)*t,bo=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},Cy=[ua,bn,Jn],ky=n=>Cy.find(e=>e.test(n));function Fc(n){const e=ky(n);if(!e)return!1;let t=e.parse(n);return e===Jn&&(t=Ty(t)),t}const Bc=(n,e)=>{const t=Fc(n),i=Fc(e);if(!t||!i)return qr(n,e);const r={...t};return s=>(r.red=bo(t.red,i.red,s),r.green=bo(t.green,i.green,s),r.blue=bo(t.blue,i.blue,s),r.alpha=ge(t.alpha,i.alpha,s),bn.transform(r))},fa=new Set(["none","hidden"]);function Ey(n,e){return fa.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Oy(n,e){return t=>ge(n,e,t)}function Tl(n){return typeof n=="number"?Oy:typeof n=="string"?vl(n)?qr:Te.test(n)?Bc:Py:Array.isArray(n)?dd:typeof n=="object"?Te.test(n)?Bc:Ry:qr}function dd(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>Tl(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function Ry(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=Tl(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function Ay(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=n.indexes[s][i[s]],a=n.values[o]??0;t[r]=a,i[s]++}return t}const Py=(n,e)=>{const t=cn.createTransformer(e),i=Ki(n),r=Ki(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?fa.has(n)&&!r.values.length||fa.has(e)&&!i.values.length?Ey(n,e):ur(dd(Ay(i,r),r.values),t):qr(n,e)};function pd(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ge(n,e,t):Tl(n)(n,e)}const My=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>de.update(e,t),stop:()=>ln(e),now:()=>Pe.isProcessing?Pe.timestamp:Je.now()}},md=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Jr=2e4;function Cl(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Jr;)e+=t,i=n.next(e);return e>=Jr?1/0:e}function Dy(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(Cl(i),Jr);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:Ot(r)}}const Ny=5;function gd(n,e,t){const i=Math.max(e-Ny,0);return Gh(t-n(i),e-i)}const be={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xo=.001;function Ly({duration:n=be.duration,bounce:e=be.bounce,velocity:t=be.velocity,mass:i=be.mass}){let r,s,o=1-e;o=$t(be.minDamping,be.maxDamping,o),n=$t(be.minDuration,be.maxDuration,Ot(n)),o<1?(r=c=>{const u=c*o,f=u*n,h=u-t,d=ha(c,o),p=Math.exp(-f);return xo-h/d*p},s=c=>{const f=c*o*n,h=f*t+t,d=Math.pow(o,2)*Math.pow(c,2)*n,p=Math.exp(-f),m=ha(Math.pow(c,2),o);return(-r(c)+xo>0?-1:1)*((h-d)*p)/m}):(r=c=>{const u=Math.exp(-c*n),f=(c-t)*n+1;return-xo+u*f},s=c=>{const u=Math.exp(-c*n),f=(t-c)*(n*n);return u*f});const a=5/n,l=Vy(r,s,a);if(n=Et(n),isNaN(l))return{stiffness:be.stiffness,damping:be.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const Iy=12;function Vy(n,e,t){let i=t;for(let r=1;r<Iy;r++)i=i-n(i)/e(i);return i}function ha(n,e){return n*Math.sqrt(1-e*e)}const Fy=["duration","bounce"],By=["stiffness","damping","mass"];function zc(n,e){return e.some(t=>n[t]!==void 0)}function zy(n){let e={velocity:be.velocity,stiffness:be.stiffness,damping:be.damping,mass:be.mass,isResolvedFromDuration:!1,...n};if(!zc(n,By)&&zc(n,Fy))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*$t(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:be.mass,stiffness:r,damping:s}}else{const t=Ly(n);e={...e,...t,mass:be.mass},e.isResolvedFromDuration=!0}return e}function Gr(n=be.visualDuration,e=be.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:h,isResolvedFromDuration:d}=zy({...t,velocity:-Ot(t.velocity||0)}),p=h||0,m=c/(2*Math.sqrt(l*u)),b=o-s,v=Ot(Math.sqrt(l/u)),C=Math.abs(b)<5;i||(i=C?be.restSpeed.granular:be.restSpeed.default),r||(r=C?be.restDelta.granular:be.restDelta.default);let k;if(m<1){const R=ha(v,m);k=D=>{const A=Math.exp(-m*v*D);return o-A*((p+m*v*b)/R*Math.sin(R*D)+b*Math.cos(R*D))}}else if(m===1)k=R=>o-Math.exp(-v*R)*(b+(p+v*b)*R);else{const R=v*Math.sqrt(m*m-1);k=D=>{const A=Math.exp(-m*v*D),g=Math.min(R*D,300);return o-A*((p+m*v*b)*Math.sinh(g)+R*b*Math.cosh(g))/R}}const P={calculatedDuration:d&&f||null,next:R=>{const D=k(R);if(d)a.done=R>=f;else{let A=R===0?p:0;m<1&&(A=R===0?Et(p):gd(k,R,D));const g=Math.abs(A)<=i,y=Math.abs(o-D)<=r;a.done=g&&y}return a.value=a.done?o:D,a},toString:()=>{const R=Math.min(Cl(P),Jr),D=md(A=>P.next(R*A).value,R,30);return R+"ms "+D},toTransition:()=>{}};return P}Gr.applyToOptions=n=>{const e=Dy(n,100,Gr);return n.ease=e.ease,n.duration=Et(e.duration),n.type="keyframes",n};function da({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=n[0],h={done:!1,value:f},d=g=>a!==void 0&&g<a||l!==void 0&&g>l,p=g=>a===void 0?l:l===void 0||Math.abs(a-g)<Math.abs(l-g)?a:l;let m=t*e;const b=f+m,v=o===void 0?b:o(b);v!==b&&(m=v-f);const C=g=>-m*Math.exp(-g/i),k=g=>v+C(g),P=g=>{const y=C(g),T=k(g);h.done=Math.abs(y)<=c,h.value=h.done?v:T};let R,D;const A=g=>{d(h.value)&&(R=g,D=Gr({keyframes:[h.value,p(h.value)],velocity:gd(k,g,h.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return A(0),{calculatedDuration:null,next:g=>{let y=!1;return!D&&R===void 0&&(y=!0,P(g),A(g)),R!==void 0&&g>=R?D.next(g-R):(!y&&P(g),h)}}}function jy(n,e,t){const i=[],r=t||Ut.mix||pd,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||at:e;a=ur(l,a)}i.push(a)}return i}function _y(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(pl(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=jy(e,i,r),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(u<n[f+1]);f++);const h=Wi(n[f],n[f+1],u);return a[f](h)};return t?u=>c($t(n[0],n[s-1],u)):c}function $y(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Wi(0,e,i);n.push(ge(t,1,r))}}function Uy(n){const e=[0];return $y(e,n.length-1),e}function Wy(n,e){return n.map(t=>t*e)}function Hy(n,e){return n.map(()=>e||rd).splice(0,n.length-1)}function Ri({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=ny(i)?i.map(Lc):Lc(i),s={done:!1,value:e[0]},o=Wy(t&&t.length===e.length?t:Uy(e),n),a=_y(o,e,{ease:Array.isArray(r)?r:Hy(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const Ky=n=>n!==null;function kl(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(Ky),a=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const qy={decay:da,inertia:da,tween:Ri,keyframes:Ri,spring:Gr};function yd(n){typeof n.type=="string"&&(n.type=qy[n.type])}class El{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Jy=n=>n/100;class Ol extends El{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Je.now()&&this.tick(Je.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;yd(e);const{type:t=Ri,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=t||Ri;l!==Ri&&typeof a[0]!="number"&&(this.mixKeyframes=ur(Jy,pd(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Cl(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=c}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:u,repeat:f,repeatType:h,repeatDelay:d,type:p,onUpdate:m,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const v=this.currentTime-c*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?v<0:v>r;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let k=this.currentTime,P=i;if(f){const g=Math.min(this.currentTime,r)/a;let y=Math.floor(g),T=g%1;!T&&g>=1&&(T=1),T===1&&y--,y=Math.min(y,f+1),!!(y%2)&&(h==="reverse"?(T=1-T,d&&(T-=d/a)):h==="mirror"&&(P=o)),k=$t(0,1,T)*a}const R=C?{done:!1,value:u[0]}:P.next(k);s&&(R.value=s(R.value));let{done:D}=R;!C&&l!==null&&(D=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return A&&p!==da&&(R.value=kl(u,this.options,b,this.speed)),m&&m(R.value),A&&this.finish(),R}then(e,t){return this.finished.then(e,t)}get duration(){return Ot(this.calculatedDuration)}get time(){return Ot(this.currentTime)}set time(e){e=Et(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Je.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ot(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=My,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Je.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Gy(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const xn=n=>n*180/Math.PI,pa=n=>{const e=xn(Math.atan2(n[1],n[0]));return ma(e)},Xy={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:pa,rotateZ:pa,skewX:n=>xn(Math.atan(n[1])),skewY:n=>xn(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},ma=n=>(n=n%360,n<0&&(n+=360),n),jc=pa,_c=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),$c=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Yy={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_c,scaleY:$c,scale:n=>(_c(n)+$c(n))/2,rotateX:n=>ma(xn(Math.atan2(n[6],n[5]))),rotateY:n=>ma(xn(Math.atan2(-n[2],n[0]))),rotateZ:jc,rotate:jc,skewX:n=>xn(Math.atan(n[4])),skewY:n=>xn(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function ga(n){return n.includes("scale")?1:0}function ya(n,e){if(!n||n==="none")return ga(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=Yy,r=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Xy,r=a}if(!r)return ga(e);const s=i[e],o=r[1].split(",").map(Zy);return typeof s=="function"?s(o):o[s]}const Qy=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return ya(t,e)};function Zy(n){return parseFloat(n.trim())}const ui=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fi=new Set(ui),Uc=n=>n===ci||n===J,e0=new Set(["x","y","z"]),t0=ui.filter(n=>!e0.has(n));function n0(n){const e=[];return t0.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Tn={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>ya(e,"x"),y:(n,{transform:e})=>ya(e,"y")};Tn.translateX=Tn.x;Tn.translateY=Tn.y;const Cn=new Set;let ba=!1,xa=!1,va=!1;function bd(){if(xa){const n=Array.from(Cn).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=n0(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{i.getValue(s)?.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}xa=!1,ba=!1,Cn.forEach(n=>n.complete(va)),Cn.clear()}function xd(){Cn.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(xa=!0)})}function i0(){va=!0,xd(),bd(),va=!1}class Rl{constructor(e,t,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Cn.add(this),ba||(ba=!0,de.read(xd),de.resolveKeyframes(bd))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const a=i.readValue(t,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}Gy(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Cn.delete(this)}cancel(){this.state==="scheduled"&&(Cn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const r0=n=>n.startsWith("--");function s0(n,e,t){r0(e)?n.style.setProperty(e,t):n.style[e]=t}const o0=ml(()=>window.ScrollTimeline!==void 0),a0={};function l0(n,e){const t=ml(n);return()=>a0[e]??t()}const vd=l0(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Si=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Wc={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Si([0,.65,.55,1]),circOut:Si([.55,0,1,.45]),backIn:Si([.31,.01,.66,-.59]),backOut:Si([.33,1.53,.69,.99])};function Sd(n,e){if(n)return typeof n=="function"?vd()?md(n,e):"ease-out":sd(n)?Si(n):Array.isArray(n)?n.map(t=>Sd(t,e)||Wc.easeOut):Wc[n]}function c0(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:t};l&&(u.offset=l);const f=Sd(a,r);Array.isArray(f)&&(u.easing=f);const h={delay:i,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),n.animate(u,h)}function wd(n){return typeof n=="function"&&"applyToOptions"in n}function u0({type:n,...e}){return wd(n)&&vd()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class f0 extends El{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,pl(typeof e.type!="string");const c=u0(e);this.animation=c0(t,i,r,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=kl(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):s0(t,i,u),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ot(Number(e))}get time(){return Ot(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Et(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&o0()?(this.animation.timeline=e,at):t(this)}}const Td={anticipate:td,backInOut:ed,circInOut:id};function h0(n){return n in Td}function d0(n){typeof n.ease=="string"&&h0(n.ease)&&(n.ease=Td[n.ease])}const Hc=10;class p0 extends f0{constructor(e){d0(e),yd(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new Ol({...o,autoplay:!1}),l=Et(this.finishedTime??this.time);t.setWithVelocity(a.sample(l-Hc).value,a.sample(l).value,Hc),a.stop()}}const Kc=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(cn.test(n)||n==="0")&&!n.startsWith("url("));function m0(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function g0(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=Kc(r,e),a=Kc(s,e);return!o||!a?!1:m0(n)||(t==="spring"||wd(t))&&i}function Sa(n){n.duration=0,n.type}const y0=new Set(["opacity","clipPath","filter","transform"]),b0=ml(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function x0(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return b0()&&t&&y0.has(t)&&(t!=="transform"||!c)&&!l&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const v0=40;class S0 extends El{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Je.now();const h={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...f},d=u?.KeyframeResolver||Rl;this.keyframeResolver=new d(a,(p,m,b)=>this.onKeyframesResolved(p,m,h,!b),l,c,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=i;this.resolvedAt=Je.now(),g0(e,s,o,a)||((Ut.instantAnimations||!l)&&u?.(kl(e,i,t)),e[0]=e[e.length-1],Sa(i),i.repeat=0);const h={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>v0?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},d=!c&&x0(h)?new p0({...h,element:h.motionValue.owner.current}):new Ol(h);d.finished.then(()=>this.notifyFinished()).catch(at),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),i0()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const w0=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function T0(n){const e=w0.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function Cd(n,e,t=1){const[i,r]=T0(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return Kh(o)?parseFloat(o):o}return vl(r)?Cd(r,e,t+1):r}function Al(n,e){return n?.[e]??n?.default??n}const kd=new Set(["width","height","top","left","right","bottom",...ui]),C0={test:n=>n==="auto",parse:n=>n},Ed=n=>e=>e.test(n),Od=[ci,J,Rt,qt,my,py,C0],qc=n=>Od.find(Ed(n));function k0(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Jh(n):!0}const E0=new Set(["brightness","contrast","saturate","opacity"]);function O0(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Sl)||[];if(!i)return n;const r=t.replace(i,"");let s=E0.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const R0=/\b([a-z-]*)\(.*?\)/gu,wa={...cn,getAnimatableNone:n=>{const e=n.match(R0);return e?e.map(O0).join(" "):n}},Jc={...ci,transform:Math.round},A0={rotate:qt,rotateX:qt,rotateY:qt,rotateZ:qt,scale:kr,scaleX:kr,scaleY:kr,scaleZ:kr,skew:qt,skewX:qt,skewY:qt,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,transformPerspective:J,opacity:Hi,originX:Ic,originY:Ic,originZ:J},Pl={borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,backgroundPositionX:J,backgroundPositionY:J,...A0,zIndex:Jc,fillOpacity:Hi,strokeOpacity:Hi,numOctaves:Jc},P0={...Pl,color:Te,backgroundColor:Te,outlineColor:Te,fill:Te,stroke:Te,borderColor:Te,borderTopColor:Te,borderRightColor:Te,borderBottomColor:Te,borderLeftColor:Te,filter:wa,WebkitFilter:wa},Rd=n=>P0[n];function Ad(n,e){let t=Rd(n);return t!==wa&&(t=cn),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const M0=new Set(["auto","none","0"]);function D0(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!M0.has(s)&&Ki(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=Ad(t,r)}class N0 extends Rl{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),vl(c))){const u=Cd(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!kd.has(i)||e.length!==2)return;const[r,s]=e,o=qc(r),a=qc(s);if(o!==a)if(Uc(o)&&Uc(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Tn[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||k0(e[r]))&&i.push(r);i.length&&D0(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tn[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Tn[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,l])=>{e.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function L0(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=t?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const Pd=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function Md(n){return qh(n)&&"offsetHeight"in n}const Gc=30,I0=n=>!isNaN(parseFloat(n));class V0{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Je.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Je.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=I0(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new gl);const i=this.events[e].add(t);return e==="change"?()=>{i(),de.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Je.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Gc)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Gc);return Gh(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ni(n,e){return new V0(n,e)}const{schedule:Ml}=od(queueMicrotask,!1),ht={x:!1,y:!1};function Dd(){return ht.x||ht.y}function F0(n){return n==="x"||n==="y"?ht[n]?null:(ht[n]=!0,()=>{ht[n]=!1}):ht.x||ht.y?null:(ht.x=ht.y=!0,()=>{ht.x=ht.y=!1})}function Nd(n,e){const t=L0(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function Xc(n){return!(n.pointerType==="touch"||Dd())}function B0(n,e,t={}){const[i,r,s]=Nd(n,t),o=a=>{if(!Xc(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=f=>{Xc(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const Ld=(n,e)=>e?n===e?!0:Ld(n,e.parentElement):!1,Dl=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,z0=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function j0(n){return z0.has(n.tagName)||n.tabIndex!==-1}const Br=new WeakSet;function Yc(n){return e=>{e.key==="Enter"&&n(e)}}function vo(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _0=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=Yc(()=>{if(Br.has(t))return;vo(t,"down");const r=Yc(()=>{vo(t,"up")}),s=()=>vo(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function Qc(n){return Dl(n)&&!Dd()}function $0(n,e,t={}){const[i,r,s]=Nd(n,t),o=a=>{const l=a.currentTarget;if(!Qc(a))return;Br.add(l);const c=e(l,a),u=(d,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),Br.has(l)&&Br.delete(l),Qc(d)&&typeof c=="function"&&c(d,{success:p})},f=d=>{u(d,l===window||l===document||t.useGlobalTarget||Ld(l,d.target))},h=d=>{u(d,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",h,r)};return i.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),Md(a)&&(a.addEventListener("focus",c=>_0(c,r)),!j0(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function Id(n){return qh(n)&&"ownerSVGElement"in n}function U0(n){return Id(n)&&n.tagName==="svg"}const Fe=n=>!!(n&&n.getVelocity),W0=[...Od,Te,cn],H0=n=>W0.find(Ed(n)),Nl=_.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class K0 extends _.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=Md(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function q0({children:n,isPresent:e,anchorX:t,root:i}){const r=_.useId(),s=_.useRef(null),o=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=_.useContext(Nl);return _.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:f,right:h}=o.current;if(e||!s.current||!l||!c)return;const d=t==="left"?`left: ${f}`:`right: ${h}`;s.current.dataset.motionPopId=r;const p=document.createElement("style");a&&(p.nonce=a);const m=i??document.head;return m.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${d}px !important;
            top: ${u}px !important;
          }
        `),()=>{m.contains(p)&&m.removeChild(p)}},[e]),qe.jsx(K0,{isPresent:e,childRef:s,sizeRef:o,children:_.cloneElement(n,{ref:s})})}const J0=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=ul(G0),u=_.useId();let f=!0,h=_.useMemo(()=>(f=!1,{id:u,initial:e,isPresent:t,custom:r,onExitComplete:d=>{c.set(d,!0);for(const p of c.values())if(!p)return;i&&i()},register:d=>(c.set(d,!1),()=>c.delete(d))}),[t,c,i]);return s&&f&&(h={...h}),_.useMemo(()=>{c.forEach((d,p)=>c.set(p,!1))},[t]),_.useEffect(()=>{!t&&!c.size&&i&&i()},[t]),o==="popLayout"&&(n=qe.jsx(q0,{isPresent:t,anchorX:a,root:l,children:n})),qe.jsx(Ws.Provider,{value:h,children:n})};function G0(){return new Map}function Vd(n=!0){const e=_.useContext(Ws);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=_.useId();_.useEffect(()=>{if(n)return r(s)},[n]);const o=_.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const Er=n=>n.key||"";function Zc(n){const e=[];return _.Children.forEach(n,t=>{_.isValidElement(t)&&e.push(t)}),e}const Pk=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=Vd(o),f=_.useMemo(()=>Zc(n),[n]),h=o&&!c?[]:f.map(Er),d=_.useRef(!0),p=_.useRef(f),m=ul(()=>new Map),[b,v]=_.useState(f),[C,k]=_.useState(f);Hh(()=>{d.current=!1,p.current=f;for(let D=0;D<C.length;D++){const A=Er(C[D]);h.includes(A)?m.delete(A):m.get(A)!==!0&&m.set(A,!1)}},[C,h.length,h.join("-")]);const P=[];if(f!==b){let D=[...f];for(let A=0;A<C.length;A++){const g=C[A],y=Er(g);h.includes(y)||(D.splice(A,0,g),P.push(g))}return s==="wait"&&P.length&&(D=P),k(Zc(D)),v(f),null}const{forceRender:R}=_.useContext(cl);return qe.jsx(qe.Fragment,{children:C.map(D=>{const A=Er(D),g=o&&!c?!1:f===C||h.includes(A),y=()=>{if(m.has(A))m.set(A,!0);else return;let T=!0;m.forEach(N=>{N||(T=!1)}),T&&(R?.(),k(p.current),o&&u?.(),i&&i())};return qe.jsx(J0,{isPresent:g,initial:!d.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:s,root:l,onExitComplete:g?void 0:y,anchorX:a,children:D},A)})})},Fd=_.createContext({strict:!1}),eu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ii={};for(const n in eu)ii[n]={isEnabled:e=>eu[n].some(t=>!!e[t])};function X0(n){for(const e in n)ii[e]={...ii[e],...n[e]}}const Y0=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xr(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Y0.has(n)}let Bd=n=>!Xr(n);function Q0(n){typeof n=="function"&&(Bd=e=>e.startsWith("on")?!Xr(e):n(e))}try{Q0(require("@emotion/is-prop-valid").default)}catch{}function Z0(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(Bd(r)||t===!0&&Xr(r)||!e&&!Xr(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const Hs=_.createContext({});function Ks(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function qi(n){return typeof n=="string"||Array.isArray(n)}const Ll=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Il=["initial",...Ll];function qs(n){return Ks(n.animate)||Il.some(e=>qi(n[e]))}function zd(n){return!!(qs(n)||n.variants)}function e1(n,e){if(qs(n)){const{initial:t,animate:i}=n;return{initial:t===!1||qi(t)?t:void 0,animate:qi(i)?i:void 0}}return n.inherit!==!1?e:{}}function t1(n){const{initial:e,animate:t}=e1(n,_.useContext(Hs));return _.useMemo(()=>({initial:e,animate:t}),[tu(e),tu(t)])}function tu(n){return Array.isArray(n)?n.join(" "):n}const Ji={};function n1(n){for(const e in n)Ji[e]=n[e],xl(e)&&(Ji[e].isCSSVariable=!0)}function jd(n,{layout:e,layoutId:t}){return fi.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Ji[n]||n==="opacity")}const i1={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r1=ui.length;function s1(n,e,t){let i="",r=!0;for(let s=0;s<r1;s++){const o=ui[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=Pd(a,Pl[o]);if(!l){r=!1;const u=i1[o]||o;i+=`${u}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function Vl(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(fi.has(l)){o=!0;continue}else if(xl(l)){r[l]=c;continue}else{const u=Pd(c,Pl[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||t?i.transform=s1(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const Fl=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _d(n,e,t){for(const i in e)!Fe(e[i])&&!jd(i,t)&&(n[i]=e[i])}function o1({transformTemplate:n},e){return _.useMemo(()=>{const t=Fl();return Vl(t,e,n),Object.assign({},t.vars,t.style)},[e])}function a1(n,e){const t=n.style||{},i={};return _d(i,t,n),Object.assign(i,o1(n,e)),i}function l1(n,e){const t={},i=a1(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const c1={offset:"stroke-dashoffset",array:"stroke-dasharray"},u1={offset:"strokeDashoffset",array:"strokeDasharray"};function f1(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?c1:u1;n[s.offset]=J.transform(-i);const o=J.transform(e),a=J.transform(t);n[s.array]=`${o} ${a}`}function $d(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(Vl(n,a,c),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:f,style:h}=n;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=u?.transformBox??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),i!==void 0&&(f.scale=i),r!==void 0&&f1(f,r,s,o,!1)}const Ud=()=>({...Fl(),attrs:{}}),Wd=n=>typeof n=="string"&&n.toLowerCase()==="svg";function h1(n,e,t,i){const r=_.useMemo(()=>{const s=Ud();return $d(s,e,Wd(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};_d(s,n.style,n),r.style={...s,...r.style}}return r}const d1=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bl(n){return typeof n!="string"||n.includes("-")?!1:!!(d1.indexOf(n)>-1||/[A-Z]/u.test(n))}function p1(n,e,t,{latestValues:i},r,s=!1){const a=(Bl(n)?h1:l1)(e,i,r,n),l=Z0(e,typeof n=="string",s),c=n!==_.Fragment?{...l,...a,ref:t}:{},{children:u}=e,f=_.useMemo(()=>Fe(u)?u.get():u,[u]);return _.createElement(n,{...c,children:f})}function nu(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function zl(n,e,t,i){if(typeof e=="function"){const[r,s]=nu(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=nu(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function zr(n){return Fe(n)?n.get():n}function m1({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:g1(t,i,r,n),renderState:e()}}function g1(n,e,t,i){const r={},s=i(n,{});for(const h in s)r[h]=zr(s[h]);let{initial:o,animate:a}=n;const l=qs(n),c=zd(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!Ks(f)){const h=Array.isArray(f)?f:[f];for(let d=0;d<h.length;d++){const p=zl(n,h[d]);if(p){const{transitionEnd:m,transition:b,...v}=p;for(const C in v){let k=v[C];if(Array.isArray(k)){const P=u?k.length-1:0;k=k[P]}k!==null&&(r[C]=k)}for(const C in m)r[C]=m[C]}}}return r}const Hd=n=>(e,t)=>{const i=_.useContext(Hs),r=_.useContext(Ws),s=()=>m1(n,e,i,r);return t?s():ul(s)};function jl(n,e,t){const{style:i}=n,r={};for(const s in i)(Fe(i[s])||e.style&&Fe(e.style[s])||jd(s,n)||t?.getValue(s)?.liveStyle!==void 0)&&(r[s]=i[s]);return r}const y1=Hd({scrapeMotionValuesFromProps:jl,createRenderState:Fl});function Kd(n,e,t){const i=jl(n,e,t);for(const r in n)if(Fe(n[r])||Fe(e[r])){const s=ui.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const b1=Hd({scrapeMotionValuesFromProps:Kd,createRenderState:Ud}),x1=Symbol.for("motionComponentSymbol");function Gn(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function v1(n,e,t){return _.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Gn(t)&&(t.current=i))},[e])}const _l=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),S1="framerAppearId",qd="data-"+_l(S1),Jd=_.createContext({});function w1(n,e,t,i,r){const{visualElement:s}=_.useContext(Hs),o=_.useContext(Fd),a=_.useContext(Ws),l=_.useContext(Nl).reducedMotion,c=_.useRef(null);i=i||o.renderer,!c.current&&i&&(c.current=i(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,f=_.useContext(Jd);u&&!u.projection&&r&&(u.type==="html"||u.type==="svg")&&T1(c.current,t,r,f);const h=_.useRef(!1);_.useInsertionEffect(()=>{u&&h.current&&u.update(t,a)});const d=t[qd],p=_.useRef(!!d&&!window.MotionHandoffIsComplete?.(d)&&window.MotionHasOptimisedAnimation?.(d));return Hh(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),p.current&&u.animationState&&u.animationState.animateChanges())}),_.useEffect(()=>{u&&(!p.current&&u.animationState&&u.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(d)}),p.current=!1),u.enteringChildren=void 0)}),u}function T1(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Gd(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Gn(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:u,layoutScroll:l,layoutRoot:c})}function Gd(n){if(n)return n.options.allowProjection!==!1?n.projection:Gd(n.parent)}function So(n,{forwardMotionProps:e=!1}={},t,i){t&&X0(t);const r=Bl(n)?b1:y1;function s(a,l){let c;const u={..._.useContext(Nl),...a,layoutId:C1(a)},{isStatic:f}=u,h=t1(a),d=r(a,f);if(!f&&fl){k1();const p=E1(u);c=p.MeasureLayout,h.visualElement=w1(n,d,u,i,p.ProjectionNode)}return qe.jsxs(Hs.Provider,{value:h,children:[c&&h.visualElement?qe.jsx(c,{visualElement:h.visualElement,...u}):null,p1(n,a,v1(d,h.visualElement,l),d,f,e)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=_.forwardRef(s);return o[x1]=n,o}function C1({layoutId:n}){const e=_.useContext(cl).id;return e&&n!==void 0?e+"-"+n:n}function k1(n,e){_.useContext(Fd).strict}function E1(n){const{drag:e,layout:t}=ii;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function O1(n,e){if(typeof Proxy>"u")return So;const t=new Map,i=(s,o)=>So(s,o,n,e),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(t.has(o)||t.set(o,So(o,void 0,n,e)),t.get(o))})}function Xd({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function R1({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function A1(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function wo(n){return n===void 0||n===1}function Ta({scale:n,scaleX:e,scaleY:t}){return!wo(n)||!wo(e)||!wo(t)}function gn(n){return Ta(n)||Yd(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Yd(n){return iu(n.x)||iu(n.y)}function iu(n){return n&&n!=="0%"}function Yr(n,e,t){const i=n-t,r=e*i;return t+r}function ru(n,e,t,i,r){return r!==void 0&&(n=Yr(n,r,i)),Yr(n,t,i)+e}function Ca(n,e=0,t=1,i,r){n.min=ru(n.min,e,t,i,r),n.max=ru(n.max,e,t,i,r)}function Qd(n,{x:e,y:t}){Ca(n.x,e.translate,e.scale,e.originPoint),Ca(n.y,t.translate,t.scale,t.originPoint)}const su=.999999999999,ou=1.0000000000001;function P1(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Yn(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Qd(n,o)),i&&gn(s.latestValues)&&Yn(n,s.latestValues))}e.x<ou&&e.x>su&&(e.x=1),e.y<ou&&e.y>su&&(e.y=1)}function Xn(n,e){n.min=n.min+e,n.max=n.max+e}function au(n,e,t,i,r=.5){const s=ge(n.min,n.max,r);Ca(n,e,t,s,i)}function Yn(n,e){au(n.x,e.x,e.scaleX,e.scale,e.originX),au(n.y,e.y,e.scaleY,e.scale,e.originY)}function Zd(n,e){return Xd(A1(n.getBoundingClientRect(),e))}function M1(n,e,t){const i=Zd(n,t),{scroll:r}=e;return r&&(Xn(i.x,r.offset.x),Xn(i.y,r.offset.y)),i}const lu=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qn=()=>({x:lu(),y:lu()}),cu=()=>({min:0,max:0}),ve=()=>({x:cu(),y:cu()}),ka={current:null},ep={current:!1};function D1(){if(ep.current=!0,!!fl)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>ka.current=n.matches;n.addEventListener("change",e),e()}else ka.current=!1}const N1=new WeakMap;function L1(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Fe(r))n.addValue(i,r);else if(Fe(s))n.addValue(i,ni(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,ni(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const uu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class I1{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Rl,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Je.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,de.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=qs(t),this.isVariantNode=zd(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const h in f){const d=f[h];l[h]!==void 0&&Fe(d)&&d.set(l[h])}}mount(e){this.current=e,N1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),ep.current||D1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ka.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ln(this.notifyUpdate),ln(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=fi.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&de.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ii){const t=ii[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ve()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<uu.length;i++){const r=uu[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=L1(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=ni(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Kh(i)||Jh(i))?i=parseFloat(i):!H0(i)&&cn.test(t)&&(i=Ad(e,t)),this.setBaseTarget(e,Fe(i)?i.get():i)),Fe(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const s=zl(this.props,t,this.presenceContext?.custom);s&&(i=s[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Fe(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new gl),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Ml.render(this.render)}}class tp extends I1{constructor(){super(...arguments),this.KeyframeResolver=N0}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fe(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function np(n,{style:e,vars:t},i,r){const s=n.style;let o;for(o in e)s[o]=e[o];r?.applyProjectionStyles(s,i);for(o in t)s.setProperty(o,t[o])}function V1(n){return window.getComputedStyle(n)}class F1 extends tp{constructor(){super(...arguments),this.type="html",this.renderInstance=np}readValueFromInstance(e,t){if(fi.has(t))return this.projection?.isProjecting?ga(t):Qy(e,t);{const i=V1(e),r=(xl(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Zd(e,t)}build(e,t,i){Vl(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return jl(e,t,i)}}const ip=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function B1(n,e,t,i){np(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(ip.has(r)?r:_l(r),e.attrs[r])}class z1 extends tp{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ve}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fi.has(t)){const i=Rd(t);return i&&i.default||0}return t=ip.has(t)?t:_l(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return Kd(e,t,i)}build(e,t,i){$d(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){B1(e,t,i,r)}mount(e){this.isSVGTag=Wd(e.tagName),super.mount(e)}}const j1=(n,e)=>Bl(n)?new z1(e):new F1(e,{allowProjection:n!==_.Fragment});function Zn(n,e,t){const i=n.getProps();return zl(i,e,t!==void 0?t:i.custom,n)}const Ea=n=>Array.isArray(n);function _1(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ni(t))}function $1(n){return Ea(n)?n[n.length-1]||0:n}function U1(n,e){const t=Zn(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=$1(s[o]);_1(n,o,a)}}function W1(n){return!!(Fe(n)&&n.add)}function Oa(n,e){const t=n.getValue("willChange");if(W1(t))return t.add(e);if(!t&&Ut.WillChange){const i=new Ut.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function rp(n){return n.props[qd]}const H1=n=>n!==null;function K1(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(H1),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[s]}const q1={type:"spring",stiffness:500,damping:25,restSpeed:10},J1=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),G1={type:"keyframes",duration:.8},X1={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Y1=(n,{keyframes:e})=>e.length>2?G1:fi.has(n)?n.startsWith("scale")?J1(e[1]):q1:X1;function Q1({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const $l=(n,e,t,i={},r,s)=>o=>{const a=Al(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Et(l);const u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};Q1(a)||Object.assign(u,Y1(n,u)),u.duration&&(u.duration=Et(u.duration)),u.repeatDelay&&(u.repeatDelay=Et(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Sa(u),u.delay===0&&(f=!0)),(Ut.instantAnimations||Ut.skipAnimations)&&(f=!0,Sa(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const h=K1(u.keyframes,a);if(h!==void 0){de.update(()=>{u.onUpdate(h),u.onComplete()});return}}return a.isSync?new Ol(u):new S0(u)};function Z1({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function sp(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=e;i&&(s=i);const l=[],c=r&&n.animationState&&n.animationState.getState()[r];for(const u in a){const f=n.getValue(u,n.latestValues[u]??null),h=a[u];if(h===void 0||c&&Z1(c,u))continue;const d={delay:t,...Al(s||{},u)},p=f.get();if(p!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===p&&!d.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const v=rp(n);if(v){const C=window.MotionHandoffAnimation(v,u,de);C!==null&&(d.startTime=C,m=!0)}}Oa(n,u),f.start($l(u,f,h,n.shouldReduceMotion&&kd.has(u)?{type:!1}:d,n,m));const b=f.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{de.update(()=>{o&&U1(n,o)})}),l}function op(n,e,t,i=0,r=1){const s=Array.from(n).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=n.size,a=(o-1)*i;return typeof t=="function"?t(s,o):r===1?s*i:a-s*i}function Ra(n,e,t={}){const i=Zn(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(sp(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:f}=r;return eb(n,e,l,c,u,f,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(t.delay)])}function eb(n,e,t=0,i=0,r=0,s=1,o){const a=[];for(const l of n.variantChildren)l.notify("AnimationStart",e),a.push(Ra(l,e,{...o,delay:t+(typeof i=="function"?0:i)+op(n.variantChildren,l,i,r,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function tb(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Ra(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=Ra(n,e,t);else{const r=typeof e=="function"?Zn(n,e,t.custom):e;i=Promise.all(sp(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function ap(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const nb=Il.length;function lp(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?lp(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<nb;t++){const i=Il[t],r=n.props[i];(qi(r)||r===!1)&&(e[i]=r)}return e}const ib=[...Ll].reverse(),rb=Ll.length;function sb(n){return e=>Promise.all(e.map(({animation:t,options:i})=>tb(n,t,i)))}function ob(n){let e=sb(n),t=fu(),i=!0;const r=l=>(c,u)=>{const f=Zn(n,u,l==="exit"?n.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:d,...p}=f;c={...c,...p,...d}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,u=lp(n.parent)||{},f=[],h=new Set;let d={},p=1/0;for(let b=0;b<rb;b++){const v=ib[b],C=t[v],k=c[v]!==void 0?c[v]:u[v],P=qi(k),R=v===l?C.isActive:null;R===!1&&(p=b);let D=k===u[v]&&k!==c[v]&&P;if(D&&i&&n.manuallyAnimateOnMount&&(D=!1),C.protectedKeys={...d},!C.isActive&&R===null||!k&&!C.prevProp||Ks(k)||typeof k=="boolean")continue;const A=ab(C.prevProp,k);let g=A||v===l&&C.isActive&&!D&&P||b>p&&P,y=!1;const T=Array.isArray(k)?k:[k];let N=T.reduce(r(v),{});R===!1&&(N={});const{prevResolvedValues:M={}}=C,z={...M,...N},$=w=>{g=!0,h.has(w)&&(y=!0,h.delete(w)),C.needsAnimating[w]=!0;const E=n.getValue(w);E&&(E.liveStyle=!1)};for(const w in z){const E=N[w],O=M[w];if(d.hasOwnProperty(w))continue;let F=!1;Ea(E)&&Ea(O)?F=!ap(E,O):F=E!==O,F?E!=null?$(w):h.add(w):E!==void 0&&h.has(w)?$(w):C.protectedKeys[w]=!0}C.prevProp=k,C.prevResolvedValues=N,C.isActive&&(d={...d,...N}),i&&n.blockInitialAnimation&&(g=!1);const S=D&&A;g&&(!S||y)&&f.push(...T.map(w=>{const E={type:v};if(typeof w=="string"&&i&&!S&&n.manuallyAnimateOnMount&&n.parent){const{parent:O}=n,F=Zn(O,w);if(O.enteringChildren&&F){const{delayChildren:B}=F.transition||{};E.delay=op(O.enteringChildren,n,B)}}return{animation:w,options:E}}))}if(h.size){const b={};if(typeof c.initial!="boolean"){const v=Zn(n,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(b.transition=v.transition)}h.forEach(v=>{const C=n.getBaseTarget(v),k=n.getValue(v);k&&(k.liveStyle=!0),b[v]=C??null}),f.push({animation:b})}let m=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(m=!1),i=!1,m?e(f):Promise.resolve()}function a(l,c){if(t[l].isActive===c)return Promise.resolve();n.variantChildren?.forEach(f=>f.animationState?.setActive(l,c)),t[l].isActive=c;const u=o(l);for(const f in t)t[f].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=fu(),i=!0}}}function ab(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!ap(e,n):!1}function mn(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fu(){return{animate:mn(!0),whileInView:mn(),whileHover:mn(),whileTap:mn(),whileDrag:mn(),whileFocus:mn(),exit:mn()}}class dn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class lb extends dn{constructor(e){super(e),e.animationState||(e.animationState=ob(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ks(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let cb=0;class ub extends dn{constructor(){super(...arguments),this.id=cb++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const fb={animation:{Feature:lb},exit:{Feature:ub}};function Gi(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function dr(n){return{point:{x:n.pageX,y:n.pageY}}}const hb=n=>e=>Dl(e)&&n(e,dr(e));function Ai(n,e,t,i){return Gi(n,e,hb(t),i)}const cp=1e-4,db=1-cp,pb=1+cp,up=.01,mb=0-up,gb=0+up;function je(n){return n.max-n.min}function yb(n,e,t){return Math.abs(n-e)<=t}function hu(n,e,t,i=.5){n.origin=i,n.originPoint=ge(e.min,e.max,n.origin),n.scale=je(t)/je(e),n.translate=ge(t.min,t.max,n.origin)-n.originPoint,(n.scale>=db&&n.scale<=pb||isNaN(n.scale))&&(n.scale=1),(n.translate>=mb&&n.translate<=gb||isNaN(n.translate))&&(n.translate=0)}function Pi(n,e,t,i){hu(n.x,e.x,t.x,i?i.originX:void 0),hu(n.y,e.y,t.y,i?i.originY:void 0)}function du(n,e,t){n.min=t.min+e.min,n.max=n.min+je(e)}function bb(n,e,t){du(n.x,e.x,t.x),du(n.y,e.y,t.y)}function pu(n,e,t){n.min=e.min-t.min,n.max=n.min+je(e)}function Mi(n,e,t){pu(n.x,e.x,t.x),pu(n.y,e.y,t.y)}function nt(n){return[n("x"),n("y")]}const fp=({current:n})=>n?n.ownerDocument.defaultView:null,mu=(n,e)=>Math.abs(n-e);function xb(n,e){const t=mu(n.x,e.x),i=mu(n.y,e.y);return Math.sqrt(t**2+i**2)}class hp{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Co(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,p=xb(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!d&&!p)return;const{point:m}=h,{timestamp:b}=Pe;this.history.push({...m,timestamp:b});const{onStart:v,onMove:C}=this.handlers;d||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=To(d,this.transformPagePoint),de.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Co(h.type==="pointercancel"?this.lastMoveEventInfo:To(d,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,v),m&&m(h,v)},!Dl(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const a=dr(e),l=To(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Pe;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=t;f&&f(e,Co(l,this.history)),this.removeListeners=ur(Ai(this.contextWindow,"pointermove",this.handlePointerMove),Ai(this.contextWindow,"pointerup",this.handlePointerUp),Ai(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ln(this.updatePoint)}}function To(n,e){return e?{point:e(n.point)}:n}function gu(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Co({point:n},e){return{point:n,delta:gu(n,dp(e)),offset:gu(n,vb(e)),velocity:Sb(e,.1)}}function vb(n){return n[0]}function dp(n){return n[n.length-1]}function Sb(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=dp(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Et(e)));)t--;if(!i)return{x:0,y:0};const s=Ot(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wb(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?ge(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?ge(t,n,i.max):Math.min(n,t)),n}function yu(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Tb(n,{top:e,left:t,bottom:i,right:r}){return{x:yu(n.x,t,r),y:yu(n.y,e,i)}}function bu(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function Cb(n,e){return{x:bu(n.x,e.x),y:bu(n.y,e.y)}}function kb(n,e){let t=.5;const i=je(n),r=je(e);return r>i?t=Wi(e.min,e.max-i,n.min):i>r&&(t=Wi(n.min,n.max-r,e.min)),$t(0,1,t)}function Eb(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Aa=.35;function Ob(n=Aa){return n===!1?n=0:n===!0&&(n=Aa),{x:xu(n,"left","right"),y:xu(n,"top","bottom")}}function xu(n,e,t){return{min:vu(n,e),max:vu(n,t)}}function vu(n,e){return typeof n=="number"?n:n[e]||0}const Rb=new WeakMap;class Ab{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ve(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(dr(f).point)},o=(f,h)=>{const{drag:d,dragPropagation:p,onDragStart:m}=this.getProps();if(d&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=F0(d),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nt(v=>{let C=this.getAxisMotionValue(v).get()||0;if(Rt.test(C)){const{projection:k}=this.visualElement;if(k&&k.layout){const P=k.layout.layoutBox[v];P&&(C=je(P)*(parseFloat(C)/100))}}this.originPoint[v]=C}),m&&de.postRender(()=>m(f,h)),Oa(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:d,dragDirectionLock:p,onDirectionLock:m,onDrag:b}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:v}=h;if(p&&this.currentDirection===null){this.currentDirection=Pb(v),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),b&&b(f,h)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>nt(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new hp(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:i,contextWindow:fp(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&de.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Or(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=wb(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Gn(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=Tb(i.layoutBox,e):this.constraints=!1,this.elastic=Ob(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&nt(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Eb(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gn(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=M1(i,r.root,this.visualElement.getTransformPagePoint());let o=Cb(r.layout.layoutBox,s);if(t){const a=t(R1(o));this.hasMutatedConstraints=!!a,a&&(o=Xd(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=nt(u=>{if(!Or(u,t,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const h=r?200:1e6,d=r?40:1e7,p={type:"inertia",velocity:i?e[u]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Oa(this.visualElement,e),i.start($l(e,i,0,t,this.visualElement,!1))}stopAnimation(){nt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nt(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){nt(t=>{const{drag:i}=this.getProps();if(!Or(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-ge(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Gn(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};nt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=kb({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),nt(o=>{if(!Or(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ge(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;Rb.set(this.visualElement,this);const e=this.visualElement.current,t=Ai(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Gn(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),de.read(i);const o=Gi(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(nt(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=Aa,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Or(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Pb(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Mb extends dn{constructor(e){super(e),this.removeGroupControls=at,this.removeListeners=at,this.controls=new Ab(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||at}unmount(){this.removeGroupControls(),this.removeListeners()}}const Su=n=>(e,t)=>{n&&de.postRender(()=>n(e,t))};class Db extends dn{constructor(){super(...arguments),this.removePointerDownListener=at}onPointerDown(e){this.session=new hp(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fp(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Su(e),onStart:Su(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&de.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=Ai(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wu(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const mi={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(J.test(n))n=parseFloat(n);else return n;const t=wu(n,e.target.x),i=wu(n,e.target.y);return`${t}% ${i}%`}},Nb={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=cn.parse(n);if(r.length>5)return i;const s=cn.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=ge(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};let ko=!1;class Lb extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;n1(Ib),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),ko&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),jr.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,ko=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||de.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ml.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;ko=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pp(n){const[e,t]=Vd(),i=_.useContext(cl);return qe.jsx(Lb,{...n,layoutGroup:i,switchLayoutGroup:_.useContext(Jd),isPresent:e,safeToRemove:t})}const Ib={borderRadius:{...mi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mi,borderTopRightRadius:mi,borderBottomLeftRadius:mi,borderBottomRightRadius:mi,boxShadow:Nb};function Vb(n,e,t){const i=Fe(n)?n:ni(n);return i.start($l("",i,e,t)),i.animation}const Fb=(n,e)=>n.depth-e.depth;class Bb{constructor(){this.children=[],this.isDirty=!1}add(e){hl(this.children,e),this.isDirty=!0}remove(e){dl(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Fb),this.isDirty=!1,this.children.forEach(e)}}function zb(n,e){const t=Je.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(ln(i),n(s-e))};return de.setup(i,!0),()=>ln(i)}const mp=["TopLeft","TopRight","BottomLeft","BottomRight"],jb=mp.length,Tu=n=>typeof n=="string"?parseFloat(n):n,Cu=n=>typeof n=="number"||J.test(n);function _b(n,e,t,i,r,s){r?(n.opacity=ge(0,t.opacity??1,$b(i)),n.opacityExit=ge(e.opacity??1,0,Ub(i))):s&&(n.opacity=ge(e.opacity??1,t.opacity??1,i));for(let o=0;o<jb;o++){const a=`border${mp[o]}Radius`;let l=ku(e,a),c=ku(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Cu(l)===Cu(c)?(n[a]=Math.max(ge(Tu(l),Tu(c),i),0),(Rt.test(c)||Rt.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=ge(e.rotate||0,t.rotate||0,i))}function ku(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const $b=gp(0,.5,nd),Ub=gp(.5,.95,at);function gp(n,e,t){return i=>i<n?0:i>e?1:t(Wi(n,e,i))}function Eu(n,e){n.min=e.min,n.max=e.max}function et(n,e){Eu(n.x,e.x),Eu(n.y,e.y)}function Ou(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Ru(n,e,t,i,r){return n-=e,n=Yr(n,1/t,i),r!==void 0&&(n=Yr(n,1/r,i)),n}function Wb(n,e=0,t=1,i=.5,r,s=n,o=n){if(Rt.test(e)&&(e=parseFloat(e),e=ge(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ge(s.min,s.max,i);n===s&&(a-=e),n.min=Ru(n.min,e,t,a,r),n.max=Ru(n.max,e,t,a,r)}function Au(n,e,[t,i,r],s,o){Wb(n,e[t],e[i],e[r],e.scale,s,o)}const Hb=["x","scaleX","originX"],Kb=["y","scaleY","originY"];function Pu(n,e,t,i){Au(n.x,e,Hb,t?t.x:void 0,i?i.x:void 0),Au(n.y,e,Kb,t?t.y:void 0,i?i.y:void 0)}function Mu(n){return n.translate===0&&n.scale===1}function yp(n){return Mu(n.x)&&Mu(n.y)}function Du(n,e){return n.min===e.min&&n.max===e.max}function qb(n,e){return Du(n.x,e.x)&&Du(n.y,e.y)}function Nu(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function bp(n,e){return Nu(n.x,e.x)&&Nu(n.y,e.y)}function Lu(n){return je(n.x)/je(n.y)}function Iu(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class Jb{constructor(){this.members=[]}add(e){hl(this.members,e),e.scheduleRender()}remove(e){if(dl(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Gb(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=t?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:h,skewX:d,skewY:p}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),f&&(i+=`rotateX(${f}deg) `),h&&(i+=`rotateY(${h}deg) `),d&&(i+=`skewX(${d}deg) `),p&&(i+=`skewY(${p}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const Eo=["","X","Y","Z"],Xb=1e3;let Yb=0;function Oo(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function xp(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=rp(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",de,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&xp(i)}function vp({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e?.()){this.id=Yb++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ex),this.nodes.forEach(rx),this.nodes.forEach(sx),this.nodes.forEach(tx)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Bb)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new gl),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Id(o)&&!U0(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let u,f=0;const h=()=>this.root.updateBlockedByResize=!1;de.read(()=>{f=window.innerWidth}),n(o,()=>{const d=window.innerWidth;d!==f&&(f=d,this.root.updateBlockedByResize=!0,u&&u(),u=zb(h,250),jr.hasAnimatedSinceResize&&(jr.hasAnimatedSinceResize=!1,this.nodes.forEach(Bu)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||ux,{onLayoutAnimationStart:m,onLayoutAnimationComplete:b}=c.getProps(),v=!this.targetLayout||!bp(this.targetLayout,d),C=!f&&h;if(this.options.layoutRoot||this.resumeFrom||C||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Al(p,"layout"),onPlay:m,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(u,C)}else f||Bu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ln(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ox),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xp(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Vu);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Fu);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ix),this.nodes.forEach(Qb),this.nodes.forEach(Zb)):this.nodes.forEach(Fu),this.clearAllSnapshots();const a=Je.now();Pe.delta=$t(0,1e3/60,a-Pe.timestamp),Pe.timestamp=a,Pe.isProcessing=!0,mo.update.process(Pe),mo.preRender.process(Pe),mo.render.process(Pe),Pe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ml.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nx),this.sharedNodes.forEach(ax)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,de.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){de.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!je(this.snapshot.measuredBox.x)&&!je(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ve(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!yp(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||gn(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),fx(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ve();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(hx))){const{scroll:c}=this.root;c&&(Xn(a.x,c.offset.x),Xn(a.y,c.offset.y))}return a}removeElementScroll(o){const a=ve();if(et(a,o),this.scroll?.wasRoot)return a;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:f}=c;c!==this.root&&u&&f.layoutScroll&&(u.wasRoot&&et(a,o),Xn(a.x,u.offset.x),Xn(a.y,u.offset.y))}return a}applyTransform(o,a=!1){const l=ve();et(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Yn(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),gn(u.latestValues)&&Yn(l,u.latestValues)}return gn(this.latestValues)&&Yn(l,this.latestValues),l}removeTransform(o){const a=ve();et(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!gn(c.latestValues))continue;Ta(c.latestValues)&&c.updateSnapshot();const u=ve(),f=c.measurePageBox();et(u,f),Pu(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return gn(this.latestValues)&&Pu(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=Pe.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ve(),this.relativeTargetOrigin=ve(),Mi(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),et(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ve(),this.targetWithTransforms=ve()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bb(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):et(this.target,this.layout.layoutBox),Qd(this.target,this.targetDelta)):et(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ve(),this.relativeTargetOrigin=ve(),Mi(this.relativeTargetOrigin,this.target,h.target),et(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ta(this.parent.latestValues)||Yd(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Pe.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;et(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;P1(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ve());const{target:d}=o;if(!d){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ou(this.prevProjectionDelta.x,this.projectionDelta.x),Ou(this.prevProjectionDelta.y,this.projectionDelta.y)),Pi(this.projectionDelta,this.layoutCorrected,d,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!Iu(this.projectionDelta.x,this.prevProjectionDelta.x)||!Iu(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qn(),this.projectionDelta=Qn(),this.projectionDeltaWithTransform=Qn()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Qn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=ve(),d=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=d!==p,b=this.getStack(),v=!b||b.members.length<=1,C=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(cx));this.animationProgress=0;let k;this.mixTargetDelta=P=>{const R=P/1e3;zu(f.x,o.x,R),zu(f.y,o.y,R),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mi(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lx(this.relativeTarget,this.relativeTargetOrigin,h,R),k&&qb(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=ve()),et(k,this.relativeTarget)),m&&(this.animationValues=u,_b(u,c,this.latestValues,R,C,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ln(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=de.update(()=>{jr.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ni(0)),this.currentAnimation=Vb(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Xb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Sp(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ve();const f=je(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const h=je(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}et(a,l),Yn(a,u),Pi(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Jb),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Oo("z",o,c,this.animationValues);for(let u=0;u<Eo.length;u++)Oo(`rotate${Eo[u]}`,o,c,this.animationValues),Oo(`skew${Eo[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=zr(a?.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=zr(a?.pointerEvents)||""),this.hasProjected&&!gn(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=Gb(this.projectionDeltaWithTransform,this.treeScale,u);l&&(f=l(u,f)),o.transform=f;const{x:h,y:d}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${d.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const p in Ji){if(u[p]===void 0)continue;const{correct:m,applyTo:b,isCSSVariable:v}=Ji[p],C=f==="none"?u[p]:m(u[p],c);if(b){const k=b.length;for(let P=0;P<k;P++)o[b[P]]=C}else v?this.options.visualElement.renderState.vars[p]=C:o[p]=C}this.options.layoutId&&(o.pointerEvents=c===this?zr(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(Vu),this.root.sharedNodes.clear()}}}function Qb(n){n.updateLayout()}function Zb(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:r}=n.options,s=e.source!==n.layout.source;r==="size"?nt(u=>{const f=s?e.measuredBox[u]:e.layoutBox[u],h=je(f);f.min=t[u].min,f.max=f.min+h}):Sp(r,e.layoutBox,t)&&nt(u=>{const f=s?e.measuredBox[u]:e.layoutBox[u],h=je(t[u]);f.max=f.min+h,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[u].max=n.relativeTarget[u].min+h)});const o=Qn();Pi(o,t,e.layoutBox);const a=Qn();s?Pi(a,n.applyTransform(i,!0),e.measuredBox):Pi(a,t,e.layoutBox);const l=!yp(o);let c=!1;if(!n.resumeFrom){const u=n.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:h}=u;if(f&&h){const d=ve();Mi(d,e.layoutBox,f.layoutBox);const p=ve();Mi(p,t,h.layoutBox),bp(d,p)||(c=!0),u.options.layoutRoot&&(n.relativeTarget=p,n.relativeTargetOrigin=d,n.relativeParent=u)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function ex(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function tx(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function nx(n){n.clearSnapshot()}function Vu(n){n.clearMeasurements()}function Fu(n){n.isLayoutDirty=!1}function ix(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Bu(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function rx(n){n.resolveTargetDelta()}function sx(n){n.calcProjection()}function ox(n){n.resetSkewAndRotation()}function ax(n){n.removeLeadSnapshot()}function zu(n,e,t){n.translate=ge(e.translate,0,t),n.scale=ge(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function ju(n,e,t,i){n.min=ge(e.min,t.min,i),n.max=ge(e.max,t.max,i)}function lx(n,e,t,i){ju(n.x,e.x,t.x,i),ju(n.y,e.y,t.y,i)}function cx(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const ux={duration:.45,ease:[.4,0,.1,1]},_u=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),$u=_u("applewebkit/")&&!_u("chrome/")?Math.round:at;function Uu(n){n.min=$u(n.min),n.max=$u(n.max)}function fx(n){Uu(n.x),Uu(n.y)}function Sp(n,e,t){return n==="position"||n==="preserve-aspect"&&!yb(Lu(e),Lu(t),.2)}function hx(n){return n!==n.root&&n.scroll?.wasRoot}const dx=vp({attachResizeListener:(n,e)=>Gi(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ro={current:void 0},wp=vp({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Ro.current){const n=new dx({});n.mount(window),n.setOptions({layoutScroll:!0}),Ro.current=n}return Ro.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),px={pan:{Feature:Db},drag:{Feature:Mb,ProjectionNode:wp,MeasureLayout:pp}};function Wu(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&de.postRender(()=>s(e,dr(e)))}class mx extends dn{mount(){const{current:e}=this.node;e&&(this.unmount=B0(e,(t,i)=>(Wu(this.node,i,"Start"),r=>Wu(this.node,r,"End"))))}unmount(){}}class gx extends dn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ur(Gi(this.node.current,"focus",()=>this.onFocus()),Gi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Hu(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&de.postRender(()=>s(e,dr(e)))}class yx extends dn{mount(){const{current:e}=this.node;e&&(this.unmount=$0(e,(t,i)=>(Hu(this.node,i,"Start"),(r,{success:s})=>Hu(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Pa=new WeakMap,Ao=new WeakMap,bx=n=>{const e=Pa.get(n.target);e&&e(n)},xx=n=>{n.forEach(bx)};function vx({root:n,...e}){const t=n||document;Ao.has(t)||Ao.set(t,{});const i=Ao.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(xx,{root:n,...e})),i[r]}function Sx(n,e,t){const i=vx(e);return Pa.set(n,t),i.observe(n),()=>{Pa.delete(n),i.unobserve(n)}}const wx={some:0,all:1};class Tx extends dn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:wx[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=c?u:f;h&&h(l)};return Sx(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Cx(e,t))&&this.startObserver()}unmount(){}}function Cx({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const kx={inView:{Feature:Tx},tap:{Feature:yx},focus:{Feature:gx},hover:{Feature:mx}},Ex={layout:{ProjectionNode:wp,MeasureLayout:pp}},Ox={...fb,...kx,...px,...Ex},Dk=O1(Ox,j1);var he=Uint8Array,Ze=Uint16Array,Ul=Int32Array,Js=new he([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gs=new he([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ma=new he([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tp=function(n,e){for(var t=new Ze(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Ul(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return{b:t,r}},Cp=Tp(Js,2),kp=Cp.b,Da=Cp.r;kp[28]=258,Da[258]=28;var Ep=Tp(Gs,0),Rx=Ep.b,Ku=Ep.r,Na=new Ze(32768);for(var fe=0;fe<32768;++fe){var Ht=(fe&43690)>>1|(fe&21845)<<1;Ht=(Ht&52428)>>2|(Ht&13107)<<2,Ht=(Ht&61680)>>4|(Ht&3855)<<4,Na[fe]=((Ht&65280)>>8|(Ht&255)<<8)>>1}var At=function(n,e,t){for(var i=n.length,r=0,s=new Ze(e);r<i;++r)n[r]&&++s[n[r]-1];var o=new Ze(e);for(r=1;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new Ze(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],f=o[n[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[Na[f]>>l]=c}else for(a=new Ze(i),r=0;r<i;++r)n[r]&&(a[r]=Na[o[n[r]-1]++]>>15-n[r]);return a},un=new he(288);for(var fe=0;fe<144;++fe)un[fe]=8;for(var fe=144;fe<256;++fe)un[fe]=9;for(var fe=256;fe<280;++fe)un[fe]=7;for(var fe=280;fe<288;++fe)un[fe]=8;var Xi=new he(32);for(var fe=0;fe<32;++fe)Xi[fe]=5;var Ax=At(un,9,0),Px=At(un,9,1),Mx=At(Xi,5,0),Dx=At(Xi,5,1),Po=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ft=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},Mo=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Wl=function(n){return(n+7)/8|0},pr=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new he(n.subarray(e,t))},Nx=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],me=function(n,e,t){var i=new Error(e||Nx[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,me),!t)throw i;return i},Lx=function(n,e,t,i){var r=n.length,s=i?i.length:0;if(!r||e.f&&!e.l)return t||new he(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new he(r*3));var c=function(W){var oe=t.length;if(W>oe){var le=new he(Math.max(oe*2,W));le.set(t),t=le}},u=e.f||0,f=e.p||0,h=e.b||0,d=e.l,p=e.d,m=e.m,b=e.n,v=r*8;do{if(!d){u=ft(n,f,1);var C=ft(n,f+1,3);if(f+=3,C)if(C==1)d=Px,p=Dx,m=9,b=5;else if(C==2){var D=ft(n,f,31)+257,A=ft(n,f+10,15)+4,g=D+ft(n,f+5,31)+1;f+=14;for(var y=new he(g),T=new he(19),N=0;N<A;++N)T[Ma[N]]=ft(n,f+N*3,7);f+=A*3;for(var M=Po(T),z=(1<<M)-1,$=At(T,M,1),N=0;N<g;){var S=$[ft(n,f,z)];f+=S&15;var k=S>>4;if(k<16)y[N++]=k;else{var x=0,w=0;for(k==16?(w=3+ft(n,f,3),f+=2,x=y[N-1]):k==17?(w=3+ft(n,f,7),f+=3):k==18&&(w=11+ft(n,f,127),f+=7);w--;)y[N++]=x}}var E=y.subarray(0,D),O=y.subarray(D);m=Po(E),b=Po(O),d=At(E,m,1),p=At(O,b,1)}else me(1);else{var k=Wl(f)+4,P=n[k-4]|n[k-3]<<8,R=k+P;if(R>r){l&&me(0);break}a&&c(h+P),t.set(n.subarray(k,R),h),e.b=h+=P,e.p=f=R*8,e.f=u;continue}if(f>v){l&&me(0);break}}a&&c(h+131072);for(var F=(1<<m)-1,B=(1<<b)-1,U=f;;U=f){var x=d[Mo(n,f)&F],V=x>>4;if(f+=x&15,f>v){l&&me(0);break}if(x||me(2),V<256)t[h++]=V;else if(V==256){U=f,d=null;break}else{var H=V-254;if(V>264){var N=V-257,q=Js[N];H=ft(n,f,(1<<q)-1)+kp[N],f+=q}var se=p[Mo(n,f)&B],ke=se>>4;se||me(3),f+=se&15;var O=Rx[ke];if(ke>3){var q=Gs[ke];O+=Mo(n,f)&(1<<q)-1,f+=q}if(f>v){l&&me(0);break}a&&c(h+131072);var X=h+H;if(h<O){var Z=s-O,ae=Math.min(O,X);for(Z+h<0&&me(3);h<ae;++h)t[h]=i[Z+h]}for(;h<X;++h)t[h]=t[h-O]}}e.l=d,e.p=U,e.b=h,e.f=u,d&&(u=1,e.m=m,e.d=p,e.n=b)}while(!u);return h!=t.length&&o?pr(t,0,h):t.subarray(0,h)},Lt=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},gi=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},Do=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,s=t.slice();if(!r)return{t:Rp,l:0};if(r==1){var o=new he(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(R,D){return R.f-D.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,u=1,f=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=t[t[c].f<t[f].f?c++:f++],l=t[c!=u&&t[c].f<t[f].f?c++:f++],t[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=s[0].s,i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var d=new Ze(h+1),p=La(t[u-1],d,0);if(p>e){var i=0,m=0,b=p-e,v=1<<b;for(s.sort(function(D,A){return d[A.s]-d[D.s]||D.f-A.f});i<r;++i){var C=s[i].s;if(d[C]>e)m+=v-(1<<p-d[C]),d[C]=e;else break}for(m>>=b;m>0;){var k=s[i].s;d[k]<e?m-=1<<e-d[k]++-1:++i}for(;i>=0&&m;--i){var P=s[i].s;d[P]==e&&(--d[P],++m)}p=e}return{t:new he(d),l:p}},La=function(n,e,t){return n.s==-1?Math.max(La(n.l,e,t+1),La(n.r,e,t+1)):e[n.s]=t},qu=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ze(++e),i=0,r=n[0],s=1,o=function(l){t[i++]=l},a=1;a<=e;++a)if(n[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=n[a]}return{c:t.subarray(0,i),n:e}},yi=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},Op=function(n,e,t){var i=t.length,r=Wl(e+2);n[r]=i&255,n[r+1]=i>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=t[s];return(r+4+i)*8},Ju=function(n,e,t,i,r,s,o,a,l,c,u){Lt(e,u++,t),++r[256];for(var f=Do(r,15),h=f.t,d=f.l,p=Do(s,15),m=p.t,b=p.l,v=qu(h),C=v.c,k=v.n,P=qu(m),R=P.c,D=P.n,A=new Ze(19),g=0;g<C.length;++g)++A[C[g]&31];for(var g=0;g<R.length;++g)++A[R[g]&31];for(var y=Do(A,7),T=y.t,N=y.l,M=19;M>4&&!T[Ma[M-1]];--M);var z=c+5<<3,$=yi(r,un)+yi(s,Xi)+o,S=yi(r,h)+yi(s,m)+o+14+3*M+yi(A,T)+2*A[16]+3*A[17]+7*A[18];if(l>=0&&z<=$&&z<=S)return Op(e,u,n.subarray(l,l+c));var x,w,E,O;if(Lt(e,u,1+(S<$)),u+=2,S<$){x=At(h,d,0),w=h,E=At(m,b,0),O=m;var F=At(T,N,0);Lt(e,u,k-257),Lt(e,u+5,D-1),Lt(e,u+10,M-4),u+=14;for(var g=0;g<M;++g)Lt(e,u+3*g,T[Ma[g]]);u+=3*M;for(var B=[C,R],U=0;U<2;++U)for(var V=B[U],g=0;g<V.length;++g){var H=V[g]&31;Lt(e,u,F[H]),u+=T[H],H>15&&(Lt(e,u,V[g]>>5&127),u+=V[g]>>12)}}else x=Ax,w=un,E=Mx,O=Xi;for(var g=0;g<a;++g){var q=i[g];if(q>255){var H=q>>18&31;gi(e,u,x[H+257]),u+=w[H+257],H>7&&(Lt(e,u,q>>23&31),u+=Js[H]);var se=q&31;gi(e,u,E[se]),u+=O[se],se>3&&(gi(e,u,q>>5&8191),u+=Gs[se])}else gi(e,u,x[q]),u+=w[q]}return gi(e,u,x[256]),u+w[256]},Ix=new Ul([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Rp=new he(0),Vx=function(n,e,t,i,r,s){var o=s.z||n.length,a=new he(i+o+5*(1+Math.ceil(o/7e3))+r),l=a.subarray(i,a.length-r),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var f=Ix[e-1],h=f>>13,d=f&8191,p=(1<<t)-1,m=s.p||new Ze(32768),b=s.h||new Ze(p+1),v=Math.ceil(t/3),C=2*v,k=function(ne){return(n[ne]^n[ne+1]<<v^n[ne+2]<<C)&p},P=new Ul(25e3),R=new Ze(288),D=new Ze(32),A=0,g=0,y=s.i||0,T=0,N=s.w||0,M=0;y+2<o;++y){var z=k(y),$=y&32767,S=b[z];if(m[$]=S,b[z]=$,N<=y){var x=o-y;if((A>7e3||T>24576)&&(x>423||!c)){u=Ju(n,l,0,P,R,D,g,T,M,y-M,u),T=A=g=0,M=y;for(var w=0;w<286;++w)R[w]=0;for(var w=0;w<30;++w)D[w]=0}var E=2,O=0,F=d,B=$-S&32767;if(x>2&&z==k(y-B))for(var U=Math.min(h,x)-1,V=Math.min(32767,y),H=Math.min(258,x);B<=V&&--F&&$!=S;){if(n[y+E]==n[y+E-B]){for(var q=0;q<H&&n[y+q]==n[y+q-B];++q);if(q>E){if(E=q,O=B,q>U)break;for(var se=Math.min(B,q-2),ke=0,w=0;w<se;++w){var X=y-B+w&32767,Z=m[X],ae=X-Z&32767;ae>ke&&(ke=ae,S=X)}}}$=S,S=m[$],B+=$-S&32767}if(O){P[T++]=268435456|Da[E]<<18|Ku[O];var W=Da[E]&31,oe=Ku[O]&31;g+=Js[W]+Gs[oe],++R[257+W],++D[oe],N=y+E,++A}else P[T++]=n[y],++R[n[y]]}}for(y=Math.max(y,N);y<o;++y)P[T++]=n[y],++R[n[y]];u=Ju(n,l,c,P,R,D,g,T,M,y-M,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=b,s.p=m,s.i=y,s.w=N)}else{for(var y=s.w||0;y<o+c;y+=65535){var le=y+65535;le>=o&&(l[u/8|0]=c,le=o),u=Op(l,u+1,n.subarray(y,le))}s.i=o}return pr(a,0,i+Wl(u)+r)},Fx=function(){for(var n=new Int32Array(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(t&1&&-306674912)^t>>>1;n[e]=t}return n}(),Bx=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=Fx[t&255^e[i]]^t>>>8;n=t},d:function(){return~n}}},zx=function(n,e,t,i,r){if(!r&&(r={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new he(s.length+n.length);o.set(s),o.set(n,s.length),n=o,r.w=s.length}return Vx(n,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,r)},jx=function(n,e){var t={};for(var i in n)t[i]=n[i];for(var i in e)t[i]=e[i];return t},Tt=function(n,e){return n[e]|n[e+1]<<8},dt=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},No=function(n,e){return dt(n,e)+dt(n,e+4)*4294967296},Se=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},_x=function(){function n(e,t){if(typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new he(98304),this.o.dictionary){var i=this.o.dictionary.subarray(-32768);this.b.set(i,32768-i.length),this.s.i=32768-i.length}}return n.prototype.p=function(e,t){this.ondata(zx(e,this.o,0,0,this.s),t)},n.prototype.push=function(e,t){this.ondata||me(5),this.s.l&&me(4);var i=e.length+this.s.z;if(i>this.b.length){if(i>2*this.b.length-32768){var r=new he(i&-32768);r.set(this.b.subarray(0,this.s.z)),this.b=r}var s=this.b.length-this.s.z;this.b.set(e.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(e.subarray(s),32768),this.s.z=e.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(e,this.s.z),this.s.z+=e.length;this.s.l=t&1,(this.s.z>this.s.w+8191||t)&&(this.p(this.b,t||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||me(5),this.s.l&&me(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function $x(n,e){return Lx(n,{i:2},e&&e.out,e&&e.dictionary)}var Gu=typeof TextEncoder<"u"&&new TextEncoder,Ia=typeof TextDecoder<"u"&&new TextDecoder,Ux=0;try{Ia.decode(Rp,{stream:!0}),Ux=1}catch{}var Wx=function(n){for(var e="",t=0;;){var i=n[t++],r=(i>127)+(i>223)+(i>239);if(t+r>n.length)return{s:e,r:pr(n,t-1)};r?r==3?(i=((i&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|i>>10,56320|i&1023)):r&1?e+=String.fromCharCode((i&31)<<6|n[t++]&63):e+=String.fromCharCode((i&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(i)}};function Xu(n,e){var t;if(Gu)return Gu.encode(n);for(var i=n.length,r=new he(n.length+(n.length>>1)),s=0,o=function(c){r[s++]=c},t=0;t<i;++t){if(s+5>r.length){var a=new he(s+8+(i-t<<1));a.set(r),r=a}var l=n.charCodeAt(t);l<128||e?o(l):l<2048?(o(192|l>>6),o(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|n.charCodeAt(++t)&1023,o(240|l>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|l&63)):(o(224|l>>12),o(128|l>>6&63),o(128|l&63))}return pr(r,0,s)}function Hx(n,e){if(e){for(var t="",i=0;i<n.length;i+=16384)t+=String.fromCharCode.apply(null,n.subarray(i,i+16384));return t}else{if(Ia)return Ia.decode(n);var r=Wx(n),s=r.s,t=r.r;return t.length&&me(8),s}}var Kx=function(n){return n==1?3:n<6?2:n==9?1:0},qx=function(n,e){return e+30+Tt(n,e+26)+Tt(n,e+28)},Jx=function(n,e,t){var i=Tt(n,e+28),r=Hx(n.subarray(e+46,e+46+i),!(Tt(n,e+8)&2048)),s=e+46+i,o=dt(n,e+20),a=t&&o==4294967295?Gx(n,s):[o,dt(n,e+24),dt(n,e+42)],l=a[0],c=a[1],u=a[2];return[Tt(n,e+10),l,c,r,s+Tt(n,e+30)+Tt(n,e+32),u]},Gx=function(n,e){for(;Tt(n,e)!=1;e+=4+Tt(n,e+2));return[No(n,e+12),No(n,e+4),No(n,e+20)]},_r=function(n){var e=0;if(n)for(var t in n){var i=n[t].length;i>65535&&me(9),e+=i+4}return e},Yu=function(n,e,t,i,r,s,o,a){var l=i.length,c=t.extra,u=a&&a.length,f=_r(c);Se(n,e,o!=null?33639248:67324752),e+=4,o!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(s<0&&8),n[e++]=r&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var h=new Date(t.mtime==null?Date.now():t.mtime),d=h.getFullYear()-1980;if((d<0||d>119)&&me(10),Se(n,e,d<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>1),e+=4,s!=-1&&(Se(n,e,t.crc),Se(n,e+4,s<0?-s-2:s),Se(n,e+8,t.size)),Se(n,e+12,l),Se(n,e+14,f),e+=16,o!=null&&(Se(n,e,u),Se(n,e+6,t.attrs),Se(n,e+10,o),e+=14),n.set(i,e),e+=l,f)for(var p in c){var m=c[p],b=m.length;Se(n,e,+p),Se(n,e+2,b),n.set(m,e+4),e+=4+b}return u&&(n.set(a,e),e+=u),e},Xx=function(n,e,t,i,r){Se(n,e,101010256),Se(n,e+8,t),Se(n,e+10,t),Se(n,e+12,i),Se(n,e+16,r)},Qu=function(){function n(e){this.filename=e,this.c=Bx(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){this.ondata||me(5),this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),Nk=function(){function n(e,t){var i=this;t||(t={}),Qu.call(this,e),this.d=new _x(t,function(r,s){i.ondata(null,r,s)}),this.compression=8,this.flag=Kx(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(i){this.ondata(i,null,t)}},n.prototype.push=function(e,t){Qu.prototype.push.call(this,e,t)},n}(),Lk=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.ondata||me(5),this.d&2)this.ondata(me(4+(this.d&1)*8,0,1),null,!1);else{var i=Xu(e.filename),r=i.length,s=e.comment,o=s&&Xu(s),a=r!=e.filename.length||o&&s.length!=o.length,l=r+_r(e.extra)+30;r>65535&&this.ondata(me(11,0,1),null,!1);var c=new he(l);Yu(c,0,e,i,a,-1);var u=[c],f=function(){for(var b=0,v=u;b<v.length;b++){var C=v[b];t.ondata(null,C,!1)}u=[]},h=this.d;this.d=0;var d=this.u.length,p=jx(e,{f:i,u:a,o,t:function(){e.terminate&&e.terminate()},r:function(){if(f(),h){var b=t.u[d+1];b?b.r():t.d=1}h=1}}),m=0;e.ondata=function(b,v,C){if(b)t.ondata(b,v,C),t.terminate();else if(m+=v.length,u.push(v),C){var k=new he(16);Se(k,0,134695760),Se(k,4,e.crc),Se(k,8,m),Se(k,12,e.size),u.push(k),p.c=m,p.b=l+m+16,p.crc=e.crc,p.size=e.size,h&&p.r(),h=1}else h&&f()},this.u.push(p)}},n.prototype.end=function(){var e=this;if(this.d&2){this.ondata(me(4+(this.d&1)*8,0,1),null,!0);return}this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,i=0,r=0,s=this.u;r<s.length;r++){var o=s[r];i+=46+o.f.length+_r(o.extra)+(o.o?o.o.length:0)}for(var a=new he(i+22),l=0,c=this.u;l<c.length;l++){var o=c[l];Yu(a,e,o,o.f,o.u,-o.c-2,t,o.o),e+=46+o.f.length+_r(o.extra)+(o.o?o.o.length:0),t+=o.b}Xx(a,e,this.u.length,i,t),this.ondata(null,a,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var i=t[e];i.t()}this.d=2},n}();function Ik(n,e){for(var t={},i=n.length-22;dt(n,i)!=101010256;--i)(!i||n.length-i>65558)&&me(13);var r=Tt(n,i+8);if(!r)return{};var s=dt(n,i+16),o=s==4294967295||r==65535;if(o){var a=dt(n,i-12);o=dt(n,a)==101075792,o&&(r=dt(n,a+32),s=dt(n,a+48))}for(var l=0;l<r;++l){var c=Jx(n,s,o),u=c[0],f=c[1],h=c[2],d=c[3],p=c[4],m=c[5],b=qx(n,m);s=p,u?u==8?t[d]=$x(n.subarray(b,b+f),{out:new he(h)}):me(14,"unknown compression type "+u):t[d]=pr(n,b,b+f)}return t}const G=n=>typeof n=="string",bi=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},Zu=n=>n==null?"":""+n,Yx=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},Qx=/###/g,ef=n=>n&&n.indexOf("###")>-1?n.replace(Qx,"."):n,tf=n=>!n||G(n),Di=(n,e,t)=>{const i=G(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(tf(n))return{};const s=ef(i[r]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++r}return tf(n)?{}:{obj:n,k:ef(i[r])}},nf=(n,e,t)=>{const{obj:i,k:r}=Di(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=Di(n,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Di(n,o,Object),a?.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=t},Zx=(n,e,t,i)=>{const{obj:r,k:s}=Di(n,e,Object);r[s]=r[s]||[],r[s].push(t)},Qr=(n,e)=>{const{obj:t,k:i}=Di(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},ev=(n,e,t)=>{const i=Qr(n,t);return i!==void 0?i:Qr(e,t)},Ap=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?G(n[i])||n[i]instanceof String||G(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):Ap(n[i],e[i],t):n[i]=e[i]);return n},Bn=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var tv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const nv=n=>G(n)?n.replace(/[&<>"'\/]/g,e=>tv[e]):n;class iv{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const rv=[" ",",","?","!",";"],sv=new iv(20),ov=(n,e,t)=>{e=e||"",t=t||"";const i=rv.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(i.length===0)return!0;const r=sv.getRegExp(`(${i.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!r.test(n);if(!s){const o=n.indexOf(t);o>0&&!r.test(n.substring(0,o))&&(s=!0)}return s},Va=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let s=0;s<i.length;){if(!r||typeof r!="object")return;let o,a="";for(let l=s;l<i.length;++l)if(l!==s&&(a+=t),a+=i[l],o=r[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<i.length-1)continue;s+=l-s+1;break}r=o}return r},Yi=n=>n?.replace("_","-"),av={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Zr{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||av,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(G(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Zr(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Zr(this.logger,e)}}var Ct=new Zr;class Xs{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,s])=>{for(let o=0;o<s;o++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,s])=>{for(let o=0;o<s;o++)r.apply(r,[e,...t])})}}class rf extends Xs{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,o=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):G(i)&&s?a.push(...i.split(s)):a.push(i)));const l=Qr(this.data,a);return!l&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),l||!o||!G(i)?l:Va(this.data?.[e]?.[t],i,s)}addResource(e,t,i,r,s={silent:!1}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(o?i.split(o):i)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),nf(this.data,a,r),s.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const s in i)(G(i[s])||Array.isArray(i[s]))&&this.addResource(e,t,s,i[s],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,s,o={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=i,i=t,t=a[1]),this.addNamespaces(t);let l=Qr(this.data,a)||{};o.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?Ap(l,i,s):l={...l,...i},nf(this.data,a,l),o.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var Pp={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(s=>{e=this.processors[s]?.process(e,t,i,r)??e}),e}};const sf={},of=n=>!G(n)&&typeof n!="boolean"&&typeof n!="number";class es extends Xs{constructor(e,t={}){super(),Yx(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ct.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};return e==null?!1:this.resolve(e,i)?.res!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const o=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!ov(e,i,r);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:G(s)?[s]:s};const c=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(r)}return{key:e,namespaces:G(s)?[s]:s}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],r),c=l[l.length-1];let u=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const f=r.lng||this.language,h=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return h?s?{res:`${c}${u}${a}`,usedKey:a,exactUsedKey:a,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:`${c}${u}${a}`:s?{res:a,usedKey:a,exactUsedKey:a,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:a;const d=this.resolve(e,r);let p=d?.res;const m=d?.usedKey||a,b=d?.exactUsedKey||a,v=["[object Number]","[object Function]","[object RegExp]"],C=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,P=r.count!==void 0&&!G(r.count),R=es.hasDefaultValue(r),D=P?this.pluralResolver.getSuffix(f,r.count,r):"",A=r.ordinal&&P?this.pluralResolver.getSuffix(f,r.count,{ordinal:!1}):"",g=P&&!r.ordinal&&r.count===0,y=g&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${D}`]||r[`defaultValue${A}`]||r.defaultValue;let T=p;k&&!p&&R&&(T=y);const N=of(T),M=Object.prototype.toString.apply(T);if(k&&T&&N&&v.indexOf(M)<0&&!(G(C)&&Array.isArray(T))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,T,{...r,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(d.res=z,d.usedParams=this.getUsedParamsDetails(r),d):z}if(o){const z=Array.isArray(T),$=z?[]:{},S=z?b:m;for(const x in T)if(Object.prototype.hasOwnProperty.call(T,x)){const w=`${S}${o}${x}`;R&&!p?$[x]=this.translate(w,{...r,defaultValue:of(y)?y[x]:void 0,joinArrays:!1,ns:l}):$[x]=this.translate(w,{...r,joinArrays:!1,ns:l}),$[x]===w&&($[x]=T[x])}p=$}}else if(k&&G(C)&&Array.isArray(p))p=p.join(C),p&&(p=this.extendTranslation(p,e,r,i));else{let z=!1,$=!1;!this.isValidLookup(p)&&R&&(z=!0,p=y),this.isValidLookup(p)||($=!0,p=a);const x=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&$?void 0:p,w=R&&y!==p&&this.options.updateMissing;if($||z||w){if(this.logger.log(w?"updateKey":"missingKey",f,c,a,w?y:p),o){const B=this.resolve(a,{...r,keySeparator:!1});B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let E=[];const O=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&O&&O[0])for(let B=0;B<O.length;B++)E.push(O[B]);else this.options.saveMissingTo==="all"?E=this.languageUtils.toResolveHierarchy(r.lng||this.language):E.push(r.lng||this.language);const F=(B,U,V)=>{const H=R&&V!==p?V:x;this.options.missingKeyHandler?this.options.missingKeyHandler(B,c,U,H,w,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(B,c,U,H,w,r),this.emit("missingKey",B,c,U,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?E.forEach(B=>{const U=this.pluralResolver.getSuffixes(B,r);g&&r[`defaultValue${this.options.pluralSeparator}zero`]&&U.indexOf(`${this.options.pluralSeparator}zero`)<0&&U.push(`${this.options.pluralSeparator}zero`),U.forEach(V=>{F([B],a+V,r[`defaultValue${V}`]||y)})}):F(E,a,y))}p=this.extendTranslation(p,e,r,d,i),$&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${c}${u}${a}`),($||z)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${u}${a}`:a,z?p:void 0,r))}return s?(d.res=p,d.usedParams=this.getUsedParamsDetails(r),d):p}extendTranslation(e,t,i,r,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const l=G(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(l){const f=e.match(this.interpolator.nestingRegexp);c=f&&f.length}let u=i.replace&&!G(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),e=this.interpolator.interpolate(e,u,i.lng||this.language||r.usedLng,i),l){const f=e.match(this.interpolator.nestingRegexp),h=f&&f.length;c<h&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...f)=>s?.[0]===f[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${t[0]}`),null):this.translate(...f,t),i)),i.interpolation&&this.interpolator.reset()}const o=i.postProcess||this.options.postProcess,a=G(o)?[o]:o;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=Pp.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,s,o,a;return G(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(i))return;const c=this.extractFromKey(l,t),u=c.key;r=u;let f=c.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const h=t.count!==void 0&&!G(t.count),d=h&&!t.ordinal&&t.count===0,p=t.context!==void 0&&(G(t.context)||typeof t.context=="number")&&t.context!=="",m=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);f.forEach(b=>{this.isValidLookup(i)||(a=b,!sf[`${m[0]}-${b}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(sf[`${m[0]}-${b}`]=!0,this.logger.warn(`key "${r}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(v=>{if(this.isValidLookup(i))return;o=v;const C=[u];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(C,u,v,b,t);else{let P;h&&(P=this.pluralResolver.getSuffix(v,t.count,t));const R=`${this.options.pluralSeparator}zero`,D=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(t.ordinal&&P.indexOf(D)===0&&C.push(u+P.replace(D,this.options.pluralSeparator)),C.push(u+P),d&&C.push(u+R)),p){const A=`${u}${this.options.contextSeparator||"_"}${t.context}`;C.push(A),h&&(t.ordinal&&P.indexOf(D)===0&&C.push(A+P.replace(D,this.options.pluralSeparator)),C.push(A+P),d&&C.push(A+R))}}let k;for(;k=C.pop();)this.isValidLookup(i)||(s=k,i=this.getResource(v,b,k,t))}))})}),{res:i,usedKey:r,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!G(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const s of t)delete r[s]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class af{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ct.create("languageUtils")}getScriptPartFromCode(e){if(e=Yi(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Yi(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(G(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const s=this.getLanguagePartFromCode(i);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),G(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],s=o=>{o&&(this.isSupportedCode(o)?r.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return G(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):G(e)&&s(this.formatLanguageCode(e)),i.forEach(o=>{r.indexOf(o)<0&&s(this.formatLanguageCode(o))}),r}}const lf={zero:0,one:1,two:2,few:3,many:4,other:5},cf={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class lv{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ct.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=Yi(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),cf;if(!e.match(/-|_/))return cf;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,t)}return this.pluralRulesCache[s]=o,o}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,s)=>lf[r]-lf[s]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const uf=(n,e,t,i=".",r=!0)=>{let s=ev(n,e,t);return!s&&r&&G(t)&&(s=Va(n,t,i),s===void 0&&(s=Va(e,t,i))),s},Lo=n=>n.replace(/\$/g,"$$$$");class cv{constructor(e={}){this.logger=Ct.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:u,unescapePrefix:f,nestingPrefix:h,nestingPrefixEscaped:d,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:b,maxReplaces:v,alwaysFormat:C}=e.interpolation;this.escape=t!==void 0?t:nv,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=s?Bn(s):o||"{{",this.suffix=a?Bn(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=h?Bn(h):d||Bn("$t("),this.nestingSuffix=p?Bn(p):m||Bn(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=v||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=d=>{if(d.indexOf(this.formatSeparator)<0){const v=uf(t,l,d,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(v,void 0,i,{...r,...t,interpolationkey:d}):v}const p=d.split(this.formatSeparator),m=p.shift().trim(),b=p.join(this.formatSeparator).trim();return this.format(uf(t,l,m,this.options.keySeparator,this.options.ignoreJSONStructure),b,i,{...r,...t,interpolationkey:m})};this.resetRegExp();const u=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:d=>Lo(d)},{regex:this.regexp,safeValue:d=>this.escapeValue?Lo(this.escape(d)):Lo(d)}].forEach(d=>{for(a=0;s=d.regex.exec(e);){const p=s[1].trim();if(o=c(p),o===void 0)if(typeof u=="function"){const b=u(e,s,r);o=G(b)?b:""}else if(r&&Object.prototype.hasOwnProperty.call(r,p))o="";else if(f){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),o="";else!G(o)&&!this.useRawValueToEscape&&(o=Zu(o));const m=d.safeValue(o);if(e=e.replace(s[0],m),f?(d.regex.lastIndex+=o.length,d.regex.lastIndex-=s[0].length):d.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,s,o;const a=(l,c)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const f=l.split(new RegExp(`${u}[ ]*{`));let h=`{${f[1]}`;l=f[0],h=this.interpolate(h,o);const d=h.match(/'/g),p=h.match(/"/g);((d?.length??0)%2===0&&!p||p.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),c&&(o={...c,...o})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${u}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;r=this.nestingRegexp.exec(e);){let l=[];o={...i},o=o.replace&&!G(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const c=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(c!==-1&&(l=r[1].slice(c).split(this.formatSeparator).map(u=>u.trim()).filter(Boolean),r[1]=r[1].slice(0,c)),s=t(a.call(this,r[1].trim(),o),o),s&&r[0]===e&&!G(s))return s;G(s)||(s=Zu(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),s=""),l.length&&(s=l.reduce((u,f)=>this.format(u,f,i.lng,{...i,interpolationkey:r[1].trim()}),s.trim())),e=e.replace(r[0],s),this.regexp.lastIndex=0}return e}}const uv=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),u=a.trim();t[u]||(t[u]=c),c==="false"&&(t[u]=!1),c==="true"&&(t[u]=!0),isNaN(c)||(t[u]=parseInt(c,10))}})}return{formatName:e,formatOptions:t}},ff=n=>{const e={};return(t,i,r)=>{let s=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(s={...s,[r.interpolationkey]:void 0});const o=i+JSON.stringify(s);let a=e[o];return a||(a=n(Yi(i),r),e[o]=a),a(t)}},fv=n=>(e,t,i)=>n(Yi(t),i)(e);class hv{constructor(e={}){this.logger=Ct.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?ff:fv;this.formats={number:i((r,s)=>{const o=new Intl.NumberFormat(r,{...s});return a=>o.format(a)}),currency:i((r,s)=>{const o=new Intl.NumberFormat(r,{...s,style:"currency"});return a=>o.format(a)}),datetime:i((r,s)=>{const o=new Intl.DateTimeFormat(r,{...s});return a=>o.format(a)}),relativetime:i((r,s)=>{const o=new Intl.RelativeTimeFormat(r,{...s});return a=>o.format(a,s.range||"day")}),list:i((r,s)=>{const o=new Intl.ListFormat(r,{...s});return a=>o.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ff(t)}format(e,t,i,r={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{const{formatName:c,formatOptions:u}=uv(l);if(this.formats[c]){let f=a;try{const h=r?.formatParams?.[r.interpolationkey]||{},d=h.locale||h.lng||r.locale||r.lng||i;f=this.formats[c](a,d,{...u,...r,...h})}catch(h){this.logger.warn(h)}return f}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}const dv=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class pv extends Xs{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Ct.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const s={},o={},a={},l={};return e.forEach(c=>{let u=!0;t.forEach(f=>{const h=`${c}|${f}`;!i.reload&&this.store.hasResourceBundle(c,f)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,u=!1,o[h]===void 0&&(o[h]=!0),s[h]===void 0&&(s[h]=!0),l[f]===void 0&&(l[f]=!0)))}),u||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,t,i){const r=e.split("|"),s=r[0],o=r[1];t&&this.emit("failedLoading",s,o,t),!t&&i&&this.store.addResourceBundle(s,o,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(l=>{Zx(l.loaded,[s],o),dv(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const u=l.loaded[c];u.length&&u.forEach(f=>{a[c][f]===void 0&&(a[c][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,t,i,r=0,s=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:s,callback:o});return}this.readingCalls++;const a=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(c&&u&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,s*2,o)},s);return}o(c,u)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const c=l(e,t);c&&typeof c.then=="function"?c.then(u=>a(null,u)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,t,a)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();G(e)&&(e=this.languageUtils.toResolveHierarchy(e)),G(t)&&(t=[t]);const s=this.queueLoad(e,t,i,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],s=i[1];this.read(r,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${t}loading namespace ${s} for language ${r} failed`,o),!o&&a&&this.logger.log(`${t}loaded namespace ${s} for language ${r}`,a),this.loaded(e,o,a)})}saveMissing(e,t,i,r,s,o={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const l={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(e,t,i,r,l):u=c(e,t,i,r),u&&typeof u.then=="function"?u.then(f=>a(null,f)).catch(a):a(null,u)}catch(u){a(u)}else c(e,t,i,r,a,l)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const hf=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),G(n[1])&&(e.defaultValue=n[1]),G(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),df=n=>(G(n.ns)&&(n.ns=[n.ns]),G(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),G(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),Rr=()=>{},mv=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Qi extends Xs{constructor(e={},t){if(super(),this.options=df(e),this.services={},this.logger=Ct,this.modules={external:[]},mv(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(G(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=hf();this.options={...i,...this.options,...df(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?Ct.init(r(this.modules.logger),this.options):Ct.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=hv;const u=new af(this.options);this.store=new rf(this.options.resources,this.options);const f=this.services;f.logger=Ct,f.resourceStore=this.store,f.languageUtils=u,f.pluralResolver=new lv(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(f.formatter=r(c),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new cv(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new pv(r(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(d,...p)=>{this.emit(d,...p)}),this.modules.languageDetector&&(f.languageDetector=r(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=r(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new es(this.services,this.options),this.translator.on("*",(d,...p)=>{this.emit(d,...p)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Rr),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...u)=>this.store[c](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...u)=>(this.store[c](...u),this)});const a=bi(),l=()=>{const c=(u,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(f),t(u,f)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e,t=Rr){let i=t;const r=G(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};r?o(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload?.forEach?.(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const r=bi();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=Rr),this.services.backendConnector.reload(e,t,s=>{r.resolve(),i(s)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Pp.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=bi();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},s=(a,l)=>{l?this.isLanguageChangingTo===e&&(r(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,i.resolve((...c)=>this.t(...c)),t&&t(a,(...c)=>this.t(...c))},o=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const l=G(a)?a:a&&a[0],c=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(G(a)?[a]:a);c&&(this.language||r(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector?.cacheUserLanguage?.(c)),this.loadResources(c,u=>{s(u,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,i){const r=(s,o,...a)=>{let l;typeof o!="object"?l=this.options.overloadTranslationOptionHandler([s,o].concat(a)):l={...o},l.lng=l.lng||r.lng,l.lngs=l.lngs||r.lngs,l.ns=l.ns||r.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||i||r.keyPrefix);const c=this.options.keySeparator||".";let u;return l.keyPrefix&&Array.isArray(s)?u=s.map(f=>`${l.keyPrefix}${c}${f}`):u=l.keyPrefix?`${l.keyPrefix}${c}${s}`:s,this.t(u,l)};return G(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(t.precheck){const a=t.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(i,e)&&(!r||o(s,e)))}loadNamespaces(e,t){const i=bi();return this.options.ns?(G(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=bi();G(e)&&(e=[e]);const r=this.options.preload||[],s=e.filter(o=>r.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=r.concat(s),this.loadResources(o=>{i.resolve(),t&&t(o)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const s=r.getTextInfo();if(s&&s.direction)return s.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new af(hf());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new Qi(e,t)}cloneInstance(e={},t=Rr){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},s=new Qi(r);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i){const a=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},l[c]=Object.keys(l[c]).reduce((u,f)=>(u[f]={...l[c][f]},u),l[c]),l),{});s.store=new rf(a,r),s.services.resourceStore=s.store}return s.translator=new es(s.services,r),s.translator.on("*",(a,...l)=>{s.emit(a,...l)}),s.init(r,t),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const We=Qi.createInstance();We.createInstance=Qi.createInstance;We.createInstance;We.dir;We.init;We.loadResources;We.reloadResources;We.use;We.changeLanguage;We.getFixedT;We.t;We.exists;We.setDefaultNamespace;We.hasLoadedNamespace;We.loadNamespaces;We.loadLanguages;const{slice:gv,forEach:yv}=[];function bv(n){return yv.call(gv.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function xv(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const pf=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,vv=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let s=`${n}=${r}`;if(i.maxAge>0){const o=i.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(o)}`}if(i.domain){if(!pf.test(i.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${i.domain}`}if(i.path){if(!pf.test(i.path))throw new TypeError("option path is invalid");s+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(s+="; Partitioned"),s},mf={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=vv(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var Sv={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return mf.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:s}=e;t&&typeof document<"u"&&mf.create(t,n,i,r,s)}},wv={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const s=i.substring(1).split("&");for(let o=0;o<s.length;o++){const a=s[o].indexOf("=");a>0&&s[o].substring(0,a)===e&&(t=s[o].substring(a+1))}}return t}},Tv={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const s=r.substring(1);if(e){const o=s.split("&");for(let a=0;a<o.length;a++){const l=o[a].indexOf("=");l>0&&o[a].substring(0,l)===e&&(i=o[a].substring(l+1))}}if(i)return i;if(!i&&t>-1){const o=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?o[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let zn=null;const gf=()=>{if(zn!==null)return zn;try{if(zn=typeof window<"u"&&window.localStorage!==null,!zn)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{zn=!1}return zn};var Cv={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&gf())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&gf()&&window.localStorage.setItem(t,n)}};let jn=null;const yf=()=>{if(jn!==null)return jn;try{if(jn=typeof window<"u"&&window.sessionStorage!==null,!jn)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{jn=!1}return jn};var kv={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&yf())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&yf()&&window.sessionStorage.setItem(t,n)}},Ev={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},Ov={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},Rv={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},Av={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let Mp=!1;try{document.cookie,Mp=!0}catch{}const Dp=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Mp||Dp.splice(1,1);const Pv=()=>({order:Dp,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class Mv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=bv(t,this.options||{},Pv()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Sv),this.addDetector(wv),this.addDetector(Cv),this.addDetector(kv),this.addDetector(Ev),this.addDetector(Ov),this.addDetector(Rv),this.addDetector(Av),this.addDetector(Tv)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!xv(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}Mv.type="languageDetector";function Fa(n){"@babel/helpers - typeof";return Fa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fa(n)}function Np(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":Fa(XMLHttpRequest))==="object"}function Dv(n){return!!n&&typeof n.then=="function"}function Nv(n){return Dv(n)?n:Promise.resolve(n)}function bf(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function xf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bf(Object(t),!0).forEach(function(i){Lv(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bf(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Lv(n,e,t){return(e=Iv(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Iv(n){var e=Vv(n,"string");return Pn(e)=="symbol"?e:e+""}function Vv(n,e){if(Pn(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(Pn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pn(n){"@babel/helpers - typeof";return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(n)}var fn=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?fn=global.fetch:typeof window<"u"&&window.fetch&&(fn=window.fetch);var Zi;Np()&&(typeof global<"u"&&global.XMLHttpRequest?Zi=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Zi=window.XMLHttpRequest));var ts;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?ts=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(ts=window.ActiveXObject));typeof fn!="function"&&(fn=void 0);if(!fn&&!Zi&&!ts)try{Bg(()=>Promise.resolve().then(()=>Tk),void 0).then(function(n){fn=n.default}).catch(function(){})}catch{}var Ba=function(e,t){if(t&&Pn(t)==="object"){var i="";for(var r in t)i+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!i)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+i.slice(1)}return e},vf=function(e,t,i,r){var s=function(l){if(!l.ok)return i(l.statusText||"Error",{status:l.status});l.text().then(function(c){i(null,{status:l.status,data:c})}).catch(i)};if(r){var o=r(e,t);if(o instanceof Promise){o.then(s).catch(i);return}}typeof fetch=="function"?fetch(e,t).then(s).catch(i):fn(e,t).then(s).catch(i)},Sf=!1,Fv=function(e,t,i,r){e.queryStringParams&&(t=Ba(t,e.queryStringParams));var s=xf({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(s["Content-Type"]="application/json");var o=typeof e.requestOptions=="function"?e.requestOptions(i):e.requestOptions,a=xf({method:i?"POST":"GET",body:i?e.stringify(i):void 0,headers:s},Sf?{}:o),l=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{vf(t,a,r,l)}catch(c){if(!o||Object.keys(o).length===0||!c.message||c.message.indexOf("not implemented")<0)return r(c);try{Object.keys(o).forEach(function(u){delete a[u]}),vf(t,a,r,l),Sf=!0}catch(u){r(u)}}},Bv=function(e,t,i,r){i&&Pn(i)==="object"&&(i=Ba("",i).slice(1)),e.queryStringParams&&(t=Ba(t,e.queryStringParams));try{var s=Zi?new Zi:new ts("MSXML2.XMLHTTP.3.0");s.open(i?"POST":"GET",t,1),e.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!e.withCredentials,i&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var o=e.customHeaders;if(o=typeof o=="function"?o():o,o)for(var a in o)s.setRequestHeader(a,o[a]);s.onreadystatechange=function(){s.readyState>3&&r(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(i)}catch(l){console&&console.log(l)}},zv=function(e,t,i,r){if(typeof i=="function"&&(r=i,i=void 0),r=r||function(){},fn&&t.indexOf("file:")!==0)return Fv(e,t,i,r);if(Np()||typeof ActiveXObject=="function")return Bv(e,t,i,r);r(new Error("No fetch and no xhr implementation found!"))};function ri(n){"@babel/helpers - typeof";return ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(n)}function wf(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Io(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wf(Object(t),!0).forEach(function(i){Lp(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wf(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function jv(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _v(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Ip(i.key),i)}}function $v(n,e,t){return e&&_v(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Lp(n,e,t){return(e=Ip(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ip(n){var e=Uv(n,"string");return ri(e)=="symbol"?e:e+""}function Uv(n,e){if(ri(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(ri(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Wv=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,i,r){return Lp({},i,r||"")},parseLoadPayload:function(t,i){},request:zv,reloadInterval:typeof window<"u"?!1:3600*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Hv=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};jv(this,n),this.services=e,this.options=t,this.allOptions=i,this.type="backend",this.init(e,t,i)}return $v(n,[{key:"init",value:function(t){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=Io(Io(Io({},Wv()),this.options||{}),r),this.allOptions=s,this.services&&this.options.reloadInterval){var o=setInterval(function(){return i.reload()},this.options.reloadInterval);ri(o)==="object"&&typeof o.unref=="function"&&o.unref()}}},{key:"readMulti",value:function(t,i,r){this._readAny(t,t,i,i,r)}},{key:"read",value:function(t,i,r){this._readAny([t],t,[i],i,r)}},{key:"_readAny",value:function(t,i,r,s,o){var a=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(t,r)),l=Nv(l),l.then(function(c){if(!c)return o(null,{});var u=a.services.interpolator.interpolate(c,{lng:t.join("+"),ns:r.join("+")});a.loadUrl(u,o,i,s)})}},{key:"loadUrl",value:function(t,i,r,s){var o=this,a=typeof r=="string"?[r]:r,l=typeof s=="string"?[s]:s,c=this.options.parseLoadPayload(a,l);this.options.request(this.options,t,c,function(u,f){if(f&&(f.status>=500&&f.status<600||!f.status))return i("failed loading "+t+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return i("failed loading "+t+"; status code: "+f.status,!1);if(!f&&u&&u.message){var h=u.message.toLowerCase(),d=["failed","fetch","network","load"].find(function(b){return h.indexOf(b)>-1});if(d)return i("failed loading "+t+": "+u.message,!0)}if(u)return i(u,!1);var p,m;try{typeof f.data=="string"?p=o.options.parse(f.data,r,s):p=f.data}catch{m="failed parsing "+t+" to json"}if(m)return i(m,!1);i(null,p)})}},{key:"create",value:function(t,i,r,s,o){var a=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var l=this.options.parsePayload(i,r,s),c=0,u=[],f=[];t.forEach(function(h){var d=a.options.addPath;typeof a.options.addPath=="function"&&(d=a.options.addPath(h,i));var p=a.services.interpolator.interpolate(d,{lng:h,ns:i});a.options.request(a.options,p,l,function(m,b){c+=1,u.push(m),f.push(b),c===t.length&&typeof o=="function"&&o(u,f)})})}}},{key:"reload",value:function(){var t=this,i=this.services,r=i.backendConnector,s=i.languageUtils,o=i.logger,a=r.language;if(!(a&&a.toLowerCase()==="cimode")){var l=[],c=function(f){var h=s.toResolveHierarchy(f);h.forEach(function(d){l.indexOf(d)<0&&l.push(d)})};c(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(u){return c(u)}),l.forEach(function(u){t.allOptions.ns.forEach(function(f){r.read(u,f,"read",null,null,function(h,d){h&&o.warn("loading namespace ".concat(f," for language ").concat(u," failed"),h),!h&&d&&o.log("loaded namespace ".concat(f," for language ").concat(u),d),r.loaded("".concat(u,"|").concat(f),h,d)})})})}}}])}();Hv.type="backend";var $r={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Kv=$r.exports,Tf;function qv(){return Tf||(Tf=1,function(n,e){((t,i)=>{n.exports=i()})(Kv,function t(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,s=!i.document&&!!i.postMessage,o=i.IS_PAPA_WORKER||!1,a={},l=0,c={};function u(g){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(y){var T=R(y);T.chunkSize=parseInt(T.chunkSize),y.step||y.chunk||(T.chunkSize=null),this._handle=new m(T),(this._handle.streamer=this)._config=T}).call(this,g),this.parseChunk=function(y,T){var N=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<N){let z=this._config.newline;z||(M=this._config.quoteChar||'"',z=this._handle.guessLineEndings(y,M)),y=[...y.split(z).slice(N)].join(z)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(M=this._config.beforeFirstChunk(y))!==void 0&&(y=M),this.isFirstChunk=!1,this._halted=!1;var N=this._partialLine+y,M=(this._partialLine="",this._handle.parse(N,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(y=M.meta.cursor,N=(this._finished||(this._partialLine=N.substring(y-this._baseIndex),this._baseIndex=y),M&&M.data&&(this._rowCount+=M.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)i.postMessage({results:M,workerId:c.WORKER_ID,finished:N});else if(A(this._config.chunk)&&!T){if(this._config.chunk(M,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=M=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(M.data),this._completeResults.errors=this._completeResults.errors.concat(M.errors),this._completeResults.meta=M.meta),this._completed||!N||!A(this._config.complete)||M&&M.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),N||M&&M.meta.paused||this._nextChunk(),M}this._halted=!0},this._sendError=function(y){A(this._config.error)?this._config.error(y):o&&this._config.error&&i.postMessage({workerId:c.WORKER_ID,error:y,finished:!1})}}function f(g){var y;(g=g||{}).chunkSize||(g.chunkSize=c.RemoteChunkSize),u.call(this,g),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(T){this._input=T,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(y=new XMLHttpRequest,this._config.withCredentials&&(y.withCredentials=this._config.withCredentials),s||(y.onload=D(this._chunkLoaded,this),y.onerror=D(this._chunkError,this)),y.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var T,N=this._config.downloadRequestHeaders;for(T in N)y.setRequestHeader(T,N[T])}var M;this._config.chunkSize&&(M=this._start+this._config.chunkSize-1,y.setRequestHeader("Range","bytes="+this._start+"-"+M));try{y.send(this._config.downloadRequestBody)}catch(z){this._chunkError(z.message)}s&&y.status===0&&this._chunkError()}},this._chunkLoaded=function(){y.readyState===4&&(y.status<200||400<=y.status?this._chunkError():(this._start+=this._config.chunkSize||y.responseText.length,this._finished=!this._config.chunkSize||this._start>=(T=>(T=T.getResponseHeader("Content-Range"))!==null?parseInt(T.substring(T.lastIndexOf("/")+1)):-1)(y),this.parseChunk(y.responseText)))},this._chunkError=function(T){T=y.statusText||T,this._sendError(new Error(T))}}function h(g){(g=g||{}).chunkSize||(g.chunkSize=c.LocalChunkSize),u.call(this,g);var y,T,N=typeof FileReader<"u";this.stream=function(M){this._input=M,T=M.slice||M.webkitSlice||M.mozSlice,N?((y=new FileReader).onload=D(this._chunkLoaded,this),y.onerror=D(this._chunkError,this)):y=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var M=this._input,z=(this._config.chunkSize&&(z=Math.min(this._start+this._config.chunkSize,this._input.size),M=T.call(M,this._start,z)),y.readAsText(M,this._config.encoding));N||this._chunkLoaded({target:{result:z}})},this._chunkLoaded=function(M){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(M.target.result)},this._chunkError=function(){this._sendError(y.error)}}function d(g){var y;u.call(this,g=g||{}),this.stream=function(T){return y=T,this._nextChunk()},this._nextChunk=function(){var T,N;if(!this._finished)return T=this._config.chunkSize,y=T?(N=y.substring(0,T),y.substring(T)):(N=y,""),this._finished=!y,this.parseChunk(N)}}function p(g){u.call(this,g=g||{});var y=[],T=!0,N=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(M){this._input=M,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){N&&y.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),y.length?this.parseChunk(y.shift()):T=!0},this._streamData=D(function(M){try{y.push(typeof M=="string"?M:M.toString(this._config.encoding)),T&&(T=!1,this._checkIsFinished(),this.parseChunk(y.shift()))}catch(z){this._streamError(z)}},this),this._streamError=D(function(M){this._streamCleanUp(),this._sendError(M)},this),this._streamEnd=D(function(){this._streamCleanUp(),N=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(g){var y,T,N,M,z=Math.pow(2,53),$=-z,S=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,x=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,w=this,E=0,O=0,F=!1,B=!1,U=[],V={data:[],errors:[],meta:{}};function H(X){return g.skipEmptyLines==="greedy"?X.join("").trim()==="":X.length===1&&X[0].length===0}function q(){if(V&&N&&(ke("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),N=!1),g.skipEmptyLines&&(V.data=V.data.filter(function(W){return!H(W)})),se()){let W=function(oe,le){A(g.transformHeader)&&(oe=g.transformHeader(oe,le)),U.push(oe)};if(V)if(Array.isArray(V.data[0])){for(var X=0;se()&&X<V.data.length;X++)V.data[X].forEach(W);V.data.splice(0,1)}else V.data.forEach(W)}function Z(W,oe){for(var le=g.header?{}:[],ne=0;ne<W.length;ne++){var ce=ne,ee=W[ne],ee=((ut,Y)=>(pe=>(g.dynamicTypingFunction&&g.dynamicTyping[pe]===void 0&&(g.dynamicTyping[pe]=g.dynamicTypingFunction(pe)),(g.dynamicTyping[pe]||g.dynamicTyping)===!0))(ut)?Y==="true"||Y==="TRUE"||Y!=="false"&&Y!=="FALSE"&&((pe=>{if(S.test(pe)&&(pe=parseFloat(pe),$<pe&&pe<z))return 1})(Y)?parseFloat(Y):x.test(Y)?new Date(Y):Y===""?null:Y):Y)(ce=g.header?ne>=U.length?"__parsed_extra":U[ne]:ce,ee=g.transform?g.transform(ee,ce):ee);ce==="__parsed_extra"?(le[ce]=le[ce]||[],le[ce].push(ee)):le[ce]=ee}return g.header&&(ne>U.length?ke("FieldMismatch","TooManyFields","Too many fields: expected "+U.length+" fields but parsed "+ne,O+oe):ne<U.length&&ke("FieldMismatch","TooFewFields","Too few fields: expected "+U.length+" fields but parsed "+ne,O+oe)),le}var ae;V&&(g.header||g.dynamicTyping||g.transform)&&(ae=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(Z),ae=V.data.length):V.data=Z(V.data,0),g.header&&V.meta&&(V.meta.fields=U),O+=ae)}function se(){return g.header&&U.length===0}function ke(X,Z,ae,W){X={type:X,code:Z,message:ae},W!==void 0&&(X.row=W),V.errors.push(X)}A(g.step)&&(M=g.step,g.step=function(X){V=X,se()?q():(q(),V.data.length!==0&&(E+=X.data.length,g.preview&&E>g.preview?T.abort():(V.data=V.data[0],M(V,w))))}),this.parse=function(X,Z,ae){var W=g.quoteChar||'"',W=(g.newline||(g.newline=this.guessLineEndings(X,W)),N=!1,g.delimiter?A(g.delimiter)&&(g.delimiter=g.delimiter(X),V.meta.delimiter=g.delimiter):((W=((oe,le,ne,ce,ee)=>{var ut,Y,pe,Wt;ee=ee||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var In=0;In<ee.length;In++){for(var gt,di=ee[In],Ie=0,yt=0,Oe=0,He=(pe=void 0,new v({comments:ce,delimiter:di,newline:le,preview:10}).parse(oe)),Nt=0;Nt<He.data.length;Nt++)ne&&H(He.data[Nt])?Oe++:(gt=He.data[Nt].length,yt+=gt,pe===void 0?pe=gt:0<gt&&(Ie+=Math.abs(gt-pe),pe=gt));0<He.data.length&&(yt/=He.data.length-Oe),(Y===void 0||Ie<=Y)&&(Wt===void 0||Wt<yt)&&1.99<yt&&(Y=Ie,ut=di,Wt=yt)}return{successful:!!(g.delimiter=ut),bestDelimiter:ut}})(X,g.newline,g.skipEmptyLines,g.comments,g.delimitersToGuess)).successful?g.delimiter=W.bestDelimiter:(N=!0,g.delimiter=c.DefaultDelimiter),V.meta.delimiter=g.delimiter),R(g));return g.preview&&g.header&&W.preview++,y=X,T=new v(W),V=T.parse(y,Z,ae),q(),F?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,T.abort(),y=A(g.chunk)?"":y.substring(T.getCharIndex())},this.resume=function(){w.streamer._halted?(F=!1,w.streamer.parseChunk(y,!0)):setTimeout(w.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,T.abort(),V.meta.aborted=!0,A(g.complete)&&g.complete(V),y=""},this.guessLineEndings=function(oe,W){oe=oe.substring(0,1048576);var W=new RegExp(b(W)+"([^]*?)"+b(W),"gm"),ae=(oe=oe.replace(W,"")).split("\r"),W=oe.split(`
`),oe=1<W.length&&W[0].length<ae[0].length;if(ae.length===1||oe)return`
`;for(var le=0,ne=0;ne<ae.length;ne++)ae[ne][0]===`
`&&le++;return le>=ae.length/2?`\r
`:"\r"}}function b(g){return g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(g){var y=(g=g||{}).delimiter,T=g.newline,N=g.comments,M=g.step,z=g.preview,$=g.fastMode,S=null,x=!1,w=g.quoteChar==null?'"':g.quoteChar,E=w;if(g.escapeChar!==void 0&&(E=g.escapeChar),(typeof y!="string"||-1<c.BAD_DELIMITERS.indexOf(y))&&(y=","),N===y)throw new Error("Comment character same as delimiter");N===!0?N="#":(typeof N!="string"||-1<c.BAD_DELIMITERS.indexOf(N))&&(N=!1),T!==`
`&&T!=="\r"&&T!==`\r
`&&(T=`
`);var O=0,F=!1;this.parse=function(B,U,V){if(typeof B!="string")throw new Error("Input must be a string");var H=B.length,q=y.length,se=T.length,ke=N.length,X=A(M),Z=[],ae=[],W=[],oe=O=0;if(!B)return Ie();if($||$!==!1&&B.indexOf(w)===-1){for(var le=B.split(T),ne=0;ne<le.length;ne++){if(W=le[ne],O+=W.length,ne!==le.length-1)O+=T.length;else if(V)return Ie();if(!N||W.substring(0,ke)!==N){if(X){if(Z=[],Wt(W.split(y)),yt(),F)return Ie()}else Wt(W.split(y));if(z&&z<=ne)return Z=Z.slice(0,z),Ie(!0)}}return Ie()}for(var ce=B.indexOf(y,O),ee=B.indexOf(T,O),ut=new RegExp(b(E)+b(w),"g"),Y=B.indexOf(w,O);;)if(B[O]===w)for(Y=O,O++;;){if((Y=B.indexOf(w,Y+1))===-1)return V||ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Z.length,index:O}),gt();if(Y===H-1)return gt(B.substring(O,Y).replace(ut,w));if(w===E&&B[Y+1]===E)Y++;else if(w===E||Y===0||B[Y-1]!==E){ce!==-1&&ce<Y+1&&(ce=B.indexOf(y,Y+1));var pe=In((ee=ee!==-1&&ee<Y+1?B.indexOf(T,Y+1):ee)===-1?ce:Math.min(ce,ee));if(B.substr(Y+1+pe,q)===y){W.push(B.substring(O,Y).replace(ut,w)),B[O=Y+1+pe+q]!==w&&(Y=B.indexOf(w,O)),ce=B.indexOf(y,O),ee=B.indexOf(T,O);break}if(pe=In(ee),B.substring(Y+1+pe,Y+1+pe+se)===T){if(W.push(B.substring(O,Y).replace(ut,w)),di(Y+1+pe+se),ce=B.indexOf(y,O),Y=B.indexOf(w,O),X&&(yt(),F))return Ie();if(z&&Z.length>=z)return Ie(!0);break}ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Z.length,index:O}),Y++}}else if(N&&W.length===0&&B.substring(O,O+ke)===N){if(ee===-1)return Ie();O=ee+se,ee=B.indexOf(T,O),ce=B.indexOf(y,O)}else if(ce!==-1&&(ce<ee||ee===-1))W.push(B.substring(O,ce)),O=ce+q,ce=B.indexOf(y,O);else{if(ee===-1)break;if(W.push(B.substring(O,ee)),di(ee+se),X&&(yt(),F))return Ie();if(z&&Z.length>=z)return Ie(!0)}return gt();function Wt(Oe){Z.push(Oe),oe=O}function In(Oe){var He=0;return He=Oe!==-1&&(Oe=B.substring(Y+1,Oe))&&Oe.trim()===""?Oe.length:He}function gt(Oe){return V||(Oe===void 0&&(Oe=B.substring(O)),W.push(Oe),O=H,Wt(W),X&&yt()),Ie()}function di(Oe){O=Oe,Wt(W),W=[],ee=B.indexOf(T,O)}function Ie(Oe){if(g.header&&!U&&Z.length&&!x){var He=Z[0],Nt=Object.create(null),oo=new Set(He);let yc=!1;for(let Vn=0;Vn<He.length;Vn++){let bt=He[Vn];if(Nt[bt=A(g.transformHeader)?g.transformHeader(bt,Vn):bt]){let pi,bc=Nt[bt];for(;pi=bt+"_"+bc,bc++,oo.has(pi););oo.add(pi),He[Vn]=pi,Nt[bt]++,yc=!0,(S=S===null?{}:S)[pi]=bt}else Nt[bt]=1,He[Vn]=bt;oo.add(bt)}yc&&console.warn("Duplicate headers found and renamed."),x=!0}return{data:Z,errors:ae,meta:{delimiter:y,linebreak:T,aborted:F,truncated:!!Oe,cursor:oe+(U||0),renamedHeaders:S}}}function yt(){M(Ie()),Z=[],ae=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return O}}function C(g){var y=g.data,T=a[y.workerId],N=!1;if(y.error)T.userError(y.error,y.file);else if(y.results&&y.results.data){var M={abort:function(){N=!0,k(y.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:P,resume:P};if(A(T.userStep)){for(var z=0;z<y.results.data.length&&(T.userStep({data:y.results.data[z],errors:y.results.errors,meta:y.results.meta},M),!N);z++);delete y.results}else A(T.userChunk)&&(T.userChunk(y.results,M,y.file),delete y.results)}y.finished&&!N&&k(y.workerId,y.results)}function k(g,y){var T=a[g];A(T.userComplete)&&T.userComplete(y),T.terminate(),delete a[g]}function P(){throw new Error("Not implemented.")}function R(g){if(typeof g!="object"||g===null)return g;var y,T=Array.isArray(g)?[]:{};for(y in g)T[y]=R(g[y]);return T}function D(g,y){return function(){g.apply(y,arguments)}}function A(g){return typeof g=="function"}return c.parse=function(g,y){var T=(y=y||{}).dynamicTyping||!1;if(A(T)&&(y.dynamicTypingFunction=T,T={}),y.dynamicTyping=T,y.transform=!!A(y.transform)&&y.transform,!y.worker||!c.WORKERS_SUPPORTED)return T=null,c.NODE_STREAM_INPUT,typeof g=="string"?(g=(N=>N.charCodeAt(0)!==65279?N:N.slice(1))(g),T=new(y.download?f:d)(y)):g.readable===!0&&A(g.read)&&A(g.on)?T=new p(y):(i.File&&g instanceof File||g instanceof Object)&&(T=new h(y)),T.stream(g);(T=(()=>{var N;return!!c.WORKERS_SUPPORTED&&(N=(()=>{var M=i.URL||i.webkitURL||null,z=t.toString();return c.BLOB_URL||(c.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",z,")();"],{type:"text/javascript"})))})(),(N=new i.Worker(N)).onmessage=C,N.id=l++,a[N.id]=N)})()).userStep=y.step,T.userChunk=y.chunk,T.userComplete=y.complete,T.userError=y.error,y.step=A(y.step),y.chunk=A(y.chunk),y.complete=A(y.complete),y.error=A(y.error),delete y.worker,T.postMessage({input:g,config:y,workerId:T.id})},c.unparse=function(g,y){var T=!1,N=!0,M=",",z=`\r
`,$='"',S=$+$,x=!1,w=null,E=!1,O=((()=>{if(typeof y=="object"){if(typeof y.delimiter!="string"||c.BAD_DELIMITERS.filter(function(U){return y.delimiter.indexOf(U)!==-1}).length||(M=y.delimiter),typeof y.quotes!="boolean"&&typeof y.quotes!="function"&&!Array.isArray(y.quotes)||(T=y.quotes),typeof y.skipEmptyLines!="boolean"&&typeof y.skipEmptyLines!="string"||(x=y.skipEmptyLines),typeof y.newline=="string"&&(z=y.newline),typeof y.quoteChar=="string"&&($=y.quoteChar),typeof y.header=="boolean"&&(N=y.header),Array.isArray(y.columns)){if(y.columns.length===0)throw new Error("Option columns is empty");w=y.columns}y.escapeChar!==void 0&&(S=y.escapeChar+$),y.escapeFormulae instanceof RegExp?E=y.escapeFormulae:typeof y.escapeFormulae=="boolean"&&y.escapeFormulae&&(E=/^[=+\-@\t\r].*$/)}})(),new RegExp(b($),"g"));if(typeof g=="string"&&(g=JSON.parse(g)),Array.isArray(g)){if(!g.length||Array.isArray(g[0]))return F(null,g,x);if(typeof g[0]=="object")return F(w||Object.keys(g[0]),g,x)}else if(typeof g=="object")return typeof g.data=="string"&&(g.data=JSON.parse(g.data)),Array.isArray(g.data)&&(g.fields||(g.fields=g.meta&&g.meta.fields||w),g.fields||(g.fields=Array.isArray(g.data[0])?g.fields:typeof g.data[0]=="object"?Object.keys(g.data[0]):[]),Array.isArray(g.data[0])||typeof g.data[0]=="object"||(g.data=[g.data])),F(g.fields||[],g.data||[],x);throw new Error("Unable to serialize unrecognized input");function F(U,V,H){var q="",se=(typeof U=="string"&&(U=JSON.parse(U)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(U)&&0<U.length),ke=!Array.isArray(V[0]);if(se&&N){for(var X=0;X<U.length;X++)0<X&&(q+=M),q+=B(U[X],X);0<V.length&&(q+=z)}for(var Z=0;Z<V.length;Z++){var ae=(se?U:V[Z]).length,W=!1,oe=se?Object.keys(V[Z]).length===0:V[Z].length===0;if(H&&!se&&(W=H==="greedy"?V[Z].join("").trim()==="":V[Z].length===1&&V[Z][0].length===0),H==="greedy"&&se){for(var le=[],ne=0;ne<ae;ne++){var ce=ke?U[ne]:ne;le.push(V[Z][ce])}W=le.join("").trim()===""}if(!W){for(var ee=0;ee<ae;ee++){0<ee&&!oe&&(q+=M);var ut=se&&ke?U[ee]:ee;q+=B(V[Z][ut],ee)}Z<V.length-1&&(!H||0<ae&&!oe)&&(q+=z)}}return q}function B(U,V){var H,q;return U==null?"":U.constructor===Date?JSON.stringify(U).slice(1,25):(q=!1,E&&typeof U=="string"&&E.test(U)&&(U="'"+U,q=!0),H=U.toString().replace(O,S),(q=q||T===!0||typeof T=="function"&&T(U,V)||Array.isArray(T)&&T[V]||((se,ke)=>{for(var X=0;X<ke.length;X++)if(-1<se.indexOf(ke[X]))return!0;return!1})(H,c.BAD_DELIMITERS)||-1<H.indexOf(M)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?$+H+$:H)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!i.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=v,c.ParserHandle=m,c.NetworkStreamer=f,c.FileStreamer=h,c.StringStreamer=d,c.ReadableStreamStreamer=p,i.jQuery&&((r=i.jQuery).fn.parse=function(g){var y=g.config||{},T=[];return this.each(function(z){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var $=0;$<this.files.length;$++)T.push({file:this.files[$],inputElem:this,instanceConfig:r.extend({},y)})}),N(),this;function N(){if(T.length===0)A(g.complete)&&g.complete();else{var z,$,S,x,w=T[0];if(A(g.before)){var E=g.before(w.file,w.inputElem);if(typeof E=="object"){if(E.action==="abort")return z="AbortError",$=w.file,S=w.inputElem,x=E.reason,void(A(g.error)&&g.error({name:z},$,S,x));if(E.action==="skip")return void M();typeof E.config=="object"&&(w.instanceConfig=r.extend(w.instanceConfig,E.config))}else if(E==="skip")return void M()}var O=w.instanceConfig.complete;w.instanceConfig.complete=function(F){A(O)&&O(F,w.file,w.inputElem),M()},c.parse(w.file,w.instanceConfig)}}function M(){T.splice(0,1),N()}}),o&&(i.onmessage=function(g){g=g.data,c.WORKER_ID===void 0&&g&&(c.WORKER_ID=g.workerId),typeof g.input=="string"?i.postMessage({workerId:c.WORKER_ID,results:c.parse(g.input,g.config),finished:!0}):(i.File&&g.input instanceof File||g.input instanceof Object)&&(g=c.parse(g.input,g.config))&&i.postMessage({workerId:c.WORKER_ID,results:g,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(h.prototype=Object.create(u.prototype)).constructor=h,(d.prototype=Object.create(d.prototype)).constructor=d,(p.prototype=Object.create(u.prototype)).constructor=p,c})}($r)),$r.exports}var Jv=qv();const Vk=ll(Jv);function Gv(n,e){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const t=document.implementation.createHTMLDocument(),i=t.createElement("base"),r=t.createElement("a");return t.head.appendChild(i),t.body.appendChild(r),e&&(i.href=e),r.href=n,r.href}const Xv=(()=>{let n=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(n+=1,`u${e()}${n}`)})();function rn(n){const e=[];for(let t=0,i=n.length;t<i;t++)e.push(n[t]);return e}let _n=null;function Vp(n={}){return _n||(n.includeStyleProperties?(_n=n.includeStyleProperties,_n):(_n=rn(window.getComputedStyle(document.documentElement)),_n))}function ns(n,e){const i=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(e);return i?parseFloat(i.replace("px","")):0}function Yv(n){const e=ns(n,"border-left-width"),t=ns(n,"border-right-width");return n.clientWidth+e+t}function Qv(n){const e=ns(n,"border-top-width"),t=ns(n,"border-bottom-width");return n.clientHeight+e+t}function Fp(n,e={}){const t=e.width||Yv(n),i=e.height||Qv(n);return{width:t,height:i}}function Zv(){let n,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(n=parseInt(t,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const Ye=16384;function eS(n){(n.width>Ye||n.height>Ye)&&(n.width>Ye&&n.height>Ye?n.width>n.height?(n.height*=Ye/n.width,n.width=Ye):(n.width*=Ye/n.height,n.height=Ye):n.width>Ye?(n.height*=Ye/n.width,n.width=Ye):(n.width*=Ye/n.height,n.height=Ye))}function is(n){return new Promise((e,t)=>{const i=new Image;i.onload=()=>{i.decode().then(()=>{requestAnimationFrame(()=>e(i))})},i.onerror=t,i.crossOrigin="anonymous",i.decoding="async",i.src=n})}async function tS(n){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(n)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function nS(n,e,t){const i="http://www.w3.org/2000/svg",r=document.createElementNS(i,"svg"),s=document.createElementNS(i,"foreignObject");return r.setAttribute("width",`${e}`),r.setAttribute("height",`${t}`),r.setAttribute("viewBox",`0 0 ${e} ${t}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),r.appendChild(s),s.appendChild(n),tS(r)}const Ge=(n,e)=>{if(n instanceof e)return!0;const t=Object.getPrototypeOf(n);return t===null?!1:t.constructor.name===e.name||Ge(t,e)};function iS(n){const e=n.getPropertyValue("content");return`${n.cssText} content: '${e.replace(/'|"/g,"")}';`}function rS(n,e){return Vp(e).map(t=>{const i=n.getPropertyValue(t),r=n.getPropertyPriority(t);return`${t}: ${i}${r?" !important":""};`}).join(" ")}function sS(n,e,t,i){const r=`.${n}:${e}`,s=t.cssText?iS(t):rS(t,i);return document.createTextNode(`${r}{${s}}`)}function Cf(n,e,t,i){const r=window.getComputedStyle(n,t),s=r.getPropertyValue("content");if(s===""||s==="none")return;const o=Xv();try{e.className=`${e.className} ${o}`}catch{return}const a=document.createElement("style");a.appendChild(sS(o,t,r,i)),e.appendChild(a)}function oS(n,e,t){Cf(n,e,":before",t),Cf(n,e,":after",t)}const kf="application/font-woff",Ef="image/jpeg",aS={woff:kf,woff2:kf,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Ef,jpeg:Ef,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function lS(n){const e=/\.([^./]*?)$/g.exec(n);return e?e[1]:""}function Hl(n){const e=lS(n).toLowerCase();return aS[e]||""}function cS(n){return n.split(/,/)[1]}function za(n){return n.search(/^(data:)/)!==-1}function uS(n,e){return`data:${e};base64,${n}`}async function Bp(n,e,t){const i=await fetch(n,e);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const r=await i.blob();return new Promise((s,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{s(t({res:i,result:a.result}))}catch(l){o(l)}},a.readAsDataURL(r)})}const Vo={};function fS(n,e,t){let i=n.replace(/\?.*/,"");return t&&(i=n),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),e?`[${e}]${i}`:i}async function Kl(n,e,t){const i=fS(n,e,t.includeQueryParams);if(Vo[i]!=null)return Vo[i];t.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());let r;try{const s=await Bp(n,t.fetchRequestInit,({res:o,result:a})=>(e||(e=o.headers.get("Content-Type")||""),cS(a)));r=uS(s,e)}catch(s){r=t.imagePlaceholder||"";let o=`Failed to fetch resource: ${n}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return Vo[i]=r,r}async function hS(n){const e=n.toDataURL();return e==="data:,"?n.cloneNode(!1):is(e)}async function dS(n,e){if(n.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=n.clientWidth,s.height=n.clientHeight,o?.drawImage(n,0,0,s.width,s.height);const a=s.toDataURL();return is(a)}const t=n.poster,i=Hl(t),r=await Kl(t,i,e);return is(r)}async function pS(n,e){var t;try{if(!((t=n?.contentDocument)===null||t===void 0)&&t.body)return await Ys(n.contentDocument.body,e,!0)}catch{}return n.cloneNode(!1)}async function mS(n,e){return Ge(n,HTMLCanvasElement)?hS(n):Ge(n,HTMLVideoElement)?dS(n,e):Ge(n,HTMLIFrameElement)?pS(n,e):n.cloneNode(zp(n))}const gS=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT",zp=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SVG";async function yS(n,e,t){var i,r;if(zp(e))return e;let s=[];return gS(n)&&n.assignedNodes?s=rn(n.assignedNodes()):Ge(n,HTMLIFrameElement)&&(!((i=n.contentDocument)===null||i===void 0)&&i.body)?s=rn(n.contentDocument.body.childNodes):s=rn(((r=n.shadowRoot)!==null&&r!==void 0?r:n).childNodes),s.length===0||Ge(n,HTMLVideoElement)||await s.reduce((o,a)=>o.then(()=>Ys(a,t)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function bS(n,e,t){const i=e.style;if(!i)return;const r=window.getComputedStyle(n);r.cssText?(i.cssText=r.cssText,i.transformOrigin=r.transformOrigin):Vp(t).forEach(s=>{let o=r.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Ge(n,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),i.setProperty(s,o,r.getPropertyPriority(s))})}function xS(n,e){Ge(n,HTMLTextAreaElement)&&(e.innerHTML=n.value),Ge(n,HTMLInputElement)&&e.setAttribute("value",n.value)}function vS(n,e){if(Ge(n,HTMLSelectElement)){const t=e,i=Array.from(t.children).find(r=>n.value===r.getAttribute("value"));i&&i.setAttribute("selected","")}}function SS(n,e,t){return Ge(e,Element)&&(bS(n,e,t),oS(n,e,t),xS(n,e),vS(n,e)),e}async function wS(n,e){const t=n.querySelectorAll?n.querySelectorAll("use"):[];if(t.length===0)return n;const i={};for(let s=0;s<t.length;s++){const a=t[s].getAttribute("xlink:href");if(a){const l=n.querySelector(a),c=document.querySelector(a);!l&&c&&!i[a]&&(i[a]=await Ys(c,e,!0))}}const r=Object.values(i);if(r.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(s,"defs");o.appendChild(a);for(let l=0;l<r.length;l++)a.appendChild(r[l]);n.appendChild(o)}return n}async function Ys(n,e,t){return!t&&e.filter&&!e.filter(n)?null:Promise.resolve(n).then(i=>mS(i,e)).then(i=>yS(n,i,e)).then(i=>SS(n,i,e)).then(i=>wS(i,e))}const jp=/url\((['"]?)([^'"]+?)\1\)/g,TS=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,CS=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function kS(n){const e=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function ES(n){const e=[];return n.replace(jp,(t,i,r)=>(e.push(r),t)),e.filter(t=>!za(t))}async function OS(n,e,t,i,r){try{const s=t?Gv(e,t):e,o=Hl(e);let a;return r||(a=await Kl(s,o,i)),n.replace(kS(e),`$1${a}$3`)}catch{}return n}function RS(n,{preferredFontFormat:e}){return e?n.replace(CS,t=>{for(;;){const[i,,r]=TS.exec(t)||[];if(!r)return"";if(r===e)return`src: ${i};`}}):n}function _p(n){return n.search(jp)!==-1}async function $p(n,e,t){if(!_p(n))return n;const i=RS(n,t);return ES(i).reduce((s,o)=>s.then(a=>OS(a,o,e,t)),Promise.resolve(i))}async function $n(n,e,t){var i;const r=(i=e.style)===null||i===void 0?void 0:i.getPropertyValue(n);if(r){const s=await $p(r,null,t);return e.style.setProperty(n,s,e.style.getPropertyPriority(n)),!0}return!1}async function AS(n,e){await $n("background",n,e)||await $n("background-image",n,e),await $n("mask",n,e)||await $n("-webkit-mask",n,e)||await $n("mask-image",n,e)||await $n("-webkit-mask-image",n,e)}async function PS(n,e){const t=Ge(n,HTMLImageElement);if(!(t&&!za(n.src))&&!(Ge(n,SVGImageElement)&&!za(n.href.baseVal)))return;const i=t?n.src:n.href.baseVal,r=await Kl(i,Hl(i),e);await new Promise((s,o)=>{n.onload=s,n.onerror=e.onImageErrorHandler?(...l)=>{try{s(e.onImageErrorHandler(...l))}catch(c){o(c)}}:o;const a=n;a.decode&&(a.decode=s),a.loading==="lazy"&&(a.loading="eager"),t?(n.srcset="",n.src=r):n.href.baseVal=r})}async function MS(n,e){const i=rn(n.childNodes).map(r=>Up(r,e));await Promise.all(i).then(()=>n)}async function Up(n,e){Ge(n,Element)&&(await AS(n,e),await PS(n,e),await MS(n,e))}function DS(n,e){const{style:t}=n;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const i=e.style;return i!=null&&Object.keys(i).forEach(r=>{t[r]=i[r]}),n}const Of={};async function Rf(n){let e=Of[n];if(e!=null)return e;const i=await(await fetch(n)).text();return e={url:n,cssText:i},Of[n]=e,e}async function Af(n,e){let t=n.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,s=(t.match(/url\([^)]+\)/g)||[]).map(async o=>{let a=o.replace(i,"$1");return a.startsWith("https://")||(a=new URL(a,n.url).href),Bp(a,e.fetchRequestInit,({result:l})=>(t=t.replace(o,`url(${l})`),[o,l]))});return Promise.all(s).then(()=>t)}function Pf(n){if(n==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let i=n.replace(t,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=r.exec(i);if(l===null)break;e.push(l[0])}i=i.replace(r,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let l=s.exec(i);if(l===null){if(l=a.exec(i),l===null)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(l[0])}return e}async function NS(n,e){const t=[],i=[];return n.forEach(r=>{if("cssRules"in r)try{rn(r.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let a=o+1;const l=s.href,c=Rf(l).then(u=>Af(u,e)).then(u=>Pf(u).forEach(f=>{try{r.insertRule(f,f.startsWith("@import")?a+=1:r.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(u=>{console.error("Error loading remote css",u.toString())});i.push(c)}})}catch(s){const o=n.find(a=>a.href==null)||document.styleSheets[0];r.href!=null&&i.push(Rf(r.href).then(a=>Af(a,e)).then(a=>Pf(a).forEach(l=>{o.insertRule(l,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(i).then(()=>(n.forEach(r=>{if("cssRules"in r)try{rn(r.cssRules||[]).forEach(s=>{t.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${r.href}`,s)}}),t))}function LS(n){return n.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>_p(e.style.getPropertyValue("src")))}async function IS(n,e){if(n.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=rn(n.ownerDocument.styleSheets),i=await NS(t,e);return LS(i)}function Wp(n){return n.trim().replace(/["']/g,"")}function VS(n){const e=new Set;function t(i){(i.style.fontFamily||getComputedStyle(i).fontFamily).split(",").forEach(s=>{e.add(Wp(s))}),Array.from(i.children).forEach(s=>{s instanceof HTMLElement&&t(s)})}return t(n),e}async function FS(n,e){const t=await IS(n,e),i=VS(n);return(await Promise.all(t.filter(s=>i.has(Wp(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return $p(s.cssText,o,e)}))).join(`
`)}async function BS(n,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await FS(n,e);if(t){const i=document.createElement("style"),r=document.createTextNode(t);i.appendChild(r),n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)}}async function zS(n,e={}){const{width:t,height:i}=Fp(n,e),r=await Ys(n,e,!0);return await BS(r,e),await Up(r,e),DS(r,e),await nS(r,t,i)}async function jS(n,e={}){const{width:t,height:i}=Fp(n,e),r=await zS(n,e),s=await is(r),o=document.createElement("canvas"),a=o.getContext("2d"),l=e.pixelRatio||Zv(),c=e.canvasWidth||t,u=e.canvasHeight||i;return o.width=c*l,o.height=u*l,e.skipAutoScale||eS(o),o.style.width=`${c}`,o.style.height=`${u}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function Fk(n,e={}){return(await jS(n,e)).toDataURL()}var Fo={exports:{}},Bo={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf;function _S(){if(Mf)return Bo;Mf=1;var n=$h();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(f,h){var d=h(),p=i({inst:{value:d,getSnapshot:h}}),m=p[0].inst,b=p[1];return s(function(){m.value=d,m.getSnapshot=h,l(m)&&b({inst:m})},[f,d,h]),r(function(){return l(m)&&b({inst:m}),f(function(){l(m)&&b({inst:m})})},[f]),o(d),d}function l(f){var h=f.getSnapshot;f=f.value;try{var d=h();return!t(f,d)}catch{return!0}}function c(f,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Bo.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:u,Bo}var Df;function Hp(){return Df||(Df=1,Fo.exports=_S()),Fo.exports}var Bk=Hp();function Ae(n){this.content=n}Ae.prototype={constructor:Ae,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var i=t&&t!=n?this.remove(t):this,r=i.find(n),s=i.content.slice();return r==-1?s.push(t||n,e):(s[r+1]=e,t&&(s[r]=t)),new Ae(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Ae(t)},addToStart:function(n,e){return new Ae([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Ae(t)},addBefore:function(n,e,t){var i=this.remove(e),r=i.content.slice(),s=i.find(n);return r.splice(s==-1?r.length:s,0,e,t),new Ae(r)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Ae.from(n),n.size?new Ae(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ae.from(n),n.size?new Ae(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Ae.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Ae.from=function(n){if(n instanceof Ae)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Ae(e)};function Kp(n,e,t){for(let i=0;;i++){if(i==n.childCount||i==e.childCount)return n.childCount==e.childCount?null:t;let r=n.child(i),s=e.child(i);if(r==s){t+=r.nodeSize;continue}if(!r.sameMarkup(s))return t;if(r.isText&&r.text!=s.text){for(let o=0;r.text[o]==s.text[o];o++)t++;return t}if(r.content.size||s.content.size){let o=Kp(r.content,s.content,t+1);if(o!=null)return o}t+=r.nodeSize}}function qp(n,e,t,i){for(let r=n.childCount,s=e.childCount;;){if(r==0||s==0)return r==s?null:{a:t,b:i};let o=n.child(--r),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:t,b:i};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,i--;return{a:t,b:i}}if(o.content.size||a.content.size){let c=qp(o.content,a.content,t-1,i-1);if(c)return c}t-=l,i-=l}}class I{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,r=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&i(l,r+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),i,r+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,r){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?r?typeof r=="function"?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&i&&(o?o=!1:s+=i),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,r=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(i)&&(r[r.length-1]=t.withText(t.text+i.text),s=1);s<e.content.length;s++)r.push(e.content[s]);return new I(r,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],r=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),i.push(a),r+=a.nodeSize),o=l}return new I(i,r)}cutByIndex(e,t){return e==t?I.empty:e==0&&t==this.content.length?this:new I(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let r=this.content.slice(),s=this.size+t.nodeSize-i.nodeSize;return r[e]=t,new I(r,s)}addToStart(e){return new I([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new I(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let r=this.content[t];e(r,i,t),i+=r.nodeSize}}findDiffStart(e,t=0){return Kp(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return qp(this,e,t,i)}findIndex(e){if(e==0)return Ar(0,e);if(e==this.size)return Ar(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,i=0;;t++){let r=this.child(t),s=i+r.nodeSize;if(s>=e)return s==e?Ar(t+1,s):Ar(t,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return I.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new I(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return I.empty;let t,i=0;for(let r=0;r<e.length;r++){let s=e[r];i+=s.nodeSize,r&&s.isText&&e[r-1].sameMarkup(s)?(t||(t=e.slice(0,r)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new I(t||e,i)}static from(e){if(!e)return I.empty;if(e instanceof I)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new I([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}I.empty=new I([],0);const zo={index:0,offset:0};function Ar(n,e){return zo.index=n,zo.offset=e,zo}function rs(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!rs(n[i],e[i]))return!1}else{for(let i in n)if(!(i in e)||!rs(n[i],e[i]))return!1;for(let i in e)if(!(i in n))return!1}return!0}class re{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let r=0;r<e.length;r++){let s=e[r];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,r));else{if(s.type.excludes(this.type))return e;!i&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),i=!0),t&&t.push(s)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&rs(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=i.create(t.attrs);return i.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return re.none;if(e instanceof re)return[e];let t=e.slice();return t.sort((i,r)=>i.type.rank-r.type.rank),t}}re.none=[];class ss extends Error{}class j{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=Gp(this.content,e+this.openStart,t);return i&&new j(i,this.openStart,this.openEnd)}removeBetween(e,t){return new j(Jp(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return j.empty;let i=t.openStart||0,r=t.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new j(I.fromJSON(e,t.content),i,r)}static maxOpen(e,t=!0){let i=0,r=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)r++;return new j(e,i,r)}}j.empty=new j(I.empty,0,0);function Jp(n,e,t){let{index:i,offset:r}=n.findIndex(e),s=n.maybeChild(i),{index:o,offset:a}=n.findIndex(t);if(r==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(Jp(s.content,e-r-1,t-r-1)))}function Gp(n,e,t,i){let{index:r,offset:s}=n.findIndex(e),o=n.maybeChild(r);if(s==e||o.isText)return i&&!i.canReplace(r,r,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Gp(o.content,e-s-1,t,o);return a&&n.replaceChild(r,o.copy(a))}function $S(n,e,t){if(t.openStart>n.depth)throw new ss("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new ss("Inconsistent open depths");return Xp(n,e,t,0)}function Xp(n,e,t,i){let r=n.index(i),s=n.node(i);if(r==e.index(i)&&i<n.depth-t.openStart){let o=Xp(n,e,t,i+1);return s.copy(s.content.replaceChild(r,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==i&&e.depth==i){let o=n.parent,a=o.content;return En(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=US(t,n);return En(s,Qp(n,o,a,e,i))}else return En(s,as(n,e,i))}function Yp(n,e){if(!e.type.compatibleContent(n.type))throw new ss("Cannot join "+e.type.name+" onto "+n.type.name)}function ja(n,e,t){let i=n.node(t);return Yp(i,e.node(t)),i}function kn(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Ni(n,e,t,i){let r=(e||n).node(t),s=0,o=e?e.index(t):r.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(kn(n.nodeAfter,i),s++));for(let a=s;a<o;a++)kn(r.child(a),i);e&&e.depth==t&&e.textOffset&&kn(e.nodeBefore,i)}function En(n,e){return n.type.checkContent(e),n.copy(e)}function Qp(n,e,t,i,r){let s=n.depth>r&&ja(n,e,r+1),o=i.depth>r&&ja(t,i,r+1),a=[];return Ni(null,n,r,a),s&&o&&e.index(r)==t.index(r)?(Yp(s,o),kn(En(s,Qp(n,e,t,i,r+1)),a)):(s&&kn(En(s,as(n,e,r+1)),a),Ni(e,t,r,a),o&&kn(En(o,as(t,i,r+1)),a)),Ni(i,null,r,a),new I(a)}function as(n,e,t){let i=[];if(Ni(null,n,t,i),n.depth>t){let r=ja(n,e,t+1);kn(En(r,as(n,e,t+1)),i)}return Ni(e,null,t,i),new I(i)}function US(n,e){let t=e.depth-n.openStart,r=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)r=e.node(s).copy(I.from(r));return{start:r.resolveNoCache(n.openStart+t),end:r.resolveNoCache(r.content.size-n.openEnd-t)}}class er{constructor(e,t,i){this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=e.child(t);return i?e.child(t).cut(i):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],r=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)r+=i.child(s).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return re.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),r=e.maybeChild(t);if(!i){let a=i;i=r,r=a}let s=i.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!r||!s[o].isInSet(r.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,r=e.parent.maybeChild(e.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new ls(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],r=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(i.push(o,a,r+l),!c||(o=o.child(a),o.isText))break;s=c-1,r+=l+1}return new er(t,i,s)}static resolveCached(e,t){let i=Nf.get(e);if(i)for(let s=0;s<i.elts.length;s++){let o=i.elts[s];if(o.pos==t)return o}else Nf.set(e,i=new WS);let r=i.elts[i.i]=er.resolve(e,t);return i.i=(i.i+1)%HS,r}}class WS{constructor(){this.elts=[],this.i=0}}const HS=12,Nf=new WeakMap;class ls{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const KS=Object.create(null);class Pt{constructor(e,t,i,r=re.none){this.type=e,this.attrs=t,this.marks=r,this.content=i||I.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,r=0){this.content.nodesBetween(e,t,i,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,r){return this.content.textBetween(e,t,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&rs(this.attrs,t||e.defaultAttrs||KS)&&re.sameSet(this.marks,i||re.none)}copy(e=null){return e==this.content?this:new Pt(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Pt(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return j.empty;let r=this.resolve(e),s=this.resolve(t),o=i?0:r.sharedDepth(t),a=r.start(o),c=r.node(o).content.cut(r.pos-a,s.pos-a);return new j(c,r.depth-o,s.depth-o)}replace(e,t,i){return $S(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let r=this.content.child(t-1);return{node:r,index:t-1,offset:i-r.nodeSize}}resolve(e){return er.resolveCached(this,e)}resolveNoCache(e){return er.resolve(this,e)}rangeHasMark(e,t,i){let r=!1;return t>e&&this.nodesBetween(e,t,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Zp(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=I.empty,r=0,s=i.childCount){let o=this.contentMatchAt(e).matchFragment(i,r,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=r;l<s;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(e,t,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(e).matchType(i),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=re.none;for(let t=0;t<this.marks.length;t++){let i=this.marks[t];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!re.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}let r=I.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,r,i);return s.type.checkAttrs(s.attrs),s}}Pt.prototype.text=void 0;class cs extends Pt{constructor(e,t,i,r){if(super(e,t,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Zp(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new cs(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new cs(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Zp(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Mn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let i=new qS(e,t);if(i.next==null)return Mn.empty;let r=em(i);i.next&&i.err("Unexpected trailing text");let s=ew(ZS(r));return tw(s,i),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let r=this;for(let s=t;r&&s<i;s++)r=r.matchType(e.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let r=[this];function s(o,a){let l=o.matchFragment(e,i);if(l&&(!t||l.validEnd))return I.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:f}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&r.indexOf(f)==-1){r.push(f);let h=s(f,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(e)){let o=[];for(let a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!r.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:r}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let r=0;r<i.next.length;r++)e.indexOf(i.next[r].next)==-1&&t(i.next[r].next)}return t(this),e.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)s+=(o?", ":"")+i.next[o].type.name+"->"+e.indexOf(i.next[o].next);return s}).join(`
`)}}Mn.empty=new Mn(!0);class qS{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function em(n){let e=[];do e.push(JS(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function JS(n){let e=[];do e.push(GS(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function GS(n){let e=QS(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=XS(n,e);else break;return e}function Lf(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function XS(n,e){let t=Lf(n),i=t;return n.eat(",")&&(n.next!="}"?i=Lf(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function YS(n,e){let t=n.nodeTypes,i=t[e];if(i)return[i];let r=[];for(let s in t){let o=t[s];o.isInGroup(e)&&r.push(o)}return r.length==0&&n.err("No node type or group '"+e+"' found"),r}function QS(n){if(n.eat("(")){let e=em(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=YS(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function ZS(n){let e=[[]];return r(s(n,0),t()),e;function t(){return e.push([])-1}function i(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function r(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;r(c,a=t())}else if(o.type=="star"){let l=t();return i(a,l),r(s(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=t();return r(s(o.expr,a),l),r(s(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();r(s(o.expr,l),u),l=u}if(o.max==-1)r(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();i(l,u),r(s(o.expr,l),u),l=u}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function tm(n,e){return e-n}function If(n,e){let t=[];return i(e),t.sort(tm);function i(r){let s=n[r];if(s.length==1&&!s[0].term)return i(s[0].to);t.push(r);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&i(l)}}}function ew(n){let e=Object.create(null);return t(If(n,0));function t(i){let r=[];i.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<r.length;u++)r[u][0]==a&&(c=r[u][1]);If(n,l).forEach(u=>{c||r.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[i.join(",")]=new Mn(i.indexOf(n.length-1)>-1);for(let o=0;o<r.length;o++){let a=r[o][1].sort(tm);s.next.push({type:r[o][0],next:e[a.join(",")]||t(a)})}return s}}function tw(n,e){for(let t=0,i=[n];t<i.length;t++){let r=i[t],s=!r.validEnd,o=[];for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),i.indexOf(c)==-1&&i.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function nm(n){let e=Object.create(null);for(let t in n){let i=n[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function im(n,e){let t=Object.create(null);for(let i in n){let r=e&&e[i];if(r===void 0){let s=n[i];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=r}return t}function rm(n,e,t,i){for(let r in e)if(!(r in n))throw new RangeError(`Unsupported attribute ${r} for ${t} of type ${r}`);for(let r in n){let s=n[r];s.validate&&s.validate(e[r])}}function sm(n,e){let t=Object.create(null);if(e)for(let i in e)t[i]=new iw(n,i,e[i]);return t}let Vf=class om{constructor(e,t,i){this.name=e,this.schema=t,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=sm(e,i.attrs),this.defaultAttrs=nm(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Mn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:im(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Pt(this,this.computeAttrs(e),I.from(t),re.setFrom(i))}createChecked(e=null,t,i){return t=I.from(t),this.checkContent(t),new Pt(this,this.computeAttrs(e),t,re.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=I.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let r=this.contentMatch.matchFragment(t),s=r&&r.fillBefore(I.empty,!0);return s?new Pt(this,e,t.append(s),re.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){rm(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:re.none:e}static compile(e,t){let i=Object.create(null);e.forEach((s,o)=>i[s]=new om(s,t,o));let r=t.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function nw(n,e,t){let i=t.split("|");return r=>{let s=r===null?"null":typeof r;if(i.indexOf(s)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${n}, got ${s}`)}}class iw{constructor(e,t,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?nw(e,t,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class Qs{constructor(e,t,i,r){this.name=e,this.rank=t,this.schema=i,this.spec=r,this.attrs=sm(e,r.attrs),this.excluded=null;let s=nm(this.attrs);this.instance=s?new re(this,s):null}create(e=null){return!e&&this.instance?this.instance:new re(this,im(this.attrs,e))}static compile(e,t){let i=Object.create(null),r=0;return e.forEach((s,o)=>i[s]=new Qs(s,r++,t,o)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){rm(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class zk{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=Ae.from(e.nodes),t.marks=Ae.from(e.marks||{}),this.nodes=Vf.compile(this.spec.nodes,this),this.marks=Qs.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=i[o]||(i[o]=Mn.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?Ff(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Ff(this,o.split(" "))}this.nodeFromJSON=r=>Pt.fromJSON(this,r),this.markFromJSON=r=>re.fromJSON(this,r),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Vf){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,r)}text(e,t){let i=this.nodes.text;return new cs(i,i.defaultAttrs,e,re.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Ff(n,e){let t=[];for(let i=0;i<e.length;i++){let r=e[i],s=n.marks[r],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(r=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}function rw(n){return n.tag!=null}function sw(n){return n.style!=null}class tr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let i=this.matchedStyles=[];t.forEach(r=>{if(rw(r))this.tags.push(r);else if(sw(r)){let s=/[^=]*/.exec(r.style)[0];i.indexOf(s)<0&&i.push(s),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let s=e.nodes[r.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let i=new zf(this,t,!1);return i.addAll(e,re.none,t.from,t.to),i.finish()}parseSlice(e,t={}){let i=new zf(this,t,!0);return i.addAll(e,re.none,t.from,t.to),j.maxOpen(i.finish())}matchTag(e,t,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(lw(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!i.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function i(r){let s=r.priority==null?50:r.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,r)}for(let r in e.marks){let s=e.marks[r].spec.parseDOM;s&&s.forEach(o=>{i(o=jf(o)),o.mark||o.ignore||o.clearMark||(o.mark=r)})}for(let r in e.nodes){let s=e.nodes[r].spec.parseDOM;s&&s.forEach(o=>{i(o=jf(o)),o.node||o.ignore||o.mark||(o.node=r)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new tr(e,tr.schemaRules(e)))}}const am={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ow={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lm={ol:!0,ul:!0},nr=1,_a=2,Li=4;function Bf(n,e,t){return e!=null?(e?nr:0)|(e==="full"?_a:0):n&&n.whitespace=="pre"?nr|_a:t&~Li}class Pr{constructor(e,t,i,r,s,o){this.type=e,this.attrs=t,this.marks=i,this.solid=r,this.options=o,this.content=[],this.activeMarks=re.none,this.match=s||(o&Li?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(I.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(e.type))?(this.match=i,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&nr)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let t=I.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(I.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!am.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class zf{constructor(e,t,i){this.parser=e,this.options=t,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let r=t.topNode,s,o=Bf(null,t.preserveWhitespace,0)|(i?Li:0);r?s=new Pr(r.type,r.attrs,re.none,!0,t.topMatch||r.type.contentMatch,o):i?s=new Pr(null,null,re.none,!0,null,o):s=new Pr(e.schema.topNodeType,null,re.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let i=e.nodeValue,r=this.top,s=r.options&_a?"full":this.localPreserveWS||(r.options&nr)>0;if(s==="full"||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(s)s!=="full"?i=i.replace(/\r?\n|\r/g," "):i=i.replace(/\r\n?/g,`
`);else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),t,!/\S/.test(i)),this.findInText(e)}else this.findInside(e)}addElement(e,t,i){let r=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;lm.hasOwnProperty(o)&&this.parser.normalizeLists&&aw(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,i));e:if(l?l.ignore:ow.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(am.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let f=l&&l.skip?t:this.readStyles(e,t);f&&this.addAll(e,f),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=r}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let i=e.style;if(i&&i.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let s=this.parser.matchedStyles[r],o=i.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,i,r){let s,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),i,e.nodeName=="BR")||this.leafFallback(e,i);else{let l=this.enter(o,t.attrs||null,i,t.preserveWhitespace);l&&(s=!0,i=l)}else{let l=this.parser.schema.marks[t.mark];i=i.concat(l.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,i,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,i,!1));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,i),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,t,i,r){let s=i||0;for(let o=i?e.childNodes[i]:e.firstChild,a=r==null?null:e.childNodes[r];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,t);this.findAtPoint(e,s)}findPlace(e,t,i){let r,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!r||r.length>c.length+a)&&(r=c,s=l,!c.length))break;if(l.solid){if(i)break;a+=2}}if(!r)return null;this.sync(s);for(let o=0;o<r.length;o++)t=this.enterInner(r[o],null,t,!1);return t}insertNode(e,t,i){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let r=this.findPlace(e,t,i);if(r){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=re.none;for(let a of r.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):_f(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,t,i,r){let s=this.findPlace(e.create(t),i,!1);return s&&(s=this.enterInner(e,t,i,!0,r)),s}enterInner(e,t,i,r=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=Bf(e,s,o.options);o.options&Li&&o.content.length==0&&(a|=Li);let l=re.none;return i=i.filter(c=>(o.type?o.type.allowsMarkType(c.type):_f(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Pr(e,t,l,r,null,a)),this.open++,i}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=nr)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let i=this.nodes[t].content;for(let r=i.length-1;r>=0;r--)e+=i[r].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,i){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&r?this.nodes[l].type:i&&l>=s?i.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let i=this.parser.schema.nodes[t];if(i.isTextblock&&i.defaultAttrs)return i}}}function aw(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&lm.hasOwnProperty(i)&&t?(t.appendChild(e),e=t):i=="li"?t=e:i&&(t=null)}}function lw(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function jf(n){let e={};for(let t in n)e[t]=n[t];return e}function _f(n,e){let t=e.schema.nodes;for(let i in t){let r=t[i];if(!r.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(r.contentMatch))return!0}}class hi{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},i){i||(i=jo(t).createDocumentFragment());let r=i,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)r=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,r]),r.appendChild(u.dom),r=u.contentDOM||u.dom)}}r.appendChild(this.serializeNodeInner(o,t))}),i}serializeNodeInner(e,t){let{dom:i,contentDOM:r}=Ur(jo(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return i}serializeNode(e,t={}){let i=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let s=this.serializeMark(e.marks[r],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(e,t,i={}){let r=this.marks[e.type.name];return r&&Ur(jo(i),r(e,t),null,e.attrs)}static renderSpec(e,t,i=null,r){return Ur(e,t,i,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new hi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=$f(e.nodes);return t.text||(t.text=i=>i.text),t}static marksFromSchema(e){return $f(e.marks)}}function $f(n){let e={};for(let t in n){let i=n[t].spec.toDOM;i&&(e[t]=i)}return e}function jo(n){return n.document||window.document}const Uf=new WeakMap;function cw(n){let e=Uf.get(n);return e===void 0&&Uf.set(n,e=uw(n)),e}function uw(n){let e=null;function t(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let r=0;r<i.length;r++)t(i[r]);else for(let r in i)t(i[r])}return t(n),e}function Ur(n,e,t,i){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],s;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(s=cw(i))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=r.indexOf(" ");o>0&&(t=r.slice(0,o),r=r.slice(o+1));let a,l=t?n.createElementNS(t,r):n.createElement(r),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let h=f.indexOf(" ");h>0?l.setAttributeNS(f.slice(0,h),f.slice(h+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:d,contentDOM:p}=Ur(n,h,t,i);if(l.appendChild(d),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const cm=65535,um=Math.pow(2,16);function fw(n,e){return n+e*um}function Wf(n){return n&cm}function hw(n){return(n-(n&cm))/um}const fm=1,hm=2,Wr=4,dm=8;class $a{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&dm)>0}get deletedBefore(){return(this.delInfo&(fm|Wr))>0}get deletedAfter(){return(this.delInfo&(hm|Wr))>0}get deletedAcross(){return(this.delInfo&Wr)>0}}class Qe{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Qe.empty)return Qe.empty}recover(e){let t=0,i=Wf(e);if(!this.inverted)for(let r=0;r<i;r++)t+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+t+hw(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let r=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],f=l+c;if(e<=f){let h=c?e==l?-1:e==f?1:t:t,d=l+r+(h<0?0:u);if(i)return d;let p=e==(t<0?l:f)?null:fw(a/3,e-l),m=e==l?hm:e==f?fm:Wr;return(t<0?e!=l:e!=f)&&(m|=dm),new $a(d,m,p)}r+=u-c}return i?e+r:new $a(e+r,0,null)}touches(e,t){let i=0,r=Wf(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==r*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[r+t],u=this.ranges[r+i];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Qe(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Qe.empty:new Qe(e<0?[0,-e,0]:[0,0,e])}}Qe.empty=new Qe([]);class ir{constructor(e,t,i=0,r=e?e.length:0){this.mirror=t,this.from=i,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new ir(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,i=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],r!=null&&r<t?i+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),r!=null&&r>t?i-r-1:void 0)}}invert(){let e=new ir;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this._maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let r=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}r|=a.delInfo,e=a.pos}return i?e:new $a(e,r,null)}}const _o=Object.create(null);class ze{getMap(){return Qe.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=_o[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in _o)throw new RangeError("Duplicate use of step JSON ID "+e);return _o[e]=t,t.prototype.jsonID=e,t}}class Ce{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Ce(e,null)}static fail(e){return new Ce(null,e)}static fromReplace(e,t,i,r){try{return Ce.ok(e.replace(t,i,r))}catch(s){if(s instanceof ss)return Ce.fail(s.message);throw s}}}function ql(n,e,t){let i=[];for(let r=0;r<n.childCount;r++){let s=n.child(r);s.content.size&&(s=s.copy(ql(s.content,e,s))),s.isInline&&(s=e(s,t,r)),i.push(s)}return I.fromArray(i)}class en extends ze{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new j(ql(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),r),t.openStart,t.openEnd);return Ce.fromReplace(e,this.from,this.to,s)}invert(){return new kt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new en(t.pos,i.pos,this.mark)}merge(e){return e instanceof en&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new en(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new en(t.from,t.to,e.markFromJSON(t.mark))}}ze.jsonID("addMark",en);class kt extends ze{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new j(ql(t.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),t.openStart,t.openEnd);return Ce.fromReplace(e,this.from,this.to,i)}invert(){return new en(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new kt(t.pos,i.pos,this.mark)}merge(e){return e instanceof kt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new kt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new kt(t.from,t.to,e.markFromJSON(t.mark))}}ze.jsonID("removeMark",kt);class tn extends ze{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ce.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Ce.fromReplace(e,this.pos,this.pos+1,new j(I.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(i))return new tn(this.pos,t.marks[r]);return new tn(this.pos,this.mark)}}return new Dn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new tn(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new tn(t.pos,e.markFromJSON(t.mark))}}ze.jsonID("addNodeMark",tn);class Dn extends ze{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ce.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Ce.fromReplace(e,this.pos,this.pos+1,new j(I.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new tn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Dn(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Dn(t.pos,e.markFromJSON(t.mark))}}ze.jsonID("removeNodeMark",Dn);class Me extends ze{constructor(e,t,i,r=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=r}apply(e){return this.structure&&Ua(e,this.from,this.to)?Ce.fail("Structure replace would overwrite content"):Ce.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Qe([this.from,this.to-this.from,this.slice.size])}invert(e){return new Me(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new Me(t.pos,Math.max(t.pos,i.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Me)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?j.empty:new j(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Me(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?j.empty:new j(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Me(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Me(t.from,t.to,j.fromJSON(e,t.slice),!!t.structure)}}ze.jsonID("replace",Me);class Le extends ze{constructor(e,t,i,r,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Ua(e,this.from,this.gapFrom)||Ua(e,this.gapTo,this.to)))return Ce.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ce.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?Ce.fromReplace(e,this.from,this.to,i):Ce.fail("Content does not fit in gap")}getMap(){return new Qe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Le(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||r<t.pos||s>i.pos?null:new Le(t.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Le(t.from,t.to,t.gapFrom,t.gapTo,j.fromJSON(e,t.slice),t.insert,!!t.structure)}}ze.jsonID("replaceAround",Le);function Ua(n,e,t){let i=n.resolve(e),r=t-e,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let o=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}}return!1}function dw(n,e,t,i){let r=[],s=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!i.isInSet(f)&&u.type.allowsMarkType(i.type)){let h=Math.max(c,e),d=Math.min(c+l.nodeSize,t),p=i.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(o&&o.to==h&&o.mark.eq(f[m])?o.to=d:r.push(o=new kt(h,d,f[m])));a&&a.to==h?a.to=d:s.push(a=new en(h,d,i))}}),r.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function pw(n,e,t,i){let r=[],s=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(i instanceof Qs){let c=o.marks,u;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let f=l[u],h;for(let d=0;d<r.length;d++){let p=r[d];p.step==s-1&&f.eq(r[d].style)&&(h=p)}h?(h.to=c,h.step=s):r.push({style:f,from:Math.max(a,e),to:c,step:s})}}}),r.forEach(o=>n.step(new kt(o.from,o.to,o.style)))}function Jl(n,e,t,i=t.contentMatch,r=!0){let s=n.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,f=i.matchType(c.type);if(!f)o.push(new Me(a,u,j.empty));else{i=f;for(let h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||n.step(new kt(a,u,c.marks[h]));if(r&&c.isText&&t.whitespace!="pre"){let h,d=/\r?\n|\r/g,p;for(;h=d.exec(c.text);)p||(p=new j(I.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new Me(a+h.index,a+h.index+h[0].length,p))}}a=u}if(!i.validEnd){let l=i.fillBefore(I.empty,!0);n.replace(a,a,new j(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function mw(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function mr(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let r=n.$from.node(i),s=n.$from.index(i),o=n.$to.indexAfter(i);if(i<n.depth&&r.canReplace(s,o,t))return i;if(i==0||r.type.spec.isolating||!mw(r,s,o))break}return null}function gw(n,e,t){let{$from:i,$to:r,depth:s}=e,o=i.before(s+1),a=r.after(s+1),l=o,c=a,u=I.empty,f=0;for(let p=s,m=!1;p>t;p--)m||i.index(p)>0?(m=!0,u=I.from(i.node(p).copy(u)),f++):l--;let h=I.empty,d=0;for(let p=s,m=!1;p>t;p--)m||r.after(p+1)<r.end(p)?(m=!0,h=I.from(r.node(p).copy(h)),d++):c++;n.step(new Le(l,c,o,a,new j(u.append(h),f,d),u.size-f,!0))}function pm(n,e,t=null,i=n){let r=yw(n,e),s=r&&bw(i,e);return s?r.map(Hf).concat({type:e,attrs:t}).concat(s.map(Hf)):null}function Hf(n){return{type:n,attrs:null}}function yw(n,e){let{parent:t,startIndex:i,endIndex:r}=n,s=t.contentMatchAt(i).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(i,r,o)?s:null}function bw(n,e){let{parent:t,startIndex:i,endIndex:r}=n,s=t.child(i),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=i;l&&c<r;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function xw(n,e,t){let i=I.empty;for(let o=t.length-1;o>=0;o--){if(i.size){let a=t[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=I.from(t[o].type.create(t[o].attrs,i))}let r=e.start,s=e.end;n.step(new Le(r,s,r,s,new j(i,0,0),t.length,!0))}function vw(n,e,t,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{let l=typeof r=="function"?r(o):r;if(o.isTextblock&&!o.hasMarkup(i,l)&&Sw(n.doc,n.mapping.slice(s).map(a),i)){let c=null;if(i.schema.linebreakReplacement){let d=i.whitespace=="pre",p=!!i.contentMatch.matchType(i.schema.linebreakReplacement);d&&!p?c=!1:!d&&p&&(c=!0)}c===!1&&gm(n,o,a,s),Jl(n,n.mapping.slice(s).map(a,1),i,void 0,c===null);let u=n.mapping.slice(s),f=u.map(a,1),h=u.map(a+o.nodeSize,1);return n.step(new Le(f,h,f+1,h-1,new j(I.from(i.create(l,null,o.marks)),0,0),1,!0)),c===!0&&mm(n,o,a,s),!1}})}function mm(n,e,t,i){e.forEach((r,s)=>{if(r.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(r.text);){let l=n.mapping.slice(i).map(t+1+s+o.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function gm(n,e,t,i){e.forEach((r,s)=>{if(r.type==r.type.schema.linebreakReplacement){let o=n.mapping.slice(i).map(t+1+s);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Sw(n,e,t){let i=n.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,t)}function ww(n,e,t,i,r){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(i,null,r||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Le(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new j(I.from(o),0,0),1,!0))}function Ii(n,e,t=1,i){let r=n.resolve(e),s=r.depth-t,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,u=t-2;c>s;c--,u--){let f=r.node(c),h=r.index(c);if(f.type.spec.isolating)return!1;let d=f.content.cutByIndex(h,f.childCount),p=i&&i[u+1];p&&(d=d.replaceChild(0,p.type.create(p.attrs)));let m=i&&i[u]||f;if(!f.canReplace(h+1,f.childCount)||!m.type.validContent(d))return!1}let a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function Tw(n,e,t=1,i){let r=n.doc.resolve(e),s=I.empty,o=I.empty;for(let a=r.depth,l=r.depth-t,c=t-1;a>l;a--,c--){s=I.from(r.node(a).copy(s));let u=i&&i[c];o=I.from(u?u.type.create(u.attrs,o):r.node(a).copy(o))}n.step(new Me(e,e,new j(s.append(o),t,t),!0))}function gr(n,e){let t=n.resolve(e),i=t.index();return ym(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function Cw(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:i}=n.type.schema;for(let r=0;r<e.childCount;r++){let s=e.child(r),o=s.type==i?n.type.schema.nodes.text:s.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function ym(n,e){return!!(n&&e&&!n.isLeaf&&Cw(n,e))}function bm(n,e,t=-1){let i=n.resolve(e);for(let r=i.depth;;r--){let s,o,a=i.index(r);if(r==i.depth?(s=i.nodeBefore,o=i.nodeAfter):t>0?(s=i.node(r+1),a++,o=i.node(r).maybeChild(a)):(s=i.node(r).maybeChild(a-1),o=i.node(r+1)),s&&!s.isTextblock&&ym(s,o)&&i.node(r).canReplace(a,a+1))return e;if(r==0)break;e=t<0?i.before(r):i.after(r)}}function kw(n,e,t){let i=null,{linebreakReplacement:r}=n.doc.type.schema,s=n.doc.resolve(e-t),o=s.node().type;if(r&&o.inlineContent){let u=o.whitespace=="pre",f=!!o.contentMatch.matchType(r);u&&!f?i=!1:!u&&f&&(i=!0)}let a=n.steps.length;if(i===!1){let u=n.doc.resolve(e+t);gm(n,u.node(),u.before(),a)}o.inlineContent&&Jl(n,e+t-1,o,s.node().contentMatchAt(s.index()),i==null);let l=n.mapping.slice(a),c=l.map(e-t);if(n.step(new Me(c,l.map(e+t,-1),j.empty,!0)),i===!0){let u=n.doc.resolve(c);mm(n,u.node(),u.before(),n.steps.length)}return n}function Ew(n,e,t){let i=n.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,t))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,t))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}function xm(n,e,t){let i=n.resolve(e);if(!t.content.size)return e;let r=t.content;for(let s=0;s<t.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),u=!1;if(s==1)u=c.canReplace(l,l,r);else{let f=c.contentMatchAt(l).findWrapping(r.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function Zs(n,e,t=e,i=j.empty){if(e==t&&!i.size)return null;let r=n.resolve(e),s=n.resolve(t);return vm(r,s,i)?new Me(e,t,i):new Ow(r,s,i).fit()}function vm(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Ow{constructor(e,t,i){this.$from=e,this.$to=t,this.unplaced=i,this.frontier=[],this.placed=I.empty;for(let r=0;r<=e.depth;r++){let s=e.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=I.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(e<0?this.$to:i.doc.resolve(e));if(!r)return null;let s=this.placed,o=i.depth,a=r.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new j(s,o,a);return e>-1?new Le(i.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||i.pos!=this.$to.pos?new Me(i.pos,r.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<e;i++){let s=t.firstChild;if(t.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){e=i;break}t=s.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=$o(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(t==1&&(o?c.matchType(o.type)||(f=c.fillBefore(I.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:a,parent:s,inject:f};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,r=$o(e,t);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new j(e,t+1,Math.max(i,r.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,r=$o(e,t);if(r.childCount<=1&&t>0){let s=e.size-t<=t+r.size;this.unplaced=new j(wi(e,t-1,1),t-1,s?t-1:i)}else this.unplaced=new j(wi(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:r,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-e,c=0,u=[],{match:f,type:h}=this.frontier[t];if(r){for(let m=0;m<r.childCount;m++)u.push(r.child(m));f=f.matchFragment(r)}let d=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),b=f.matchType(m.type);if(!b)break;c++,(c>1||l==0||m.content.size)&&(f=b,u.push(Sm(m.mark(h.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?d:-1)))}let p=c==a.childCount;p||(d=-1),this.placed=Ti(this.placed,t,I.from(u)),this.frontier[t].match=f,p&&d<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,b=a;m<d;m++){let v=b.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),b=v.content}this.unplaced=p?e==0?j.empty:new j(wi(o.content,e-1,1),e-1,d<0?o.openEnd:e-1):new j(wi(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Uo(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:r}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Uo(e,t,r,i,s);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Uo(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ti(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let r=e.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,e.index(i));this.openFrontierNode(r.type,r.attrs,s)}return e}openFrontierNode(e,t=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Ti(this.placed,this.depth,I.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(I.empty,!0);t.childCount&&(this.placed=Ti(this.placed,this.frontier.length,t))}}function wi(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(wi(n.firstChild.content,e-1,t)))}function Ti(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Ti(n.lastChild.content,e-1,t)))}function $o(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Sm(n,e,t){if(e<=0)return n;let i=n.content;return e>1&&(i=i.replaceChild(0,Sm(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=n.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(I.empty,!0)))),n.copy(i)}function Uo(n,e,t,i,r){let s=n.node(e),o=r?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,o);return a&&!Rw(t,s.content,o)?a:null}function Rw(n,e,t){for(let i=t;i<e.childCount;i++)if(!n.allowsMarks(e.child(i).marks))return!0;return!1}function Aw(n){return n.spec.defining||n.spec.definingForContent}function Pw(n,e,t,i){if(!i.size)return n.deleteRange(e,t);let r=n.doc.resolve(e),s=n.doc.resolve(t);if(vm(r,s,i))return n.step(new Me(e,t,i));let o=Tm(r,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let h=r.depth,d=r.pos-1;h>0;h--,d--){let p=r.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(h)>-1?a=h:r.before(h)==d&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=i.openStart;for(let h=i.content,d=0;;d++){let p=h.firstChild;if(c.push(p),d==i.openStart)break;h=p.content}for(let h=u-1;h>=0;h--){let d=c[h],p=Aw(d.type);if(p&&!d.sameMarkup(r.node(Math.abs(a)-1)))u=h;else if(p||!d.type.isTextblock)break}for(let h=i.openStart;h>=0;h--){let d=(h+u+1)%(i.openStart+1),p=c[d];if(p)for(let m=0;m<o.length;m++){let b=o[(m+l)%o.length],v=!0;b<0&&(v=!1,b=-b);let C=r.node(b-1),k=r.index(b-1);if(C.canReplaceWith(k,k,p.type,p.marks))return n.replace(r.before(b),v?s.after(b):t,new j(wm(i.content,0,i.openStart,d),d,i.openEnd))}}let f=n.steps.length;for(let h=o.length-1;h>=0&&(n.replace(e,t,i),!(n.steps.length>f));h--){let d=o[h];d<0||(e=r.before(d),t=s.after(d))}}function wm(n,e,t,i,r){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(wm(s.content,e+1,t,i,s)))}if(e>i){let s=r.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(I.empty,!0))}return n}function Mw(n,e,t,i){if(!i.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let r=Ew(n.doc,e,i.type);r!=null&&(e=t=r)}n.replaceRange(e,t,new j(I.from(i),0,0))}function Dw(n,e,t){let i=n.doc.resolve(e),r=n.doc.resolve(t),s=Tm(i,r);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return n.delete(i.start(a),r.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),r.indexAfter(a-1))))return n.delete(i.before(a),r.after(a))}for(let o=1;o<=i.depth&&o<=r.depth;o++)if(e-i.start(o)==i.depth-o&&t>i.end(o)&&r.end(o)-t!=r.depth-o&&i.start(o-1)==r.start(o-1)&&i.node(o-1).canReplace(i.index(o-1),r.index(o-1)))return n.delete(i.before(o),t);n.delete(e,t)}function Tm(n,e){let t=[],i=Math.min(n.depth,e.depth);for(let r=i;r>=0;r--){let s=n.start(r);if(s<n.pos-(n.depth-r)||e.end(r)>e.pos+(e.depth-r)||n.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(s==e.start(r)||r==n.depth&&r==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==s-1)&&t.push(r)}return t}class ei extends ze{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ce.fail("No node at attribute step's position");let i=Object.create(null);for(let s in t.attrs)i[s]=t.attrs[s];i[this.attr]=this.value;let r=t.type.create(i,null,t.marks);return Ce.fromReplace(e,this.pos,this.pos+1,new j(I.from(r),0,t.isLeaf?0:1))}getMap(){return Qe.empty}invert(e){return new ei(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ei(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ei(t.pos,t.attr,t.value)}}ze.jsonID("attr",ei);class rr extends ze{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let i=e.type.create(t,e.content,e.marks);return Ce.ok(i)}getMap(){return Qe.empty}invert(e){return new rr(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new rr(t.attr,t.value)}}ze.jsonID("docAttr",rr);let si=class extends Error{};si=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};si.prototype=Object.create(Error.prototype);si.prototype.constructor=si;si.prototype.name="TransformError";class Nw{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ir}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new si(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=j.empty){let r=Zs(this.doc,e,t,i);return r&&this.step(r),this}replaceWith(e,t,i){return this.replace(e,t,new j(I.from(i),0,0))}delete(e,t){return this.replace(e,t,j.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return Pw(this,e,t,i),this}replaceRangeWith(e,t,i){return Mw(this,e,t,i),this}deleteRange(e,t){return Dw(this,e,t),this}lift(e,t){return gw(this,e,t),this}join(e,t=1){return kw(this,e,t),this}wrap(e,t){return xw(this,e,t),this}setBlockType(e,t=e,i,r=null){return vw(this,e,t,i,r),this}setNodeMarkup(e,t,i=null,r){return ww(this,e,t,i,r),this}setNodeAttribute(e,t,i){return this.step(new ei(e,t,i)),this}setDocAttribute(e,t){return this.step(new rr(e,t)),this}addNodeMark(e,t){return this.step(new tn(e,t)),this}removeNodeMark(e,t){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t instanceof re)t.isInSet(i.marks)&&this.step(new Dn(e,t));else{let r=i.marks,s,o=[];for(;s=t.isInSet(r);)o.push(new Dn(e,s)),r=s.removeFromSet(r);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,t=1,i){return Tw(this,e,t,i),this}addMark(e,t,i){return dw(this,e,t,i),this}removeMark(e,t,i){return pw(this,e,t,i),this}clearIncompatible(e,t,i){return Jl(this,e,t,i),this}}const Wo=Object.create(null);class te{constructor(e,t,i){this.$anchor=e,this.$head=t,this.ranges=i||[new Lw(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=j.empty){let i=t.content.lastChild,r=null;for(let a=0;a<t.openEnd;a++)r=i,i=i.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?j.empty:t),a==0&&Jf(e,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:o,$to:a}=r[s],l=e.mapping.slice(i),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),Jf(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let r=e.parent.inlineContent?new ie(e):Hn(e.node(0),e.parent,e.pos,e.index(),t,i);if(r)return r;for(let s=e.depth-1;s>=0;s--){let o=t<0?Hn(e.node(0),e.node(s),e.before(s+1),e.index(s),t,i):Hn(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,i);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new lt(e.node(0))}static atStart(e){return Hn(e,e,0,0,1)||new lt(e)}static atEnd(e){return Hn(e,e,e.content.size,e.childCount,-1)||new lt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Wo[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Wo)throw new RangeError("Duplicate use of selection JSON ID "+e);return Wo[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ie.between(this.$anchor,this.$head).getBookmark()}}te.prototype.visible=!0;class Lw{constructor(e,t){this.$from=e,this.$to=t}}let Kf=!1;function qf(n){!Kf&&!n.parent.inlineContent&&(Kf=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ie extends te{constructor(e,t=e){qf(e),qf(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return te.near(i);let r=e.resolve(t.map(this.anchor));return new ie(r.parent.inlineContent?r:i,i)}replace(e,t=j.empty){if(super.replace(e,t),t==j.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof ie&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new eo(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ie(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let r=e.resolve(t);return new this(r,i==t?r:e.resolve(i))}static between(e,t,i){let r=e.pos-t.pos;if((!i||r)&&(i=r>=0?1:-1),!t.parent.inlineContent){let s=te.findFrom(t,i,!0)||te.findFrom(t,-i,!0);if(s)t=s.$head;else return te.near(t,i)}return e.parent.inlineContent||(r==0?e=t:(e=(te.findFrom(e,-i,!0)||te.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=r<0&&(e=t))),new ie(e,t)}}te.jsonID("text",ie);class eo{constructor(e,t){this.anchor=e,this.head=t}map(e){return new eo(e.map(this.anchor),e.map(this.head))}resolve(e){return ie.between(e.resolve(this.anchor),e.resolve(this.head))}}class K extends te{constructor(e){let t=e.nodeAfter,i=e.node(0).resolve(e.pos+t.nodeSize);super(e,i),this.node=t}map(e,t){let{deleted:i,pos:r}=t.mapResult(this.anchor),s=e.resolve(r);return i?te.near(s):new K(s)}content(){return new j(I.from(this.node),0,0)}eq(e){return e instanceof K&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Gl(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new K(e.resolve(t.anchor))}static create(e,t){return new K(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}K.prototype.visible=!1;te.jsonID("node",K);class Gl{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:i}=e.mapResult(this.anchor);return t?new eo(i,i):new Gl(i)}resolve(e){let t=e.resolve(this.anchor),i=t.nodeAfter;return i&&K.isSelectable(i)?new K(t):te.near(t)}}class lt extends te{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=j.empty){if(t==j.empty){e.delete(0,e.doc.content.size);let i=te.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new lt(e)}map(e){return new lt(e)}eq(e){return e instanceof lt}getBookmark(){return Iw}}te.jsonID("all",lt);const Iw={map(){return this},resolve(n){return new lt(n)}};function Hn(n,e,t,i,r,s=!1){if(e.inlineContent)return ie.create(n,t);for(let o=i-(r>0?0:1);r>0?o<e.childCount:o>=0;o+=r){let a=e.child(o);if(a.isAtom){if(!s&&K.isSelectable(a))return K.create(n,t-(r<0?a.nodeSize:0))}else{let l=Hn(n,a,t+r,r<0?a.childCount:0,r,s);if(l)return l}t+=a.nodeSize*r}return null}function Jf(n,e,t){let i=n.steps.length-1;if(i<e)return;let r=n.steps[i];if(!(r instanceof Me||r instanceof Le))return;let s=n.mapping.maps[i],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(te.near(n.doc.resolve(o),t))}const Gf=1,Mr=2,Xf=4;class Vw extends Nw{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Gf)&~Mr,this.storedMarks=null,this}get selectionSet(){return(this.updated&Gf)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Mr,this}ensureMarks(e){return re.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Mr)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Mr,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let i=this.selection;return t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||re.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,i){let r=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(i==null&&(i=t),i=i??t,!e)return this.deleteRange(t,i);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=i==t?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,r.text(e,s)),this.selection.empty||this.setSelection(te.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Xf,this}get scrolledIntoView(){return(this.updated&Xf)>0}}function Yf(n,e){return!e||!n?n:n.bind(e)}class Ci{constructor(e,t,i){this.name=e,this.init=Yf(t.init,i),this.apply=Yf(t.apply,i)}}const Fw=[new Ci("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Ci("selection",{init(n,e){return n.selection||te.atStart(e.doc)},apply(n){return n.selection}}),new Ci("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,i){return i.selection.$cursor?n.storedMarks:null}}),new Ci("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Ho{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Fw.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new Ci(i.key,i.spec.state,i))})}}class ki{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),r=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=r?r[o].n:0,c=r?r[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,i);if(u&&i.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!r){r=[];for(let f=0;f<this.config.plugins.length;f++)r.push(f<o?{state:i,n:t.length}:{state:this,n:0})}t.push(u),i=i.applyInner(u),s=!0}r&&(r[o]={state:i,n:t.length})}}if(!s)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new ki(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new Vw(this)}static create(e){let t=new Ho(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new ki(t);for(let r=0;r<t.fields.length;r++)i[t.fields[r].name]=t.fields[r].init(e,i);return i}reconfigure(e){let t=new Ho(this.schema,e.plugins),i=t.fields,r=new ki(t);for(let s=0;s<i.length;s++){let o=i[s].name;r[o]=this.hasOwnProperty(o)?this[o]:i[s].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[i],s=r.spec.state;s&&s.toJSON&&(t[i]=s.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Ho(e.schema,e.plugins),s=new ki(r);return r.fields.forEach(o=>{if(o.name=="doc")s.doc=Pt.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=te.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=c.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Cm(n,e,t){for(let i in n){let r=n[i];r instanceof Function?r=r.bind(e):i=="handleDOMEvents"&&(r=Cm(r,e,{})),t[i]=r}return t}class to{constructor(e){this.spec=e,this.props={},e.props&&Cm(e.props,this,this.props),this.key=e.key?e.key.key:km("plugin")}getState(e){return e[this.key]}}const Ko=Object.create(null);function km(n){return n in Ko?n+"$"+ ++Ko[n]:(Ko[n]=0,n+"$")}class Em{constructor(e="key"){this.key=km(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const De=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},oi=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Wa=null;const zt=function(n,e,t){let i=Wa||(Wa=document.createRange());return i.setEnd(n,t??n.nodeValue.length),i.setStart(n,e||0),i},Bw=function(){Wa=null},Nn=function(n,e,t,i){return t&&(Qf(n,e,t,i,-1)||Qf(n,e,t,i,1))},zw=/^(img|br|input|textarea|hr)$/i;function Qf(n,e,t,i,r){for(var s;;){if(n==t&&e==i)return!0;if(e==(r<0?0:st(n))){let o=n.parentNode;if(!o||o.nodeType!=1||yr(n)||zw.test(n.nodeName)||n.contentEditable=="false")return!1;e=De(n)+(r<0?0:1),n=o}else if(n.nodeType==1){let o=n.childNodes[e+(r<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=r;else return!1;else n=o,e=r<0?st(n):0}else return!1}}function st(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function jw(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=st(n)}else if(n.parentNode&&!yr(n))e=De(n),n=n.parentNode;else return null}}function _w(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!yr(n))e=De(n)+1,n=n.parentNode;else return null}}function $w(n,e,t){for(let i=e==0,r=e==st(n);i||r;){if(n==t)return!0;let s=De(n);if(n=n.parentNode,!n)return!1;i=i&&s==0,r=r&&s==st(n)}}function yr(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const no=function(n){return n.focusNode&&Nn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function yn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Uw(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ww(n,e,t){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(e,t);if(i)return{node:i.offsetNode,offset:Math.min(st(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(e,t);if(i)return{node:i.startContainer,offset:Math.min(st(i.startContainer),i.startOffset)}}}const Mt=typeof navigator<"u"?navigator:null,Zf=typeof document<"u"?document:null,pn=Mt&&Mt.userAgent||"",Ha=/Edge\/(\d+)/.exec(pn),Om=/MSIE \d/.exec(pn),Ka=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pn),Xe=!!(Om||Ka||Ha),sn=Om?document.documentMode:Ka?+Ka[1]:Ha?+Ha[1]:0,mt=!Xe&&/gecko\/(\d+)/i.test(pn);mt&&+(/Firefox\/(\d+)/.exec(pn)||[0,0])[1];const qa=!Xe&&/Chrome\/(\d+)/.exec(pn),Be=!!qa,Rm=qa?+qa[1]:0,_e=!Xe&&!!Mt&&/Apple Computer/.test(Mt.vendor),ai=_e&&(/Mobile\/\w+/.test(pn)||!!Mt&&Mt.maxTouchPoints>2),rt=ai||(Mt?/Mac/.test(Mt.platform):!1),Hw=Mt?/Win/.test(Mt.platform):!1,jt=/Android \d/.test(pn),br=!!Zf&&"webkitFontSmoothing"in Zf.documentElement.style,Kw=br?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function qw(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function It(n,e){return typeof n=="number"?n:n[e]}function Jw(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,i=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*i}}function eh(n,e,t){let i=n.someProp("scrollThreshold")||0,r=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;){if(o.nodeType!=1){o=oi(o);continue}let a=o,l=a==s.body,c=l?qw(s):Jw(a),u=0,f=0;if(e.top<c.top+It(i,"top")?f=-(c.top-e.top+It(r,"top")):e.bottom>c.bottom-It(i,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+It(r,"top")-c.top:e.bottom-c.bottom+It(r,"bottom")),e.left<c.left+It(i,"left")?u=-(c.left-e.left+It(r,"left")):e.right>c.right-It(i,"right")&&(u=e.right-c.right+It(r,"right")),u||f)if(l)s.defaultView.scrollBy(u,f);else{let d=a.scrollLeft,p=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let m=a.scrollLeft-d,b=a.scrollTop-p;e={left:e.left-m,top:e.top-b,right:e.right-m,bottom:e.bottom-b}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:oi(o)}}function Gw(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),i,r;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){i=a,r=l.top;break}}return{refDOM:i,refTop:r,stack:Am(n.dom)}}function Am(n){let e=[],t=n.ownerDocument;for(let i=n;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=t);i=oi(i));return e}function Xw({refDOM:n,refTop:e,stack:t}){let i=n?n.getBoundingClientRect().top:0;Pm(t,i==0?0:i-e)}function Pm(n,e){for(let t=0;t<n.length;t++){let{dom:i,top:r,left:s}=n[t];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}let Un=null;function Yw(n){if(n.setActive)return n.setActive();if(Un)return n.focus(Un);let e=Am(n);n.focus(Un==null?{get preventScroll(){return Un={preventScroll:!0},!0}}:void 0),Un||(Un=!1,Pm(e,0))}function Mm(n,e){let t,i=2e8,r,s=0,o=e.top,a=e.top,l,c;for(let u=n.firstChild,f=0;u;u=u.nextSibling,f++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=zt(u).getClientRects();else continue;for(let d=0;d<h.length;d++){let p=h[d];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<i){t=u,i=m,r=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=f+1)}}return!t&&l&&(t=l,r=c,i=0),t&&t.nodeType==3?Qw(t,r):!t||i&&t.nodeType==1?{node:n,offset:s}:Mm(t,r)}function Qw(n,e){let t=n.nodeValue.length,i=document.createRange();for(let r=0;r<t;r++){i.setEnd(n,r+1),i.setStart(n,r);let s=Jt(i,1);if(s.top!=s.bottom&&Xl(e,s))return{node:n,offset:r+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Xl(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Zw(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function eT(n,e,t){let{node:i,offset:r}=Mm(e,t),s=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(i,r,s)}function tT(n,e,t,i){let r=-1;for(let s=e,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>i.left||l.top>i.top?r=a.posBefore:(!o&&l.right<i.left||l.bottom<i.top)&&(r=a.posAfter),o=!0),!a.contentDOM&&r<0&&!a.node.isText))return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return r>-1?r:n.docView.posFromDOM(e,t,-1)}function Dm(n,e,t){let i=n.childNodes.length;if(i&&t.top<t.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-t.top)/(t.bottom-t.top))-2)),s=r;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Xl(e,c))return Dm(o,e,c)}}if((s=(s+1)%i)==r)break}return n}function nT(n,e){let t=n.dom.ownerDocument,i,r=0,s=Ww(t,e.left,e.top);s&&({node:i,offset:r}=s);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!Xl(e,c)||(o=Dm(n.dom,e,c),!o))return null}if(_e)for(let c=o;i&&c;c=oi(c))c.draggable&&(i=void 0);if(o=Zw(o,e),i){if(mt&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let u=i.childNodes[r],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&r++}let c;br&&r&&i.nodeType==1&&(c=i.childNodes[r-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&r--,i==n.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(a=tT(n,i,r,e))}a==null&&(a=eT(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function th(n){return n.top<n.bottom||n.left<n.right}function Jt(n,e){let t=n.getClientRects();if(t.length){let i=t[e<0?0:t.length-1];if(th(i))return i}return Array.prototype.find.call(t,th)||n.getBoundingClientRect()}const iT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Nm(n,e,t){let{node:i,offset:r,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=br||mt;if(i.nodeType==3)if(o&&(iT.test(i.nodeValue)||(t<0?!r:r==i.nodeValue.length))){let l=Jt(zt(i,r,r),t);if(mt&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let c=Jt(zt(i,r-1,r-1),-1);if(c.top==l.top){let u=Jt(zt(i,r,r+1),-1);if(u.top!=l.top)return xi(u,u.left<c.left)}}return l}else{let l=r,c=r,u=t<0?1:-1;return t<0&&!r?(c++,u=-1):t>=0&&r==i.nodeValue.length?(l--,u=1):t<0?l--:c++,xi(Jt(zt(i,l,c),u),u<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&r&&(t<0||r==st(i))){let l=i.childNodes[r-1];if(l.nodeType==1)return qo(l.getBoundingClientRect(),!1)}if(s==null&&r<st(i)){let l=i.childNodes[r];if(l.nodeType==1)return qo(l.getBoundingClientRect(),!0)}return qo(i.getBoundingClientRect(),t>=0)}if(s==null&&r&&(t<0||r==st(i))){let l=i.childNodes[r-1],c=l.nodeType==3?zt(l,st(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return xi(Jt(c,1),!1)}if(s==null&&r<st(i)){let l=i.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?zt(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return xi(Jt(c,-1),!0)}return xi(Jt(i.nodeType==3?zt(i):i,-t),t>=0)}function xi(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function qo(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Lm(n,e,t){let i=n.state,r=n.root.activeElement;i!=e&&n.updateState(e),r!=n.dom&&n.focus();try{return t()}finally{i!=e&&n.updateState(i),r!=n.dom&&r&&r.focus()}}function rT(n,e,t){let i=e.selection,r=t=="up"?i.$from:i.$to;return Lm(n,e,()=>{let{node:s}=n.docView.domFromPos(r.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Nm(n,r.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=zt(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const sT=/[\u0590-\u08ac]/;function oT(n,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=n.domSelection();return a?!sT.test(i.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:Lm(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=n.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",t,"character");let d=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),b=p&&!d.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),b}):i.pos==i.start()||i.pos==i.end()}let nh=null,ih=null,rh=!1;function aT(n,e,t){return nh==e&&ih==t?rh:(nh=e,ih=t,rh=t=="up"||t=="down"?rT(n,e,t):oT(n,e,t))}const ct=0,sh=1,vn=2,Dt=3;class xr{constructor(e,t,i,r){this.parent=e,this.children=t,this.dom=i,this.contentDOM=r,this.dirty=ct,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,i=this.posAtStart;;t++){let r=this.children[t];if(r==e)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=t>De(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let i=!0,r=e;r;r=r.parentNode){let s=this.getDesc(r),o;if(s&&(!t||s.node))if(i&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))i=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let i=t;i;i=i.parent)if(i==this)return t}posFromDOM(e,t,i){for(let r=e;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(e,t,i)}return-1}descAt(e){for(let t=0,i=0;t<this.children.length;t++){let r=this.children[t],s=i+r.size;if(i==e&&s!=i){for(;!r.border&&r.children.length;)for(let o=0;o<r.children.length;o++){let a=r.children[o];if(a.size){r=a;break}}return r}if(e<s)return r.descAt(e-i-r.border);i=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.size;if(a>e||o instanceof Vm){r=e-s;break}s=a}if(r)return this.children[i].domFromPos(r-this.children[i].border,t);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof Im&&s.side>=0;i--);if(t<=0){let s,o=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?De(s.dom)+1:0}}else{let s,o=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?De(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let o=i,a=0;;a++){let l=this.children[a],c=o+l.size;if(r==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let f=a;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=De(h.dom)+1;break}e-=h.size}r==-1&&(r=0)}if(r>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=De(f.dom);break}t+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:i}=this.domFromPos(e,0);if(t.nodeType!=1||i==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[i]}setSelection(e,t,i,r=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let d=0,p=0;d<this.children.length;d++){let m=this.children[d],b=p+m.size;if(s>p&&o<b)return m.setSelection(e-p-m.border,t-p-m.border,i,r);p=b}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=i.root.getSelection(),u=i.domSelectionRange(),f=!1;if((mt||_e)&&e==t){let{node:d,offset:p}=a;if(d.nodeType==3){if(f=!!(p&&d.nodeValue[p-1]==`
`),f&&p==d.nodeValue.length)for(let m=d,b;m;m=m.parentNode){if(b=m.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:De(b)+1});break}let v=m.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let m=d.childNodes[p-1];f=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(mt&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let d=u.focusNode.childNodes[u.focusOffset];d&&d.contentEditable=="false"&&(r=!0)}if(!(r||f&&_e)&&Nn(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Nn(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==t)&&!f){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>t){let p=a;a=l,l=p}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],o=i+s.size;if(i==o?e<=o&&t>=i:e<o&&t>i){let a=i+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==i||t==o?vn:sh,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Dt:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?vn:Dt}i=o}this.dirty=vn}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let i=e==1?vn:sh;t.dirty<i&&(t.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Im extends xr{constructor(e,t,i,r){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==ct&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class lT extends xr{constructor(e,t,i,r){super(e,[],t,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ln extends xr{constructor(e,t,i,r,s){super(e,[],i,r),this.mark=t,this.spec=s}static create(e,t,i,r){let s=r.nodeViews[t.type.name],o=s&&s(t,r,i);return(!o||!o.dom)&&(o=hi.renderSpec(document,t.type.spec.toDOM(t,i),null,t.attrs)),new Ln(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Dt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Dt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=ct){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=ct}}slice(e,t,i){let r=Ln.create(this.parent,this.mark,!0,i),s=this.children,o=this.size;t<o&&(s=Ga(s,t,o,i)),e>0&&(s=Ga(s,0,e,i));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class on extends xr{constructor(e,t,i,r,s,o,a,l,c){super(e,[],s,o),this.node=t,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=a}static create(e,t,i,r,s,o){let a=s.nodeViews[t.type.name],l,c=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},i,r),u=c&&c.dom,f=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=hi.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let h=u;return u=zm(u,i,t),c?l=new cT(e,t,i,r,u,f||null,h,c,s,o+1):t.isText?new io(e,t,i,r,u,h,s):new on(e,t,i,r,u,f||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let i=this.children[t];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>I.empty)}return e}matchesNode(e,t,i){return this.dirty==ct&&e.eq(this.node)&&us(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,r=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new fT(this,o&&o.node,e);pT(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,e):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?re.none:this.node.child(u).marks,i,e),l.placeWidget(c,e,r)},(c,u,f,h)=>{l.syncToMarks(c.marks,i,e);let d;l.findNodeMatch(c,u,f,h)||a&&e.state.selection.from>r&&e.state.selection.to<r+c.nodeSize&&(d=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,f,d,e)||l.updateNextNode(c,u,f,e,h,r)||l.addNode(c,u,f,e,r),r+=c.nodeSize}),l.syncToMarks([],i,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==vn)&&(o&&this.protectLocalComposition(e,o),Fm(this.contentDOM,this.children,e),ai&&mT(this.dom))}localCompositionInfo(e,t){let{from:i,to:r}=e.state.selection;if(!(e.state.selection instanceof ie)||i<t||r>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=gT(this.node.content,o,i-t,r-t);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:r}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new lT(this,s,t,r);e.input.compositionNodes.push(o),this.children=Ga(this.children,i,i+r.length,e,o)}update(e,t,i,r){return this.dirty==Dt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,r),!0)}updateInner(e,t,i,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ct}updateOuterDeco(e){if(us(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=Bm(this.dom,this.nodeDOM,Ja(this.outerDeco,this.node,t),Ja(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function oh(n,e,t,i,r){zm(i,e,n);let s=new on(void 0,n,e,t,i,i,i,r,0);return s.contentDOM&&s.updateChildren(r,0),s}class io extends on{constructor(e,t,i,r,s,o,a){super(e,t,i,r,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,i,r){return this.dirty==Dt||this.dirty!=ct&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=ct||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=ct,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let r=this.node.cut(e,t),s=document.createTextNode(r.text);return new io(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Dt)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Vm extends xr{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ct&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cT extends on{constructor(e,t,i,r,s,o,a,l,c,u){super(e,t,i,r,s,o,a,c,u),this.spec=l}update(e,t,i,r){if(this.dirty==Dt)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,i);return s&&this.updateInner(e,t,i,r),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,i,r){this.spec.setSelection?this.spec.setSelection(e,t,i.root):super.setSelection(e,t,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Fm(n,e,t){let i=n.firstChild,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==n){for(;a!=i;)i=ah(i),r=!0;i=i.nextSibling}else r=!0,n.insertBefore(a,i);if(o instanceof Ln){let l=i?i.previousSibling:n.lastChild;Fm(o.contentDOM,o.children,t),i=l?l.nextSibling:n.firstChild}}for(;i;)i=ah(i),r=!0;r&&t.trackWrites==n&&(t.trackWrites=null)}const Vi=function(n){n&&(this.nodeName=n)};Vi.prototype=Object.create(null);const Sn=[new Vi];function Ja(n,e,t){if(n.length==0)return Sn;let i=t?Sn[0]:new Vi,r=[i];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&r.push(i=new Vi(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&r.length==1&&r.push(i=new Vi(e.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return r}function Bm(n,e,t,i){if(t==Sn&&i==Sn)return e;let r=e;for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&r!=n&&(l=r.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=Sn[0]),r=l}uT(r,a||Sn[0],o)}return r}function uT(n,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&n.removeAttribute(i);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&n.setAttribute(i,t[i]);if(e.class!=t.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.remove(i[s]);for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.add(r[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(e.style);)n.style.removeProperty(r[1])}t.style&&(n.style.cssText+=t.style)}}function zm(n,e,t){return Bm(n,n,Sn,Ja(e,t,n.nodeType!=1))}function us(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function ah(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class fT{constructor(e,t,i){this.lock=t,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hT(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let r=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;r<o&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=ct,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ln.create(this.top,e[s],t,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,i,r){let s=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,i))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,i)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,i,r,s){let o=this.top.children[r];return o.dirty==Dt&&o.dom==o.contentDOM&&(o.dirty=vn),o.update(e,t,i,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}e=t}}updateNextNode(e,t,i,r,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof on){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,f,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Dt&&us(t,l.outerDeco));if(!h&&l.update(e,t,i,r))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(l,e,t,i,r,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=vn,f.updateChildren(r,o+1),f.dirty=ct),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,i,r,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!us(i,e.outerDeco)||!r.eq(e.innerDeco))return null;let a=on.create(this.top,t,i,r,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,i,r,s){let o=on.create(this.top,e,t,i,r,s);o.contentDOM&&o.updateChildren(r,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new Im(this.top,e,t,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ln;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof io)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((_e||Be)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new Vm(this.top,[],i,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hT(n,e){let t=e,i=t.children.length,r=n.childCount,s=new Map,o=[];e:for(;r>0;){let a;for(;;)if(i){let c=t.children[i-1];if(c instanceof Ln)t=c,i=c.children.length;else{a=c,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}function dT(n,e){return n.type.side-e.type.side}function pT(n,e,t,i){let r=e.locals(n),s=0;if(r.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);i(u,r,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,f;for(;o<r.length&&r[o].to==s;){let b=r[o++];b.widget&&(u?(f||(f=[u])).push(b):u=b)}if(u)if(f){f.sort(dT);for(let b=0;b<f.length;b++)t(f[b],c,!!l)}else t(u,c,!!l);let h,d;if(l)d=-1,h=l,l=null;else if(c<n.childCount)d=c,h=n.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let p=s+h.nodeSize;if(h.isText){let b=p;o<r.length&&r[o].from<b&&(b=r[o].from);for(let v=0;v<a.length;v++)a[v].to<b&&(b=a[v].to);b<p&&(l=h.cut(b-s),h=h.cut(0,b-s),p=b,d=-1)}else for(;o<r.length&&r[o].to<p;)o++;let m=h.isInline&&!h.isLeaf?a.filter(b=>!b.inline):a.slice();i(h,m,e.forChild(s,h),d),s=p}}function mT(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function gT(n,e,t,i){for(let r=0,s=0;r<n.childCount&&s<=i;){let o=n.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<n.childCount;){let c=n.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=t){if(s>=i&&l.slice(i-e.length-a,i-a)==e)return i-e.length;let c=a<i?l.lastIndexOf(e,i-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}function Ga(n,e,t,i,r){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,i)),r&&(s.push(r),r=void 0),u>t&&s.push(l.slice(t-c,l.size,i)))}return s}function Yl(n,e=null){let t=n.domSelectionRange(),i=n.state.doc;if(!t.focusNode)return null;let r=n.docView.nearestDesc(t.focusNode),s=r&&r.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,c;if(no(t)){for(l=o;r&&!r.node;)r=r.parent;let f=r.node;if(r&&f.isAtom&&K.isSelectable(f)&&r.parent&&!(f.isInline&&$w(t.focusNode,t.focusOffset,r.dom))){let h=r.posBefore;c=new K(o==h?a:i.resolve(h))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let f=o,h=o;for(let d=0;d<t.rangeCount;d++){let p=t.getRangeAt(d);f=Math.min(f,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(f<0)return null;[l,o]=h==n.state.selection.anchor?[h,f]:[f,h],a=i.resolve(o)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=i.resolve(l);if(!c){let f=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=Ql(n,u,a,f)}return c}function jm(n){return n.editable?n.hasFocus():$m(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function _t(n,e=!1){let t=n.state.selection;if(_m(n,t),!!jm(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Be){let i=n.domSelectionRange(),r=n.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&Nn(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)bT(n);else{let{anchor:i,head:r}=t,s,o;lh&&!(t instanceof ie)&&(t.$from.parent.inlineContent||(s=ch(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=ch(n,t.to))),n.docView.setSelection(i,r,n,e),lh&&(s&&uh(s),o&&uh(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yT(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const lh=_e||Be&&Rm<63;function ch(n,e){let{node:t,offset:i}=n.docView.domFromPos(e,0),r=i<t.childNodes.length?t.childNodes[i]:null,s=i?t.childNodes[i-1]:null;if(_e&&r&&r.contentEditable=="false")return Jo(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return Jo(r);if(s)return Jo(s)}}function Jo(n){return n.contentEditable="true",_e&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function uh(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function yT(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),i=t.anchorNode,r=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=i||t.anchorOffset!=r)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!jm(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function bT(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let i=n.cursorWrapper.dom,r=i.nodeName=="IMG";r?t.setStart(i.parentNode,De(i)+1):t.setStart(i,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!r&&!n.state.selection.visible&&Xe&&sn<=11&&(i.disabled=!0,i.disabled=!1)}function _m(n,e){if(e instanceof K){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(fh(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else fh(n)}function fh(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Ql(n,e,t,i){return n.someProp("createSelectionBetween",r=>r(n,e,t))||ie.between(e,t,i)}function hh(n){return n.editable&&!n.hasFocus()?!1:$m(n)}function $m(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xT(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Nn(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Xa(n,e){let{$anchor:t,$head:i}=n.selection,r=e>0?t.max(i):t.min(i),s=r.parent.inlineContent?r.depth?n.doc.resolve(e>0?r.after():r.before()):null:r;return s&&te.findFrom(s,e)}function Gt(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function dh(n,e,t){let i=n.state.selection;if(i instanceof ie)if(t.indexOf("s")>-1){let{$head:r}=i,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(r.pos+s.nodeSize*(e<0?-1:1));return Gt(n,new ie(i.$anchor,o))}else if(i.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let r=Xa(n.state,e);return r&&r instanceof K?Gt(n,r):!1}else if(!(rt&&t.indexOf("m")>-1)){let r=i.$head,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?K.isSelectable(s)?Gt(n,new K(e<0?n.state.doc.resolve(r.pos-s.nodeSize):r)):br?Gt(n,new ie(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(i instanceof K&&i.node.isInline)return Gt(n,new ie(e>0?i.$to:i.$from));{let r=Xa(n.state,e);return r?Gt(n,r):!1}}}function fs(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Fi(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Wn(n,e){return e<0?vT(n):ST(n)}function vT(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let r,s,o=!1;for(mt&&t.nodeType==1&&i<fs(t)&&Fi(t.childNodes[i],-1)&&(o=!0);;)if(i>0){if(t.nodeType!=1)break;{let a=t.childNodes[i-1];if(Fi(a,-1))r=t,s=--i;else if(a.nodeType==3)t=a,i=t.nodeValue.length;else break}}else{if(Um(t))break;{let a=t.previousSibling;for(;a&&Fi(a,-1);)r=t.parentNode,s=De(a),a=a.previousSibling;if(a)t=a,i=fs(t);else{if(t=t.parentNode,t==n.dom)break;i=0}}}o?Ya(n,t,i):r&&Ya(n,r,s)}function ST(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let r=fs(t),s,o;for(;;)if(i<r){if(t.nodeType!=1)break;let a=t.childNodes[i];if(Fi(a,1))s=t,o=++i;else break}else{if(Um(t))break;{let a=t.nextSibling;for(;a&&Fi(a,1);)s=a.parentNode,o=De(a)+1,a=a.nextSibling;if(a)t=a,i=0,r=fs(t);else{if(t=t.parentNode,t==n.dom)break;i=r=0}}}s&&Ya(n,s,o)}function Um(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function wT(n,e){for(;n&&e==n.childNodes.length&&!yr(n);)e=De(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function TT(n,e){for(;n&&!e&&!yr(n);)e=De(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Ya(n,e,t){if(e.nodeType!=3){let s,o;(o=wT(e,t))?(e=o,t=0):(s=TT(e,t))&&(e=s,t=s.nodeValue.length)}let i=n.domSelection();if(!i)return;if(no(i)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(e,t);n.domObserver.setCurSelection();let{state:r}=n;setTimeout(()=>{n.state==r&&_t(n)},50)}function ph(n,e){let t=n.state.doc.resolve(e);if(!(Be||Hw)&&t.parent.inlineContent){let r=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left<r.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function mh(n,e,t){let i=n.state.selection;if(i instanceof ie&&!i.empty||t.indexOf("s")>-1||rt&&t.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=Xa(n.state,e);if(o&&o instanceof K)return Gt(n,o)}if(!r.parent.inlineContent){let o=e<0?r:s,a=i instanceof lt?te.near(o,e):te.findFrom(o,e);return a?Gt(n,a):!1}return!1}function gh(n,e){if(!(n.state.selection instanceof ie))return!0;let{$head:t,$anchor:i,empty:r}=n.state.selection;if(!t.sameParent(i))return!0;if(!r)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function yh(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function CT(n){if(!_e||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;yh(n,i,"true"),setTimeout(()=>yh(n,i,"false"),20)}return!1}function kT(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function ET(n,e){let t=e.keyCode,i=kT(e);if(t==8||rt&&t==72&&i=="c")return gh(n,-1)||Wn(n,-1);if(t==46&&!e.shiftKey||rt&&t==68&&i=="c")return gh(n,1)||Wn(n,1);if(t==13||t==27)return!0;if(t==37||rt&&t==66&&i=="c"){let r=t==37?ph(n,n.state.selection.from)=="ltr"?-1:1:-1;return dh(n,r,i)||Wn(n,r)}else if(t==39||rt&&t==70&&i=="c"){let r=t==39?ph(n,n.state.selection.from)=="ltr"?1:-1:1;return dh(n,r,i)||Wn(n,r)}else{if(t==38||rt&&t==80&&i=="c")return mh(n,-1,i)||Wn(n,-1);if(t==40||rt&&t==78&&i=="c")return CT(n)||mh(n,1,i)||Wn(n,1);if(i==(rt?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Zl(n,e){n.someProp("transformCopied",d=>{e=d(e,n)});let t=[],{content:i,openStart:r,openEnd:s}=e;for(;r>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,s--;let d=i.firstChild;t.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),i=d.content}let o=n.someProp("clipboardSerializer")||hi.fromSchema(n.state.schema),a=Gm(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=Jm[c.nodeName.toLowerCase()]);){for(let d=u.length-1;d>=0;d--){let p=a.createElement(u[d]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${r} ${s}${f?` -${f}`:""} ${JSON.stringify(t)}`);let h=n.someProp("clipboardTextSerializer",d=>d(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function Wm(n,e,t,i,r){let s=r.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(i||s||!t);if(l){if(n.someProp("transformPastedText",h=>{e=h(e,s||i,n)}),s)return e?new j(I.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):j.empty;let f=n.someProp("clipboardTextParser",h=>h(e,r,i,n));if(f)a=f;else{let h=r.marks(),{schema:d}=n.state,p=hi.fromSchema(d);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let b=o.appendChild(document.createElement("p"));m&&b.appendChild(p.serializeNode(d.text(m,h)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),o=PT(t),br&&MT(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||tr.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:r,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!OT.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=DT(bh(a,+u[1],+u[2]),u[4]);else if(a=j.maxOpen(RT(a.content,r),!0),a.openStart||a.openEnd){let f=0,h=0;for(let d=a.content.firstChild;f<a.openStart&&!d.type.spec.isolating;f++,d=d.firstChild);for(let d=a.content.lastChild;h<a.openEnd&&!d.type.spec.isolating;h++,d=d.lastChild);a=bh(a,f,h)}return n.someProp("transformPasted",f=>{a=f(a,n)}),a}const OT=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function RT(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=r.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&Km(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=qm(o[o.length-1],s.length));let u=Hm(a,l);o.push(u),r=r.matchType(u.type),s=l}}),o)return I.from(o)}return n}function Hm(n,e,t=0){for(let i=e.length-1;i>=t;i--)n=e[i].create(null,I.from(n));return n}function Km(n,e,t,i,r){if(r<n.length&&r<e.length&&n[r]==e[r]){let s=Km(n,e,t,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==n.length-1?t.type:n[r+1]))return i.copy(i.content.append(I.from(Hm(t,n,r+1))))}}function qm(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,qm(n.lastChild,e-1)),i=n.contentMatchAt(n.childCount).fillBefore(I.empty,!0);return n.copy(t.append(i))}function Qa(n,e,t,i,r,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),r<i-1&&(a=Qa(a,e,t,i,r+1,s)),r>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(I.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function bh(n,e,t){return e<n.openStart&&(n=new j(Qa(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new j(Qa(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Jm={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let xh=null;function Gm(){return xh||(xh=document.implementation.createHTMLDocument("title"))}let Go=null;function AT(n){let e=window.trustedTypes;return e?(Go||(Go=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Go.createHTML(n)):n}function PT(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Gm().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),r;if((r=i&&Jm[i[1].toLowerCase()])&&(n=r.map(s=>"<"+s+">").join("")+n+r.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=AT(n),r)for(let s=0;s<r.length;s++)t=t.querySelector(r[s])||t;return t}function MT(n){let e=n.querySelectorAll(Be?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let i=e[t];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function DT(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return n}let{content:r,openStart:s,openEnd:o}=n;for(let a=i.length-2;a>=0;a-=2){let l=t.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=I.from(l.create(i[a+1],r)),s++,o++}return new j(r,s,o)}const $e={},Ue={},NT={touchstart:!0,touchmove:!0};class LT{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function IT(n){for(let e in $e){let t=$e[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>{FT(n,i)&&!ec(n,i)&&(n.editable||!(i.type in Ue))&&t(n,i)},NT[e]?{passive:!0}:void 0)}_e&&n.dom.addEventListener("input",()=>null),Za(n)}function nn(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function VT(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Za(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>ec(n,i))})}function ec(n,e){return n.someProp("handleDOMEvents",t=>{let i=t[e.type];return i?i(n,e)||e.defaultPrevented:!1})}function FT(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function BT(n,e){!ec(n,e)&&$e[e.type]&&(n.editable||!(e.type in Ue))&&$e[e.type](n,e)}Ue.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Ym(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(jt&&Be&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),ai&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",r=>r(n,yn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,t))||ET(n,t)?t.preventDefault():nn(n,"key")};Ue.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ue.keypress=(n,e)=>{let t=e;if(Ym(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||rt&&t.metaKey)return;if(n.someProp("handleKeyPress",r=>r(n,t))){t.preventDefault();return}let i=n.state.selection;if(!(i instanceof ie)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(t.charCode),s=()=>n.state.tr.insertText(r).scrollIntoView();!/[\r\n]/.test(r)&&!n.someProp("handleTextInput",o=>o(n,i.$from.pos,i.$to.pos,r,s))&&n.dispatch(s()),t.preventDefault()}};function ro(n){return{left:n.clientX,top:n.clientY}}function zT(n,e){let t=e.x-n.clientX,i=e.y-n.clientY;return t*t+i*i<100}function tc(n,e,t,i,r){if(i==-1)return!1;let s=n.state.doc.resolve(i);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),r,!0):a(n,t,s.node(o),s.before(o),r,!1)))return!0;return!1}function ti(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let i=n.state.tr.setSelection(e);i.setMeta("pointer",!0),n.dispatch(i)}function jT(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),i=t.nodeAfter;return i&&i.isAtom&&K.isSelectable(i)?(ti(n,new K(t)),!0):!1}function _T(n,e){if(e==-1)return!1;let t=n.state.selection,i,r;t instanceof K&&(i=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(K.isSelectable(a)){i&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?r=s.before(t.$from.depth):r=s.before(o);break}}return r!=null?(ti(n,K.create(n.state.doc,r)),!0):!1}function $T(n,e,t,i,r){return tc(n,"handleClickOn",e,t,i)||n.someProp("handleClick",s=>s(n,e,i))||(r?_T(n,t):jT(n,t))}function UT(n,e,t,i){return tc(n,"handleDoubleClickOn",e,t,i)||n.someProp("handleDoubleClick",r=>r(n,e,i))}function WT(n,e,t,i){return tc(n,"handleTripleClickOn",e,t,i)||n.someProp("handleTripleClick",r=>r(n,e,i))||HT(n,t,i)}function HT(n,e,t){if(t.button!=0)return!1;let i=n.state.doc;if(e==-1)return i.inlineContent?(ti(n,ie.create(i,0,i.content.size)),!0):!1;let r=i.resolve(e);for(let s=r.depth+1;s>0;s--){let o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)ti(n,ie.create(i,a+1,a+1+o.content.size));else if(K.isSelectable(o))ti(n,K.create(i,a));else continue;return!0}}function nc(n){return hs(n)}const Xm=rt?"metaKey":"ctrlKey";$e.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let i=nc(n),r=Date.now(),s="singleClick";r-n.input.lastClick.time<500&&zT(t,n.input.lastClick)&&!t[Xm]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:r,x:t.clientX,y:t.clientY,type:s,button:t.button};let o=n.posAtCoords(ro(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new KT(n,o,t,!!i)):(s=="doubleClick"?UT:WT)(n,o.pos,o.inside,t)?t.preventDefault():nn(n,"pointer"))};class KT{constructor(e,t,i,r){this.view=e,this.pos=t,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[Xm],this.allowDefault=i.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,o=u.depth?u.before():0}const a=r?null:i.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof K&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),nn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>_t(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ro(e))),this.updateAllowDefault(e),this.allowDefault||!t?nn(this.view,"pointer"):$T(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||_e&&this.mightDrag&&!this.mightDrag.node.isAtom||Be&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ti(this.view,te.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):nn(this.view,"pointer")}move(e){this.updateAllowDefault(e),nn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}$e.touchstart=n=>{n.input.lastTouch=Date.now(),nc(n),nn(n,"pointer")};$e.touchmove=n=>{n.input.lastTouch=Date.now(),nn(n,"pointer")};$e.contextmenu=n=>nc(n);function Ym(n,e){return n.composing?!0:_e&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const qT=jt?5e3:-1;Ue.compositionstart=Ue.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ie&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),hs(n,!0),n.markCursor=null;else if(hs(n,!e.selection.empty),mt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let i=n.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&r.nodeType==1&&s!=0;){let o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else r=o,s=-1}}n.input.composing=!0}Qm(n,qT)};Ue.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Qm(n,20))};function Qm(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>hs(n),e))}function Zm(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=GT());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function JT(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=jw(e.focusNode,e.focusOffset),i=_w(e.focusNode,e.focusOffset);if(t&&i&&t!=i){let r=i.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||i==s)return s;if(!r||!r.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return i}}return t||i}function GT(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function hs(n,e=!1){if(!(jt&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Zm(n),e||n.docView&&n.docView.dirty){let t=Yl(n),i=n.state.selection;return t&&!t.eq(i)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function XT(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),n.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const sr=Xe&&sn<15||ai&&Kw<604;$e.copy=Ue.cut=(n,e)=>{let t=e,i=n.state.selection,r=t.type=="cut";if(i.empty)return;let s=sr?null:t.clipboardData,o=i.content(),{dom:a,text:l}=Zl(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):XT(n,a),r&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function YT(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function QT(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),t?or(n,i.value,null,r,e):or(n,i.textContent,i.innerHTML,r,e)},50)}function or(n,e,t,i,r){let s=Wm(n,e,t,i,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,r,s||j.empty)))return!0;if(!s)return!1;let o=YT(s),a=o?n.state.tr.replaceSelectionWith(o,i):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function eg(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Ue.paste=(n,e)=>{let t=e;if(n.composing&&!jt)return;let i=sr?null:t.clipboardData,r=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&or(n,eg(i),i.getData("text/html"),r,t)?t.preventDefault():QT(n,t)};class tg{constructor(e,t,i){this.slice=e,this.move=t,this.node=i}}const ZT=rt?"altKey":"ctrlKey";function ng(n,e){let t=n.someProp("dragCopies",i=>!i(e));return t??!e[ZT]}$e.dragstart=(n,e)=>{let t=e,i=n.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let r=n.state.selection,s=r.empty?null:n.posAtCoords(ro(t)),o;if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof K?r.to-1:r.to))){if(i&&i.mightDrag)o=K.create(n.state.doc,i.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(o=K.create(n.state.doc,f.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c,slice:u}=Zl(n,a);(!t.dataTransfer.files.length||!Be||Rm>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(sr?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",sr||t.dataTransfer.setData("text/plain",c),n.dragging=new tg(u,ng(n,t),o)};$e.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ue.dragover=Ue.dragenter=(n,e)=>e.preventDefault();Ue.drop=(n,e)=>{let t=e,i=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let r=n.posAtCoords(ro(t));if(!r)return;let s=n.state.doc.resolve(r.pos),o=i&&i.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=Wm(n,eg(t.dataTransfer),sr?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(i&&ng(n,t));if(n.someProp("handleDrop",p=>p(n,t,o||j.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?xm(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;if(a){let{node:p}=i;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(f?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let d=c.doc.resolve(u);if(f&&K.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new K(d));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,b,v,C)=>p=C),c.setSelection(Ql(n,d,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};$e.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&_t(n)},20))};$e.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};$e.beforeinput=(n,e)=>{if(Be&&jt&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,yn(8,"Backspace")))))return;let{$cursor:r}=n.state.selection;r&&r.pos>0&&n.dispatch(n.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let n in Ue)$e[n]=Ue[n];function ar(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class ds{constructor(e,t){this.toDOM=e,this.spec=t||On,this.side=this.spec.side||0}map(e,t,i,r){let{pos:s,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new ot(s-i,s-i,this)}valid(){return!0}eq(e){return this==e||e instanceof ds&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ar(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class an{constructor(e,t){this.attrs=e,this.spec=t||On}map(e,t,i,r){let s=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-i,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=o?null:new ot(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof an&&ar(this.attrs,e.attrs)&&ar(this.spec,e.spec)}static is(e){return e.type instanceof an}destroy(){}}class ic{constructor(e,t){this.attrs=e,this.spec=t||On}map(e,t,i,r){let s=e.mapResult(t.from+r,1);if(s.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=s.pos?null:new ot(s.pos-i,o.pos-i,this)}valid(e,t){let{index:i,offset:r}=e.content.findIndex(t.from),s;return r==t.from&&!(s=e.child(i)).isText&&r+s.nodeSize==t.to}eq(e){return this==e||e instanceof ic&&ar(this.attrs,e.attrs)&&ar(this.spec,e.spec)}destroy(){}}class ot{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new ot(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new ot(e,e,new ds(t,i))}static inline(e,t,i,r){return new ot(e,t,new an(i,r))}static node(e,t,i,r){return new ot(e,t,new ic(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof an}get widget(){return this.type instanceof ds}}const Kn=[],On={};class Ee{constructor(e,t){this.local=e.length?e:Kn,this.children=t.length?t:Kn}static create(e,t){return t.length?ps(t,e,0,On):Ve}find(e,t,i){let r=[];return this.findInner(e??0,t??1e9,r,0,i),r}findInner(e,t,i,r,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&i.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,i,r+a,s)}}map(e,t,i){return this==Ve||e.maps.length==0?this:this.mapInner(e,t,0,0,i||On)}mapInner(e,t,i,r,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,i,r);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?eC(this.children,o||[],e,t,i,r,s):o?new Ee(o.sort(Rn),Kn):Ve}add(e,t){return t.length?this==Ve?Ee.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let r,s=0;e.forEach((a,l)=>{let c=l+i,u;if(u=rg(t,a,c)){for(r||(r=this.children.slice());s<r.length&&r[s]<l;)s+=3;r[s]==l?r[s+2]=r[s+2].addInner(a,u,c+1):r.splice(s,0,l,l+a.nodeSize,ps(u,a,c+1,On)),s+=3}});let o=ig(s?sg(t):t,-i);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ee(o.length?this.local.concat(o).sort(Rn):this.local,r||this.children)}remove(e){return e.length==0||this==Ve?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let o,a=i[s]+t,l=i[s+1]+t;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>a&&f.to<l&&(e[u]=null,(o||(o=[])).push(f));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[s+2].removeInner(o,a+1);c!=Ve?i[s+2]=c:(i.splice(s,3),s-=3)}if(r.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<r.length;a++)r[a].eq(o,t)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new Ee(r,i):Ve}forChild(e,t){if(this==Ve)return this;if(t.isLeaf)return Ee.empty;let i,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(i=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof an){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){let a=new Ee(r.sort(Rn),Kn);return i?new Qt([a,i]):a}return i||Ve}eq(e){if(this==e)return!0;if(!(e instanceof Ee)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return rc(this.localsInner(e))}localsInner(e){if(this==Ve)return Kn;if(e.inlineContent||!this.local.some(an.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof an||t.push(this.local[i]);return t}forEachSet(e){e(this)}}Ee.empty=new Ee([],[]);Ee.removeOverlap=rc;const Ve=Ee.empty;class Qt{constructor(e){this.members=e}map(e,t){const i=this.members.map(r=>r.map(e,t,On));return Qt.from(i)}forChild(e,t){if(t.isLeaf)return Ee.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(e,t);s!=Ve&&(s instanceof Qt?i=i.concat(s.members):i.push(s))}return Qt.from(i)}eq(e){if(!(e instanceof Qt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(e);if(s.length)if(!t)t=s;else{i&&(t=t.slice(),i=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?rc(i?t:t.sort(Rn)):Kn}static from(e){switch(e.length){case 0:return Ve;case 1:return e[0];default:return new Qt(e.every(t=>t instanceof Ee)?e:e.reduce((t,i)=>t.concat(i instanceof Ee?i:i.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function eC(n,e,t,i,r,s,o){let a=n.slice();for(let c=0,u=s;c<t.maps.length;c++){let f=0;t.maps[c].forEach((h,d,p,m)=>{let b=m-p-(d-h);for(let v=0;v<a.length;v+=3){let C=a[v+1];if(C<0||h>C+u-f)continue;let k=a[v]+u-f;d>=k?a[v+1]=h<=k?-2:-1:h>=u&&b&&(a[v]+=b,a[v+1]+=b)}f+=b}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+s),f=u-r;if(f<0||f>=i.content.size){l=!0;continue}let h=t.map(n[c+1]+s,-1),d=h-r,{index:p,offset:m}=i.content.findIndex(f),b=i.maybeChild(p);if(b&&m==f&&m+b.nodeSize==d){let v=a[c+2].mapInner(t,b,u+1,n[c]+s+1,o);v!=Ve?(a[c]=f,a[c+1]=d,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=tC(a,n,e,t,r,s,o),u=ps(c,i,0,o);e=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,h=0;f<u.children.length;f+=3){let d=u.children[f];for(;h<a.length&&a[h]<d;)h+=3;a.splice(h,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Ee(e.sort(Rn),a)}function ig(n,e){if(!e||!n.length)return n;let t=[];for(let i=0;i<n.length;i++){let r=n[i];t.push(new ot(r.from+e,r.to+e,r.type))}return t}function tC(n,e,t,i,r,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(i,r,c);f?t.push(f):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function rg(n,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,r=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<i&&((r||(r=[])).push(o),n[s]=null);return r}function sg(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function ps(n,e,t,i){let r=[],s=!1;e.forEach((a,l)=>{let c=rg(n,a,l+t);if(c){s=!0;let u=ps(c,a,t+l+1,i);u!=Ve&&r.push(l,l+a.nodeSize,u)}});let o=ig(s?sg(n):n,-t).sort(Rn);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new Ee(o,r):Ve}function Rn(n,e){return n.from-e.from||n.to-e.to}function rc(n){let e=n;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let r=t+1;r<e.length;r++){let s=e[r];if(s.from==i.from){s.to!=i.to&&(e==n&&(e=n.slice()),e[r]=s.copy(s.from,i.to),vh(e,r+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(e==n&&(e=n.slice()),e[t]=i.copy(i.from,s.from),vh(e,r,i.copy(s.from,i.to)));break}}}return e}function vh(n,e,t){for(;e<n.length&&Rn(t,n[e])>0;)e++;n.splice(e,0,t)}function Xo(n){let e=[];return n.someProp("decorations",t=>{let i=t(n.state);i&&i!=Ve&&e.push(i)}),n.cursorWrapper&&e.push(Ee.create(n.state.doc,[n.cursorWrapper.deco])),Qt.from(e)}const nC={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},iC=Xe&&sn<=11;class rC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class sC{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new rC,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);Xe&&sn<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),iC&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,nC)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hh(this.view)){if(this.suppressingSelectionUpdates)return _t(this.view);if(Xe&&sn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Nn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,i;for(let s=e.focusNode;s;s=oi(s))t.add(s);for(let s=e.anchorNode;s;s=oi(s))if(t.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let i=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&hh(e)&&!this.ignoreSelectionChange(i),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let f=this.registerMutation(t[u],l);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(a=!0))}if(mt&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,h]=u;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of u){let d=h.parentNode;d&&d.nodeName=="LI"&&(!f||lC(e,f)!=d)&&h.remove()}}}let c=null;s<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&no(i)&&(c=Yl(e))&&c.eq(te.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,_t(e),this.currentSelection.set(i),e.scrollToSelection()):(s>-1||r)&&(s>-1&&(e.docView.markDirty(s,o),oC(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||_t(e),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let r=e.previousSibling,s=e.nextSibling;if(Xe&&sn<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:h}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(r=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=r&&r.parentNode==e.target?De(r)+1:0,a=i.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?De(s):e.target.childNodes.length,c=i.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Sh=new WeakMap,wh=!1;function oC(n){if(!Sh.has(n)&&(Sh.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=mt,wh)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),wh=!0}}function Th(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return Nn(o.node,o.offset,r,s)&&([t,i,r,s]=[r,s,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}}function aC(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return Th(n,r)}let t;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),t?Th(n,t):null}function lC(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let i=n.docView.nearestDesc(t,!0);if(i&&i.node.isBlock)return t}return null}function cC(n,e,t){let{node:i,fromOffset:r,toOffset:s,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],no(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Be&&n.input.lastKeyCode===8)for(let b=s;b>r;b--){let v=i.childNodes[b-1],C=v.pmViewDesc;if(v.nodeName=="BR"&&!C){s=b;break}if(!C||C.size)break}let f=n.state.doc,h=n.someProp("domParser")||tr.fromSchema(n.state.schema),d=f.resolve(o),p=null,m=h.parse(i,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:r,to:s,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:uC,context:d});if(c&&c[0].pos!=null){let b=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=b),p={anchor:b+o,head:v+o}}return{doc:m,sel:p,from:o,to:a}}function uC(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(_e&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||_e&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const fC=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function hC(n,e,t,i,r){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let g=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,y=Yl(n,g);if(y&&!n.state.selection.eq(y)){if(Be&&jt&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",N=>N(n,yn(13,"Enter"))))return;let T=n.state.tr.setSelection(y);g=="pointer"?T.setMeta("pointer",!0):g=="key"&&T.scrollIntoView(),s&&T.setMeta("composition",s),n.dispatch(T)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=cC(n,e,t),u=n.state.doc,f=u.slice(c.from,c.to),h,d;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,d="end"):(h=n.state.selection.from,d="start"),n.input.lastKeyCode=null;let p=mC(f.content,c.doc.content,c.from,h,d);if(p&&n.input.domChangeCount++,(ai&&n.input.lastIOSEnter>Date.now()-225||jt)&&r.some(g=>g.nodeType==1&&!fC.test(g.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",g=>g(n,yn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(i&&l instanceof ie&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let g=Ch(n,n.state.doc,c.sel);if(g&&!g.eq(n.state.selection)){let y=n.state.tr.setSelection(g);s&&y.setMeta("composition",s),n.dispatch(y)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof ie&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),Xe&&sn<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),b=c.doc.resolveNoCache(p.endB-c.from),v=u.resolve(p.start),C=m.sameParent(b)&&m.parent.inlineContent&&v.end()>=p.endA,k;if((ai&&n.input.lastIOSEnter>Date.now()-225&&(!C||r.some(g=>g.nodeName=="DIV"||g.nodeName=="P"))||!C&&m.pos<c.doc.content.size&&(!m.sameParent(b)||!m.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(m.pos,b.pos,"",""))&&(k=te.findFrom(c.doc.resolve(m.pos+1),1,!0))&&k.head>m.pos)&&n.someProp("handleKeyDown",g=>g(n,yn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&pC(u,p.start,p.endA,m,b)&&n.someProp("handleKeyDown",g=>g(n,yn(8,"Backspace")))){jt&&Be&&n.domObserver.suppressSelectionUpdates();return}Be&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),jt&&!C&&m.start()!=b.start()&&b.parentOffset==0&&m.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,b=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(g){return g(n,yn(13,"Enter"))})},20));let P=p.start,R=p.endA,D=g=>{let y=g||n.state.tr.replace(P,R,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let T=Ch(n,y.doc,c.sel);T&&!(Be&&n.composing&&T.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(T.head==P||T.head==y.mapping.map(R)-1)||Xe&&T.empty&&T.head==P)&&y.setSelection(T)}return s&&y.setMeta("composition",s),y.scrollIntoView()},A;if(C){if(m.pos==b.pos){Xe&&sn<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>_t(n),20));let g=D(n.state.tr.delete(P,R)),y=u.resolve(p.start).marksAcross(u.resolve(p.endA));y&&g.ensureMarks(y),n.dispatch(g)}else if(p.endA==p.endB&&(A=dC(m.parent.content.cut(m.parentOffset,b.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start())))){let g=D(n.state.tr);A.type=="add"?g.addMark(P,R,A.mark):g.removeMark(P,R,A.mark),n.dispatch(g)}else if(m.parent.child(m.index()).isText&&m.index()==b.index()-(b.textOffset?0:1)){let g=m.parent.textBetween(m.parentOffset,b.parentOffset),y=()=>D(n.state.tr.insertText(g,P,R));n.someProp("handleTextInput",T=>T(n,P,R,g,y))||n.dispatch(y())}}else n.dispatch(D())}function Ch(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Ql(n,e.resolve(t.anchor),e.resolve(t.head))}function dC(n,e){let t=n.firstChild.marks,i=e.firstChild.marks,r=t,s=i,o,a,l;for(let u=0;u<i.length;u++)r=i[u].removeFromSet(r);for(let u=0;u<t.length;u++)s=t[u].removeFromSet(s);if(r.length==1&&s.length==0)a=r[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(r.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(I.from(c).eq(n))return{mark:a,type:o}}function pC(n,e,t,i,r){if(t-e<=r.pos-i.pos||Yo(i,!0,!1)<r.pos)return!1;let s=n.resolve(e);if(!i.parent.isTextblock){let a=s.nodeAfter;return a!=null&&t==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(Yo(s,!0,!0));return!o.parent.isTextblock||o.pos>t||Yo(o,!0,!1)<t?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function Yo(n,e,t){let i=n.depth,r=e?n.end():n.pos;for(;i>0&&(e||n.indexAfter(i)==n.node(i).childCount);)i--,r++,e=!1;if(t){let s=n.node(i).maybeChild(n.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function mC(n,e,t,i,r){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(r=="end"){let l=Math.max(0,s-Math.min(o,a));i-=o+l-s}if(o<s&&n.size<e.size){let l=i<=s&&i>=o?s-i:0;s-=l,s&&s<e.size&&kh(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=i<=s&&i>=a?s-i:0;s-=l,s&&s<n.size&&kh(n.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function kh(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class gC{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new LT,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Ph),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Rh(this),Oh(this),this.nodeViews=Ah(this),this.docView=oh(this.state.doc,Eh(this),Xo(this),this.dom,this),this.domObserver=new sC(this,(i,r,s,o)=>hC(this,i,r,s,o)),this.domObserver.start(),IT(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Za(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ph),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let i in this._props)t[i]=this._props[i];t.state=this.state;for(let i in e)t[i]=e[i];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var i;let r=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Zm(this),o=!0),this.state=e;let a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let d=Ah(this);bC(d,this.nodeViews)&&(this.nodeViews=d,s=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Za(this),this.editable=Rh(this),Oh(this);let l=Xo(this),c=Eh(this),u=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(r.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Gw(this);if(o){this.domObserver.stop();let d=f&&(Xe||Be)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&yC(r.selection,e.selection);if(f){let p=Be?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=JT(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=oh(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xT(this))?_t(this,d):(_m(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&Xw(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof K){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&eh(this,t.getBoundingClientRect(),e)}else eh(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let i=this.directPlugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let i=this.state.plugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let i=this.pluginViews[t];i.update&&i.update(this,e)}}updateDraggedNode(e,t){let i=e.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let s=i.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==i.node&&(r=s)}this.dragging=new tg(e.slice,e.move,r<0?void 0:K.create(this.state.doc,r))}someProp(e,t){let i=this._props&&this._props[e],r;if(i!=null&&(r=t?t(i):i))return r;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(r=t?t(a):a))return r}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(r=t?t(a):a))return r}}hasFocus(){if(Xe){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Yw(this.dom),_t(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return nT(this,e)}coordsAtPos(e,t=1){return Nm(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,i=-1){let r=this.docView.posFromDOM(e,t,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return aT(this,t||this.state,e)}pasteHTML(e,t){return or(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return or(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Zl(this,e)}destroy(){this.docView&&(VT(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Xo(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Bw())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return BT(this,e)}domSelectionRange(){let e=this.domSelection();return e?_e&&this.root.nodeType===11&&Uw(this.dom.ownerDocument)==this.dom&&aC(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}gC.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Eh(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let i in t)i=="class"?e.class+=" "+t[i]:i=="style"?e.style=(e.style?e.style+";":"")+t[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(t[i]))}),e.translate||(e.translate="no"),[ot.node(0,n.state.doc.content.size,e)]}function Oh(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:ot.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Rh(n){return!n.someProp("editable",e=>e(n.state)===!1)}function yC(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Ah(n){let e=Object.create(null);function t(i){for(let r in i)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=i[r])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function bC(n,e){let t=0,i=0;for(let r in n){if(n[r]!=e[r])return!0;t++}for(let r in e)i++;return t!=i}function Ph(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var hn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ms={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xC=typeof navigator<"u"&&/Mac/.test(navigator.platform),vC=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ne=0;Ne<10;Ne++)hn[48+Ne]=hn[96+Ne]=String(Ne);for(var Ne=1;Ne<=24;Ne++)hn[Ne+111]="F"+Ne;for(var Ne=65;Ne<=90;Ne++)hn[Ne]=String.fromCharCode(Ne+32),ms[Ne]=String.fromCharCode(Ne);for(var Qo in hn)ms.hasOwnProperty(Qo)||(ms[Qo]=hn[Qo]);function SC(n){var e=xC&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||vC&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?ms:hn)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const wC=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),TC=typeof navigator<"u"&&/Win/.test(navigator.platform);function CC(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let i,r,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))wC?o=!0:r=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(t="Alt-"+t),r&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function kC(n){let e=Object.create(null);for(let t in n)e[CC(t)]=n[t];return e}function Zo(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function jk(n){return new to({props:{handleKeyDown:og(n)}})}function og(n){let e=kC(n);return function(t,i){let r=SC(i),s,o=e[Zo(r,i)];if(o&&o(t.state,t.dispatch,t))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let a=e[Zo(r,i,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((i.altKey||i.metaKey||i.ctrlKey)&&!(TC&&i.ctrlKey&&i.altKey)&&(s=hn[i.keyCode])&&s!=r){let a=e[Zo(s,i)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const ag=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function lg(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const EC=(n,e,t)=>{let i=lg(n,t);if(!i)return!1;let r=sc(i);if(!r){let o=i.blockRange(),a=o&&mr(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let s=r.nodeBefore;if(fg(n,r,e,-1))return!0;if(i.parent.content.size==0&&(li(s,"end")||K.isSelectable(s)))for(let o=i.depth;;o--){let a=Zs(n.doc,i.before(o),i.after(o),j.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(li(s,"end")?te.findFrom(l.doc.resolve(l.mapping.map(r.pos,-1)),-1):K.create(l.doc,r.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||i.node(o-1).childCount>1)break}return s.isAtom&&r.depth==i.depth-1?(e&&e(n.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1},_k=(n,e,t)=>{let i=lg(n,t);if(!i)return!1;let r=sc(i);return r?cg(n,r,e):!1},$k=(n,e,t)=>{let i=ug(n,t);if(!i)return!1;let r=oc(i);return r?cg(n,r,e):!1};function cg(n,e,t){let i=e.nodeBefore,r=i,s=e.pos-1;for(;!r.isTextblock;s--){if(r.type.spec.isolating)return!1;let u=r.lastChild;if(!u)return!1;r=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Zs(n.doc,s,l,j.empty);if(!c||c.from!=s||c instanceof Me&&c.slice.size>=l-s)return!1;if(t){let u=n.tr.step(c);u.setSelection(ie.create(u.doc,s)),t(u.scrollIntoView())}return!0}function li(n,e,t=!1){for(let i=n;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const OC=(n,e,t)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=sc(i)}let o=s&&s.nodeBefore;return!o||!K.isSelectable(o)?!1:(e&&e(n.tr.setSelection(K.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function sc(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function ug(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const RC=(n,e,t)=>{let i=ug(n,t);if(!i)return!1;let r=oc(i);if(!r)return!1;let s=r.nodeAfter;if(fg(n,r,e,1))return!0;if(i.parent.content.size==0&&(li(s,"start")||K.isSelectable(s))){let o=Zs(n.doc,i.before(),i.after(),j.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(li(s,"start")?te.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):K.create(a.doc,a.mapping.map(r.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(e&&e(n.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},AC=(n,e,t)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=oc(i)}let o=s&&s.nodeAfter;return!o||!K.isSelectable(o)?!1:(e&&e(n.tr.setSelection(K.create(n.doc,s.pos)).scrollIntoView()),!0)};function oc(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Uk=(n,e)=>{let t=n.selection,i=t instanceof K,r;if(i){if(t.node.isTextblock||!gr(n.doc,t.from))return!1;r=t.from}else if(r=bm(n.doc,t.from,-1),r==null)return!1;if(e){let s=n.tr.join(r);i&&s.setSelection(K.create(s.doc,r-n.doc.resolve(r).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Wk=(n,e)=>{let t=n.selection,i;if(t instanceof K){if(t.node.isTextblock||!gr(n.doc,t.to))return!1;i=t.to}else if(i=bm(n.doc,t.to,1),i==null)return!1;return e&&e(n.tr.join(i).scrollIntoView()),!0},Hk=(n,e)=>{let{$from:t,$to:i}=n.selection,r=t.blockRange(i),s=r&&mr(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)},PC=(n,e)=>{let{$head:t,$anchor:i}=n.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function ac(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Kk=(n,e)=>{let{$head:t,$anchor:i}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let r=t.node(-1),s=t.indexAfter(-1),o=ac(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(te.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},MC=(n,e)=>{let t=n.selection,{$from:i,$to:r}=t;if(t instanceof lt||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=ac(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(ie.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},DC=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Ii(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let i=t.blockRange(),r=i&&mr(i);return r==null?!1:(e&&e(n.tr.lift(i,r).scrollIntoView()),!0)};function NC(n){return(e,t)=>{let{$from:i,$to:r}=e.selection;if(e.selection instanceof K&&e.selection.node.isBlock)return!i.parentOffset||!Ii(e.doc,i.pos)?!1:(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let d=i.depth;;d--)if(i.node(d).isBlock){l=i.end(d)==i.pos+(i.depth-d),c=i.start(d)==i.pos-(i.depth-d),a=ac(i.node(d-1).contentMatchAt(i.indexAfter(d-1))),s.unshift(l&&a?{type:a}:null),o=d;break}else{if(d==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof ie||e.selection instanceof lt)&&u.deleteSelection();let f=u.mapping.map(i.pos),h=Ii(u.doc,f,s.length,s);if(h||(s[0]=a?{type:a}:null,h=Ii(u.doc,f,s.length,s)),!h)return!1;if(u.split(f,s.length,s),!l&&c&&i.node(o).type!=a){let d=u.mapping.map(i.before(o)),p=u.doc.resolve(d);a&&i.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(i.before(o)),a)}return t&&t(u.scrollIntoView()),!0}}const LC=NC(),qk=(n,e)=>{let{$from:t,to:i}=n.selection,r,s=t.sharedDepth(i);return s==0?!1:(r=t.before(s),e&&e(n.tr.setSelection(K.create(n.doc,r))),!0)};function IC(n,e,t){let i=e.nodeBefore,r=e.nodeAfter,s=e.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(r.isTextblock||gr(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function fg(n,e,t,i){let r=e.nodeBefore,s=e.nodeAfter,o,a,l=r.type.spec.isolating||s.type.spec.isolating;if(!l&&IC(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(t){let d=e.pos+s.nodeSize,p=I.empty;for(let v=o.length-1;v>=0;v--)p=I.from(o[v].create(null,p));p=I.from(r.copy(p));let m=n.tr.step(new Le(e.pos-1,d,e.pos,d,new j(p,1,0),o.length,!0)),b=m.doc.resolve(d+2*o.length);b.nodeAfter&&b.nodeAfter.type==r.type&&gr(m.doc,b.pos)&&m.join(b.pos),t(m.scrollIntoView())}return!0}let u=s.type.spec.isolating||i>0&&l?null:te.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),h=f&&mr(f);if(h!=null&&h>=e.depth)return t&&t(n.tr.lift(f,h).scrollIntoView()),!0;if(c&&li(s,"start",!0)&&li(r,"end")){let d=r,p=[];for(;p.push(d),!d.isTextblock;)d=d.lastChild;let m=s,b=1;for(;!m.isTextblock;m=m.firstChild)b++;if(d.canReplace(d.childCount,d.childCount,m.content)){if(t){let v=I.empty;for(let k=p.length-1;k>=0;k--)v=I.from(p[k].copy(v));let C=n.tr.step(new Le(e.pos-p.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new j(v,p.length,0),0,!0));t(C.scrollIntoView())}return!0}}return!1}function hg(n){return function(e,t){let i=e.selection,r=n<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(t&&t(e.tr.setSelection(ie.create(e.doc,n<0?r.start(s):r.end(s)))),!0):!1}}const Jk=hg(-1),Gk=hg(1);function Xk(n,e=null){return function(t,i){let{$from:r,$to:s}=t.selection,o=r.blockRange(s),a=o&&pm(o,n,e);return a?(i&&i(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Yk(n,e=null){return function(t,i){let r=!1;for(let s=0;s<t.selection.ranges.length&&!r;s++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[s];t.doc.nodesBetween(o,a,(l,c)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)r=!0;else{let u=t.doc.resolve(c),f=u.index();r=u.parent.canReplaceWith(f,f+1,n)}})}if(!r)return!1;if(i){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];s.setBlockType(a,l,n,e)}i(s.scrollIntoView())}return!0}}function lc(...n){return function(e,t,i){for(let r=0;r<n.length;r++)if(n[r](e,t,i))return!0;return!1}}lc(ag,EC,OC);lc(ag,RC,AC);lc(PC,MC,DC,LC);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Qk(n,e=null){return function(t,i){let{$from:r,$to:s}=t.selection,o=r.blockRange(s);if(!o)return!1;let a=i?t.tr:null;return VC(a,o,n,e)?(i&&i(a.scrollIntoView()),!0):!1}}function VC(n,e,t,i=null){let r=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new ls(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new ls(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),r=!0}let a=pm(s,t,i,e);return a?(n&&FC(n,e,a,r,t),!0):!1}function FC(n,e,t,i,r){let s=I.empty;for(let u=t.length-1;u>=0;u--)s=I.from(t[u].type.create(t[u].attrs,s));n.step(new Le(e.start-(i?2:0),e.end,e.start,e.end,new j(s,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==r&&(o=u+1);let a=t.length-o,l=e.start+t.length-(i?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,h=!0;u<f;u++,h=!1)!h&&Ii(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function Zk(n){return function(e,t){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,o=>o.childCount>0&&o.firstChild.type==n);return s?t?i.node(s.depth-1).type==n?BC(e,t,n,s):zC(e,t,s):!0:!1}}function BC(n,e,t,i){let r=n.tr,s=i.end,o=i.$to.end(i.depth);s<o&&(r.step(new Le(s-1,o,s,o,new j(I.from(t.create(null,i.parent.copy())),1,0),1,!0)),i=new ls(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth));const a=mr(i);if(a==null)return!1;r.lift(i,a);let l=r.doc.resolve(r.mapping.map(s,-1)-1);return gr(r.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&r.join(l.pos),e(r.scrollIntoView()),!0}function zC(n,e,t){let i=n.tr,r=t.parent;for(let d=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)d-=r.child(p).nodeSize,i.delete(d-1,d+1);let s=i.doc.resolve(t.start),o=s.nodeAfter;if(i.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==r.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?I.empty:I.from(r))))return!1;let f=s.pos,h=f+o.nodeSize;return i.step(new Le(f-(a?1:0),h+(l?1:0),f+1,h-1,new j((a?I.empty:I.from(r.copy(I.empty))).append(l?I.empty:I.from(r.copy(I.empty))),a?0:1,l?0:1),a?0:1)),e(i.scrollIntoView()),!0}function eE(n){return function(e,t){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=I.from(c?n.create():null),f=new j(I.from(n.create(null,I.from(a.type.create(null,u)))),c?3:1,0),h=s.start,d=s.end;t(e.tr.step(new Le(h-(c?3:1),d,h,d,f,1,!0)).scrollIntoView())}return!0}}var ea={exports:{}},ta={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mh;function jC(){if(Mh)return ta;Mh=1;var n=$h(),e=Hp();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,a=n.useMemo,l=n.useDebugValue;return ta.useSyncExternalStoreWithSelector=function(c,u,f,h,d){var p=s(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function v(D){if(!C){if(C=!0,k=D,D=h(D),d!==void 0&&m.hasValue){var A=m.value;if(d(A,D))return P=A}return P=D}if(A=P,i(k,D))return A;var g=h(D);return d!==void 0&&d(A,g)?(k=D,A):(k=D,P=g)}var C=!1,k,P,R=f===void 0?null:f;return[function(){return v(u())},R===null?void 0:function(){return v(R())}]},[u,f,h,d]);var b=r(c,p[0],p[1]);return o(function(){m.hasValue=!0,m.value=b},[b]),l(b),b},ta}var Dh;function _C(){return Dh||(Dh=1,ea.exports=jC()),ea.exports}var tE=_C();const $C="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",UC="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",el="numeric",tl="ascii",nl="alpha",Bi="asciinumeric",Ei="alphanumeric",il="domain",dg="emoji",WC="scheme",HC="slashscheme",na="whitespace";function KC(n,e){return n in e||(e[n]=[]),e[n]}function wn(n,e,t){e[el]&&(e[Bi]=!0,e[Ei]=!0),e[tl]&&(e[Bi]=!0,e[nl]=!0),e[Bi]&&(e[Ei]=!0),e[nl]&&(e[Ei]=!0),e[Ei]&&(e[il]=!0),e[dg]&&(e[il]=!0);for(const i in e){const r=KC(i,t);r.indexOf(n)<0&&r.push(n)}}function qC(n,e){const t={};for(const i in e)e[i].indexOf(n)>=0&&(t[i]=!0);return t}function Ke(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Ke.groups={};Ke.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let i=0;i<e.jr.length;i++){const r=e.jr[i][0],s=e.jr[i][1];if(s&&r.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,i){for(let r=0;r<n.length;r++)this.tt(n[r],e,t,i)},tr(n,e,t,i){i=i||Ke.groups;let r;return e&&e.j?r=e:(r=new Ke(e),t&&i&&wn(e,t,i)),this.jr.push([n,r]),r},ts(n,e,t,i){let r=this;const s=n.length;if(!s)return r;for(let o=0;o<s-1;o++)r=r.tt(n[o]);return r.tt(n[s-1],e,t,i)},tt(n,e,t,i){i=i||Ke.groups;const r=this;if(e&&e.j)return r.j[n]=e,e;const s=e;let o,a=r.go(n);if(a?(o=new Ke,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Ke,s){if(i)if(o.t&&typeof o.t=="string"){const l=Object.assign(qC(o.t,i),t);wn(s,l,i)}else t&&wn(s,t,i);o.t=s}return r.j[n]=o,o}};const Q=(n,e,t,i,r)=>n.ta(e,t,i,r),ye=(n,e,t,i,r)=>n.tr(e,t,i,r),Nh=(n,e,t,i,r)=>n.ts(e,t,i,r),L=(n,e,t,i,r)=>n.tt(e,t,i,r),Bt="WORD",rl="UWORD",pg="ASCIINUMERICAL",mg="ALPHANUMERICAL",lr="LOCALHOST",sl="TLD",ol="UTLD",Hr="SCHEME",qn="SLASH_SCHEME",cc="NUM",al="WS",uc="NL",zi="OPENBRACE",ji="CLOSEBRACE",gs="OPENBRACKET",ys="CLOSEBRACKET",bs="OPENPAREN",xs="CLOSEPAREN",vs="OPENANGLEBRACKET",Ss="CLOSEANGLEBRACKET",ws="FULLWIDTHLEFTPAREN",Ts="FULLWIDTHRIGHTPAREN",Cs="LEFTCORNERBRACKET",ks="RIGHTCORNERBRACKET",Es="LEFTWHITECORNERBRACKET",Os="RIGHTWHITECORNERBRACKET",Rs="FULLWIDTHLESSTHAN",As="FULLWIDTHGREATERTHAN",Ps="AMPERSAND",Ms="APOSTROPHE",Ds="ASTERISK",Xt="AT",Ns="BACKSLASH",Ls="BACKTICK",Is="CARET",Zt="COLON",fc="COMMA",Vs="DOLLAR",vt="DOT",Fs="EQUALS",hc="EXCLAMATION",it="HYPHEN",_i="PERCENT",Bs="PIPE",zs="PLUS",js="POUND",$i="QUERY",dc="QUOTE",gg="FULLWIDTHMIDDLEDOT",pc="SEMI",St="SLASH",Ui="TILDE",_s="UNDERSCORE",yg="EMOJI",$s="SYM";var bg=Object.freeze({__proto__:null,ALPHANUMERICAL:mg,AMPERSAND:Ps,APOSTROPHE:Ms,ASCIINUMERICAL:pg,ASTERISK:Ds,AT:Xt,BACKSLASH:Ns,BACKTICK:Ls,CARET:Is,CLOSEANGLEBRACKET:Ss,CLOSEBRACE:ji,CLOSEBRACKET:ys,CLOSEPAREN:xs,COLON:Zt,COMMA:fc,DOLLAR:Vs,DOT:vt,EMOJI:yg,EQUALS:Fs,EXCLAMATION:hc,FULLWIDTHGREATERTHAN:As,FULLWIDTHLEFTPAREN:ws,FULLWIDTHLESSTHAN:Rs,FULLWIDTHMIDDLEDOT:gg,FULLWIDTHRIGHTPAREN:Ts,HYPHEN:it,LEFTCORNERBRACKET:Cs,LEFTWHITECORNERBRACKET:Es,LOCALHOST:lr,NL:uc,NUM:cc,OPENANGLEBRACKET:vs,OPENBRACE:zi,OPENBRACKET:gs,OPENPAREN:bs,PERCENT:_i,PIPE:Bs,PLUS:zs,POUND:js,QUERY:$i,QUOTE:dc,RIGHTCORNERBRACKET:ks,RIGHTWHITECORNERBRACKET:Os,SCHEME:Hr,SEMI:pc,SLASH:St,SLASH_SCHEME:qn,SYM:$s,TILDE:Ui,TLD:sl,UNDERSCORE:_s,UTLD:ol,UWORD:rl,WORD:Bt,WS:al});const Vt=/[a-z]/,vi=new RegExp("\\p{L}","u"),ia=new RegExp("\\p{Emoji}","u"),Ft=/\d/,ra=/\s/,Lh="\r",sa=`
`,JC="",GC="",oa="";let Dr=null,Nr=null;function XC(n=[]){const e={};Ke.groups=e;const t=new Ke;Dr==null&&(Dr=Ih($C)),Nr==null&&(Nr=Ih(UC)),L(t,"'",Ms),L(t,"{",zi),L(t,"}",ji),L(t,"[",gs),L(t,"]",ys),L(t,"(",bs),L(t,")",xs),L(t,"<",vs),L(t,">",Ss),L(t,"",ws),L(t,"",Ts),L(t,"",Cs),L(t,"",ks),L(t,"",Es),L(t,"",Os),L(t,"",Rs),L(t,"",As),L(t,"&",Ps),L(t,"*",Ds),L(t,"@",Xt),L(t,"`",Ls),L(t,"^",Is),L(t,":",Zt),L(t,",",fc),L(t,"$",Vs),L(t,".",vt),L(t,"=",Fs),L(t,"!",hc),L(t,"-",it),L(t,"%",_i),L(t,"|",Bs),L(t,"+",zs),L(t,"#",js),L(t,"?",$i),L(t,'"',dc),L(t,"/",St),L(t,";",pc),L(t,"~",Ui),L(t,"_",_s),L(t,"\\",Ns),L(t,"",gg);const i=ye(t,Ft,cc,{[el]:!0});ye(i,Ft,i);const r=ye(i,Vt,pg,{[Bi]:!0}),s=ye(i,vi,mg,{[Ei]:!0}),o=ye(t,Vt,Bt,{[tl]:!0});ye(o,Ft,r),ye(o,Vt,o),ye(r,Ft,r),ye(r,Vt,r);const a=ye(t,vi,rl,{[nl]:!0});ye(a,Vt),ye(a,Ft,s),ye(a,vi,a),ye(s,Ft,s),ye(s,Vt),ye(s,vi,s);const l=L(t,sa,uc,{[na]:!0}),c=L(t,Lh,al,{[na]:!0}),u=ye(t,ra,al,{[na]:!0});L(t,oa,u),L(c,sa,l),L(c,oa,u),ye(c,ra,u),L(u,Lh),L(u,sa),ye(u,ra,u),L(u,oa,u);const f=ye(t,ia,yg,{[dg]:!0});L(f,"#"),ye(f,ia,f),L(f,JC,f);const h=L(f,GC);L(h,"#"),ye(h,ia,f);const d=[[Vt,o],[Ft,r]],p=[[Vt,null],[vi,a],[Ft,s]];for(let m=0;m<Dr.length;m++)Kt(t,Dr[m],sl,Bt,d);for(let m=0;m<Nr.length;m++)Kt(t,Nr[m],ol,rl,p);wn(sl,{tld:!0,ascii:!0},e),wn(ol,{utld:!0,alpha:!0},e),Kt(t,"file",Hr,Bt,d),Kt(t,"mailto",Hr,Bt,d),Kt(t,"http",qn,Bt,d),Kt(t,"https",qn,Bt,d),Kt(t,"ftp",qn,Bt,d),Kt(t,"ftps",qn,Bt,d),wn(Hr,{scheme:!0,ascii:!0},e),wn(qn,{slashscheme:!0,ascii:!0},e),n=n.sort((m,b)=>m[0]>b[0]?1:-1);for(let m=0;m<n.length;m++){const b=n[m][0],C=n[m][1]?{[WC]:!0}:{[HC]:!0};b.indexOf("-")>=0?C[il]=!0:Vt.test(b)?Ft.test(b)?C[Bi]=!0:C[tl]=!0:C[el]=!0,Nh(t,b,b,C)}return Nh(t,"localhost",lr,{ascii:!0}),t.jd=new Ke($s),{start:t,tokens:Object.assign({groups:e},bg)}}function xg(n,e){const t=YC(e.replace(/[A-Z]/g,a=>a.toLowerCase())),i=t.length,r=[];let s=0,o=0;for(;o<i;){let a=n,l=null,c=0,u=null,f=-1,h=-1;for(;o<i&&(l=a.go(t[o]));)a=l,a.accepts()?(f=0,h=0,u=a):f>=0&&(f+=t[o].length,h++),c+=t[o].length,s+=t[o].length,o++;s-=f,o-=h,c-=f,r.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return r}function YC(n){const e=[],t=n.length;let i=0;for(;i<t;){let r=n.charCodeAt(i),s,o=r<55296||r>56319||i+1===t||(s=n.charCodeAt(i+1))<56320||s>57343?n[i]:n.slice(i,i+2);e.push(o),i+=o.length}return e}function Kt(n,e,t,i,r){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];n.j[l]?s=n.j[l]:(s=new Ke(i),s.jr=r.slice(),n.j[l]=s),n=s}return s=new Ke(t),s.jr=r.slice(),n.j[e[o-1]]=s,s}function Ih(n){const e=[],t=[];let i=0,r="0123456789";for(;i<n.length;){let s=0;for(;r.indexOf(n[i+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let o=parseInt(n.substring(i,i+s),10);o>0;o--)t.pop();i+=s}else t.push(n[i]),i++}return e}const cr={defaultProtocol:"http",events:null,format:Vh,formatHref:Vh,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function mc(n,e=null){let t=Object.assign({},cr);n&&(t=Object.assign(t,n instanceof mc?n.o:n));const i=t.ignoreTags,r=[];for(let s=0;s<i.length;s++)r.push(i[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=r}mc.prototype={o:cr,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const i=e!=null;let r=this.o[n];return r&&(typeof r=="object"?(r=t.t in r?r[t.t]:cr[n],typeof r=="function"&&i&&(r=r(e,t))):typeof r=="function"&&i&&(r=r(e,t.t,t)),r)},getObj(n,e,t){let i=this.o[n];return typeof i=="function"&&e!=null&&(i=i(e,t.t,t)),i},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Vh(n){return n}function vg(n,e){this.t="token",this.v=n,this.tk=e}vg.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),i=n.get("format",e,this);return t&&i.length>t?i.substring(0,t)+"":i},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=cr.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),i=n.get("formatHref",t,this),r=n.get("tagName",t,e),s=this.toFormattedString(n),o={},a=n.get("className",t,e),l=n.get("target",t,e),c=n.get("rel",t,e),u=n.getObj("attributes",t,e),f=n.getObj("events",t,e);return o.href=i,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Object.assign(o,u),{tagName:r,attributes:o,content:s,eventListeners:f}}};function so(n,e){class t extends vg{constructor(r,s){super(r,s),this.t=n}}for(const i in e)t.prototype[i]=e[i];return t.t=n,t}const Fh=so("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Bh=so("text"),QC=so("nl"),Lr=so("url",{isLink:!0,toHref(n=cr.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==lr&&n[1].t===Zt}}),tt=n=>new Ke(n);function ZC({groups:n}){const e=n.domain.concat([Ps,Ds,Xt,Ns,Ls,Is,Vs,Fs,it,cc,_i,Bs,zs,js,St,$s,Ui,_s]),t=[Ms,Zt,fc,vt,hc,_i,$i,dc,pc,vs,Ss,zi,ji,ys,gs,bs,xs,ws,Ts,Cs,ks,Es,Os,Rs,As],i=[Ps,Ms,Ds,Ns,Ls,Is,Vs,Fs,it,zi,ji,_i,Bs,zs,js,$i,St,$s,Ui,_s],r=tt(),s=L(r,Ui);Q(s,i,s),Q(s,n.domain,s);const o=tt(),a=tt(),l=tt();Q(r,n.domain,o),Q(r,n.scheme,a),Q(r,n.slashscheme,l),Q(o,i,s),Q(o,n.domain,o);const c=L(o,Xt);L(s,Xt,c),L(a,Xt,c),L(l,Xt,c);const u=L(s,vt);Q(u,i,s),Q(u,n.domain,s);const f=tt();Q(c,n.domain,f),Q(f,n.domain,f);const h=L(f,vt);Q(h,n.domain,f);const d=tt(Fh);Q(h,n.tld,d),Q(h,n.utld,d),L(c,lr,d);const p=L(f,it);L(p,it,p),Q(p,n.domain,f),Q(d,n.domain,f),L(d,vt,h),L(d,it,p);const m=L(d,Zt);Q(m,n.numeric,Fh);const b=L(o,it),v=L(o,vt);L(b,it,b),Q(b,n.domain,o),Q(v,i,s),Q(v,n.domain,o);const C=tt(Lr);Q(v,n.tld,C),Q(v,n.utld,C),Q(C,n.domain,o),Q(C,i,s),L(C,vt,v),L(C,it,b),L(C,Xt,c);const k=L(C,Zt),P=tt(Lr);Q(k,n.numeric,P);const R=tt(Lr),D=tt();Q(R,e,R),Q(R,t,D),Q(D,e,R),Q(D,t,D),L(C,St,R),L(P,St,R);const A=L(a,Zt),g=L(l,Zt),y=L(g,St),T=L(y,St);Q(a,n.domain,o),L(a,vt,v),L(a,it,b),Q(l,n.domain,o),L(l,vt,v),L(l,it,b),Q(A,n.domain,R),L(A,St,R),L(A,$i,R),Q(T,n.domain,R),Q(T,e,R),L(T,St,R);const N=[[zi,ji],[gs,ys],[bs,xs],[vs,Ss],[ws,Ts],[Cs,ks],[Es,Os],[Rs,As]];for(let M=0;M<N.length;M++){const[z,$]=N[M],S=L(R,z);L(D,z,S),L(S,$,R);const x=tt(Lr);Q(S,e,x);const w=tt();Q(S,t),Q(x,e,x),Q(x,t,w),Q(w,e,x),Q(w,t,w),L(x,$,R),L(w,$,R)}return L(r,lr,C),L(r,uc,QC),{start:r,tokens:bg}}function ek(n,e,t){let i=t.length,r=0,s=[],o=[];for(;r<i;){let a=n,l=null,c=null,u=0,f=null,h=-1;for(;r<i&&!(l=a.go(t[r].t));)o.push(t[r++]);for(;r<i&&(c=l||a.go(t[r].t));)l=null,a=c,a.accepts()?(h=0,f=a):h>=0&&h++,r++,u++;if(h<0)r-=u,r<i&&(o.push(t[r]),r++);else{o.length>0&&(s.push(aa(Bh,e,o)),o=[]),r-=h,u-=h;const d=f.t,p=t.slice(r-u,r);s.push(aa(d,e,p))}}return o.length>0&&s.push(aa(Bh,e,o)),s}function aa(n,e,t){const i=t[0].s,r=t[t.length-1].e,s=e.slice(i,r);return new n(s,t)}const tk=typeof console<"u"&&console&&console.warn||(()=>{}),nk="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ue={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function nE(){return Ke.groups={},ue.scanner=null,ue.parser=null,ue.tokenQueue=[],ue.pluginQueue=[],ue.customSchemes=[],ue.initialized=!1,ue}function iE(n,e=!1){if(ue.initialized&&tk(`linkifyjs: already initialized - will not register custom scheme "${n}" ${nk}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ue.customSchemes.push([n,e])}function ik(){ue.scanner=XC(ue.customSchemes);for(let n=0;n<ue.tokenQueue.length;n++)ue.tokenQueue[n][1]({scanner:ue.scanner});ue.parser=ZC(ue.scanner.tokens);for(let n=0;n<ue.pluginQueue.length;n++)ue.pluginQueue[n][1]({scanner:ue.scanner,parser:ue.parser});return ue.initialized=!0,ue}function Sg(n){return ue.initialized||ik(),ek(ue.parser.start,n,xg(ue.scanner.start,n))}Sg.scan=xg;function rE(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const i=new mc(t),r=Sg(n),s=[];for(let o=0;o<r.length;o++){const a=r[o];a.isLink&&(!e||a.t===e)&&i.check(a)&&s.push(a.toFormattedObject(i))}return s}function sE(n={}){return new to({view(e){return new rk(e,n)}})}class rk{constructor(e,t){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=t.width)!==null&&i!==void 0?i:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let s=o=>{this[r](o)};return e.dom.addEventListener(r,s),{name:r,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,i,r=this.editorView.dom,s=r.getBoundingClientRect(),o=s.width/r.offsetWidth,a=s.height/r.offsetHeight;if(t){let f=e.nodeBefore,h=e.nodeAfter;if(f||h){let d=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(d){let p=d.getBoundingClientRect(),m=f?p.bottom:p.top;f&&h&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;i={left:p.left,right:p.right,top:m-b,bottom:m+b}}}}if(!i){let f=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;i={left:f.left-h,right:f.left+h,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=l.getBoundingClientRect(),h=f.width/l.offsetWidth,d=f.height/l.offsetHeight;c=f.left-l.scrollLeft*h,u=f.top-l.scrollTop*d}this.element.style.left=(i.left-c)/o+"px",this.element.style.top=(i.top-u)/a+"px",this.element.style.width=(i.right-i.left)/o+"px",this.element.style.height=(i.bottom-i.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=i&&i.type.spec.disableDropCursor,s=typeof r=="function"?r(this.editorView,t,e):r;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=xm(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class xe extends te{constructor(e){super(e,e)}map(e,t){let i=e.resolve(t.map(this.head));return xe.valid(i)?new xe(i):te.near(i)}content(){return j.empty}eq(e){return e instanceof xe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new xe(e.resolve(t.pos))}getBookmark(){return new gc(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!sk(e)||!ok(e))return!1;let i=t.type.spec.allowGapCursor;if(i!=null)return i;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,i=!1){e:for(;;){if(!i&&xe.valid(e))return e;let r=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;r+=t;let l=e.doc.resolve(r);if(xe.valid(l))return l}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!K.isSelectable(s)){e=e.doc.resolve(r+s.nodeSize*t),i=!1;continue e}break}s=o,r+=t;let a=e.doc.resolve(r);if(xe.valid(a))return a}return null}}}xe.prototype.visible=!1;xe.findFrom=xe.findGapCursorFrom;te.jsonID("gapcursor",xe);class gc{constructor(e){this.pos=e}map(e){return new gc(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return xe.valid(t)?new xe(t):te.near(t)}}function sk(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),i=n.node(e);if(t==0){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(t-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function ok(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),i=n.node(e);if(t==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(t);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function oE(){return new to({props:{decorations:uk,createSelectionBetween(n,e,t){return e.pos==t.pos&&xe.valid(t)?new xe(t):null},handleClick:lk,handleKeyDown:ak,handleDOMEvents:{beforeinput:ck}}})}const ak=og({ArrowLeft:Ir("horiz",-1),ArrowRight:Ir("horiz",1),ArrowUp:Ir("vert",-1),ArrowDown:Ir("vert",1)});function Ir(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,r,s){let o=i.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof ie){if(!s.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=i.doc.resolve(e>0?a.after():a.before())}let c=xe.findGapCursorFrom(a,e,l);return c?(r&&r(i.tr.setSelection(new xe(c))),!0):!1}}function lk(n,e,t){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(e);if(!xe.valid(i))return!1;let r=n.posAtCoords({left:t.clientX,top:t.clientY});return r&&r.inside>-1&&K.isSelectable(n.state.doc.nodeAt(r.inside))?!1:(n.dispatch(n.state.tr.setSelection(new xe(i))),!0)}function ck(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof xe))return!1;let{$from:t}=n.state.selection,i=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let r=I.empty;for(let o=i.length-1;o>=0;o--)r=I.from(i[o].createAndFill(null,r));let s=n.state.tr.replace(t.pos,t.pos,new j(r,0,0));return s.setSelection(ie.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function uk(n){if(!(n.selection instanceof xe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ee.create(n.doc,[ot.widget(n.selection.head,e,{key:"gapcursor"})])}var Us=200,Re=function(){};Re.prototype.append=function(e){return e.length?(e=Re.from(e),!this.length&&e||e.length<Us&&this.leafAppend(e)||this.length<Us&&e.leafPrepend(this)||this.appendInner(e)):this};Re.prototype.prepend=function(e){return e.length?Re.from(e).append(this):this};Re.prototype.appendInner=function(e){return new fk(this,e)};Re.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Re.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Re.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Re.prototype.forEach=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)};Re.prototype.map=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(s,o){return r.push(e(s,o))},t,i),r};Re.from=function(e){return e instanceof Re?e:e&&e.length?new wg(e):Re.empty};var wg=function(n){function e(i){n.call(this),this.values=i}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new e(this.values.slice(r,s))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,s,o,a){for(var l=s;l<o;l++)if(r(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,a){for(var l=s-1;l>=o;l--)if(r(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=Us)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=Us)return new e(r.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Re);Re.empty=new wg([]);var fk=function(n){function e(t,i){n.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,r,s,o){var a=this.left.length;if(r<a&&this.left.forEachInner(i,r,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(i,Math.max(r-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,r,s,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(i,r-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(i,Math.min(r,a),s,o)===!1)return!1},e.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},e.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new e(r,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(Re);const hk=500;class pt{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,s;t&&(r=this.remapping(i,this.items.length),s=r.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((f,h)=>{if(!f.step){r||(r=this.remapping(i,h+1),s=r.maps.length),s--,u.push(f);return}if(r){u.push(new wt(f.map));let d=f.step.map(r.slice(s)),p;d&&o.maybeStep(d).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new wt(p,void 0,void 0,c.length+u.length))),s--,p&&r.appendMap(p,s)}else o.maybeStep(f.step);if(f.selection)return a=r?f.selection.map(r.slice(s)):f.selection,l=new pt(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,i,r){let s=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),h=new wt(e.mapping.maps[u],f,t),d;(d=l&&l.merge(h))&&(h=d,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),t&&(o++,t=void 0),r||(l=h)}let c=o-i.depth;return c>pk&&(a=dk(a,c),o-=c),new pt(a.append(s),o)}remapping(e,t){let i=new ir;return this.items.forEach((r,s)=>{let o=r.mirrorOffset!=null&&s-r.mirrorOffset>=e?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,o)},e,t),i}addMaps(e){return this.eventCount==0?this:new pt(this.items.append(e.map(t=>new wt(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},r);let l=t;this.items.forEach(h=>{let d=s.getMirror(--l);if(d==null)return;o=Math.min(o,d);let p=s.maps[d];if(h.step){let m=e.steps[d].invert(e.docs[d]),b=h.selection&&h.selection.map(s.slice(l+1,d));b&&a++,i.push(new wt(p,m,b))}else i.push(new wt(p))},r);let c=[];for(let h=t;h<o;h++)c.push(new wt(s.maps[h]));let u=this.items.slice(0,r).append(c).append(i),f=new pt(u,a);return f.emptyItemCount()>hk&&(f=f.compress(this.items.length-i.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),i=t.maps.length,r=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)r.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(t.slice(i)),c=l&&l.getMap();if(i--,c&&t.appendMap(c,i),l){let u=o.selection&&o.selection.map(t.slice(i));u&&s++;let f=new wt(c.invert(),l,u),h,d=r.length-1;(h=r.length&&r[d].merge(f))?r[d]=h:r.push(f)}}else o.map&&i--},this.items.length,0),new pt(Re.from(r.reverse()),s)}}pt.empty=new pt(Re.empty,0);function dk(n,e){let t;return n.forEach((i,r)=>{if(i.selection&&e--==0)return t=r,!1}),n.slice(t)}class wt{constructor(e,t,i,r){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new wt(t.getMap().invert(),t,this.selection)}}}class Yt{constructor(e,t,i,r,s){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=r,this.prevComposition=s}}const pk=20;function mk(n,e,t,i){let r=t.getMeta(An),s;if(r)return r.historyState;t.getMeta(bk)&&(n=new Yt(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(An))return o.getMeta(An).redo?new Yt(n.done.addTransform(t,void 0,i,Kr(e)),n.undone,zh(t.mapping.maps),n.prevTime,n.prevComposition):new Yt(n.done,n.undone.addTransform(t,void 0,i,Kr(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-i.newGroupDelay||!gk(t,n.prevRanges)),c=o?la(n.prevRanges,t.mapping):zh(t.mapping.maps);return new Yt(n.done.addTransform(t,l?e.selection.getBookmark():void 0,i,Kr(e)),pt.empty,c,t.time,a??n.prevComposition)}else return(s=t.getMeta("rebased"))?new Yt(n.done.rebased(t,s),n.undone.rebased(t,s),la(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Yt(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),la(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function gk(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<e.length;s+=2)i<=e[s+1]&&r>=e[s]&&(t=!0)}),t}function zh(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((i,r,s,o)=>e.push(s,o));return e}function la(n,e){if(!n)return null;let t=[];for(let i=0;i<n.length;i+=2){let r=e.map(n[i],1),s=e.map(n[i+1],-1);r<=s&&t.push(r,s)}return t}function yk(n,e,t){let i=Kr(e),r=An.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,i);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),r,i),l=new Yt(t?a:s.remaining,t?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(An,{redo:t,historyState:l})}let ca=!1,jh=null;function Kr(n){let e=n.plugins;if(jh!=e){ca=!1,jh=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){ca=!0;break}}return ca}const An=new Em("history"),bk=new Em("closeHistory");function aE(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new to({key:An,state:{init(){return new Yt(pt.empty,pt.empty,null,0,-1)},apply(e,t,i){return mk(t,i,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let i=t.inputType,r=i=="historyUndo"?xk:i=="historyRedo"?vk:null;return r?(t.preventDefault(),r(e.state,e.dispatch)):!1}}}})}function Tg(n,e){return(t,i)=>{let r=An.getState(t);if(!r||(n?r.undone:r.done).eventCount==0)return!1;if(i){let s=yk(r,t,n);s&&i(e?s.scrollIntoView():s)}return!0}}const xk=Tg(!1,!0),vk=Tg(!0,!0);var Vr={exports:{}},_h;function Sk(){return _h||(_h=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof xc<"u"&&xc,i=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof a<"u"&&a,l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(S){return S&&DataView.prototype.isPrototypeOf(S)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(S){return S&&u.indexOf(Object.prototype.toString.call(S))>-1};function h(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(S)||S==="")throw new TypeError('Invalid character in header field name: "'+S+'"');return S.toLowerCase()}function d(S){return typeof S!="string"&&(S=String(S)),S}function p(S){var x={next:function(){var w=S.shift();return{done:w===void 0,value:w}}};return l.iterable&&(x[Symbol.iterator]=function(){return x}),x}function m(S){this.map={},S instanceof m?S.forEach(function(x,w){this.append(w,x)},this):Array.isArray(S)?S.forEach(function(x){this.append(x[0],x[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(x){this.append(x,S[x])},this)}m.prototype.append=function(S,x){S=h(S),x=d(x);var w=this.map[S];this.map[S]=w?w+", "+x:x},m.prototype.delete=function(S){delete this.map[h(S)]},m.prototype.get=function(S){return S=h(S),this.has(S)?this.map[S]:null},m.prototype.has=function(S){return this.map.hasOwnProperty(h(S))},m.prototype.set=function(S,x){this.map[h(S)]=d(x)},m.prototype.forEach=function(S,x){for(var w in this.map)this.map.hasOwnProperty(w)&&S.call(x,this.map[w],w,this)},m.prototype.keys=function(){var S=[];return this.forEach(function(x,w){S.push(w)}),p(S)},m.prototype.values=function(){var S=[];return this.forEach(function(x){S.push(x)}),p(S)},m.prototype.entries=function(){var S=[];return this.forEach(function(x,w){S.push([w,x])}),p(S)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function b(S){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}function v(S){return new Promise(function(x,w){S.onload=function(){x(S.result)},S.onerror=function(){w(S.error)}})}function C(S){var x=new FileReader,w=v(x);return x.readAsArrayBuffer(S),w}function k(S){var x=new FileReader,w=v(x);return x.readAsText(S),w}function P(S){for(var x=new Uint8Array(S),w=new Array(x.length),E=0;E<x.length;E++)w[E]=String.fromCharCode(x[E]);return w.join("")}function R(S){if(S.slice)return S.slice(0);var x=new Uint8Array(S.byteLength);return x.set(new Uint8Array(S)),x.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(S){this.bodyUsed=this.bodyUsed,this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:l.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:l.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():l.arrayBuffer&&l.blob&&c(S)?(this._bodyArrayBuffer=R(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||f(S))?this._bodyArrayBuffer=R(S):this._bodyText=S=Object.prototype.toString.call(S):this._bodyText="",this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var S=b(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var S=b(this);return S||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(C)}),this.text=function(){var S=b(this);if(S)return S;if(this._bodyBlob)return k(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(P(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(S){var x=S.toUpperCase();return A.indexOf(x)>-1?x:S}function y(S,x){if(!(this instanceof y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var w=x.body;if(S instanceof y){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,x.headers||(this.headers=new m(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!w&&S._bodyInit!=null&&(w=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new m(x.headers)),this.method=g(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&w)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(w),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var E=/([?&])_=[^&]*/;if(E.test(this.url))this.url=this.url.replace(E,"$1_="+new Date().getTime());else{var O=/\?/;this.url+=(O.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})};function T(S){var x=new FormData;return S.trim().split("&").forEach(function(w){if(w){var E=w.split("="),O=E.shift().replace(/\+/g," "),F=E.join("=").replace(/\+/g," ");x.append(decodeURIComponent(O),decodeURIComponent(F))}}),x}function N(S){var x=new m,w=S.replace(/\r?\n[\t ]+/g," ");return w.split("\r").map(function(E){return E.indexOf(`
`)===0?E.substr(1,E.length):E}).forEach(function(E){var O=E.split(":"),F=O.shift().trim();if(F){var B=O.join(":").trim();x.append(F,B)}}),x}D.call(y.prototype);function M(S,x){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new m(x.headers),this.url=x.url||"",this._initBody(S)}D.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},M.error=function(){var S=new M(null,{status:0,statusText:""});return S.type="error",S};var z=[301,302,303,307,308];M.redirect=function(S,x){if(z.indexOf(x)===-1)throw new RangeError("Invalid status code");return new M(null,{status:x,headers:{location:S}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(x,w){this.message=x,this.name=w;var E=Error(x);this.stack=E.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function $(S,x){return new Promise(function(w,E){var O=new y(S,x);if(O.signal&&O.signal.aborted)return E(new o.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;function B(){F.abort()}F.onload=function(){var V={status:F.status,statusText:F.statusText,headers:N(F.getAllResponseHeaders()||"")};V.url="responseURL"in F?F.responseURL:V.headers.get("X-Request-URL");var H="response"in F?F.response:F.responseText;setTimeout(function(){w(new M(H,V))},0)},F.onerror=function(){setTimeout(function(){E(new TypeError("Network request failed"))},0)},F.ontimeout=function(){setTimeout(function(){E(new TypeError("Network request failed"))},0)},F.onabort=function(){setTimeout(function(){E(new o.DOMException("Aborted","AbortError"))},0)};function U(V){try{return V===""&&a.location.href?a.location.href:V}catch{return V}}F.open(O.method,U(O.url),!0),O.credentials==="include"?F.withCredentials=!0:O.credentials==="omit"&&(F.withCredentials=!1),"responseType"in F&&(l.blob?F.responseType="blob":l.arrayBuffer&&O.headers.get("Content-Type")&&O.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(F.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof m)?Object.getOwnPropertyNames(x.headers).forEach(function(V){F.setRequestHeader(V,d(x.headers[V]))}):O.headers.forEach(function(V,H){F.setRequestHeader(H,V)}),O.signal&&(O.signal.addEventListener("abort",B),F.onreadystatechange=function(){F.readyState===4&&O.signal.removeEventListener("abort",B)}),F.send(typeof O._bodyInit>"u"?null:O._bodyInit)})}return $.polyfill=!0,a.fetch||(a.fetch=$,a.Headers=m,a.Request=y,a.Response=M),o.Headers=m,o.Request=y,o.Response=M,o.fetch=$,o})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var r=t.fetch?t:i;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,n.exports=e}(Vr,Vr.exports)),Vr.exports}var Cg=Sk();const wk=ll(Cg),Tk=Og({__proto__:null,default:wk},[Cg]);export{iE as $,DC as A,Zk as B,PC as C,hi as D,ki as E,I as F,lt as G,OC as H,AC as I,qk as J,Gk as K,Jk as L,Yk as M,K as N,eE as O,to as P,Ii as Q,Ak as R,te as S,ie as T,j as U,Xk as V,Qk as W,Me as X,Le as Y,Bk as Z,tE as _,Ok as a,Sg as a0,rE as a1,nE as a2,sE as a3,oE as a4,aE as a5,vk as a6,xk as a7,Ee as a8,ot as a9,Bg as aa,Xu as ab,Lk as ac,Ik as ad,Hx as ae,Nk as af,Pk as ag,Dk as ah,We as ai,Hv as aj,Mv as ak,Vk as al,Fk as am,Rk as b,Ek as c,gC as d,gr as e,pm as f,Em as g,Nw as h,kt as i,zk as j,jk as k,Pt as l,tr as m,mr as n,MC as o,ag as p,Kk as q,kk as r,Uk as s,Wk as t,EC as u,RC as v,bm as w,_k as x,$k as y,Hk as z};
