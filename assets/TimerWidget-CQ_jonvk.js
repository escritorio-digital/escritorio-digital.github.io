import{u as M,r as s,j as t,at as T,au as k,aL as y}from"./react-vendor-WCYW3yxo.js";import{L as O}from"./index-DEF43kZb.js";import"./vendor-DCW5Txpp.js";import"./dnd-kit-ZKKYBs6g.js";const A=()=>{const{t:p}=M(),[i,g]=s.useState(5),[c,b]=s.useState(0),[f,v]=s.useState(300),[a,l]=s.useState(300),[n,d]=s.useState(!1),x=s.useRef(null),[S,j]=s.useState(48),m=s.useRef(48);s.useEffect(()=>{let e;return n&&a>0?e=setInterval(()=>{l(r=>r-1)},1e3):a===0&&n&&d(!1),()=>clearInterval(e)},[n,a]);const w=()=>{const e=i*60+c;v(e),n||l(e)};s.useEffect(w,[i,c]),s.useEffect(()=>{const e=x.current;if(!e)return;const r=()=>{const{width:R,height:C}=e.getBoundingClientRect(),I=Math.max(32,Math.min(R*.3,C*.7)),u=Math.floor(I);u!==m.current&&(m.current=u,j(u))};r();const o=new ResizeObserver(r);return o.observe(e),()=>o.disconnect()},[]);const z=()=>{f<=0||(a===0&&h(),d(!n))},h=()=>{d(!1),l(f)},N=e=>{const r=Math.floor(e/60),o=e%60;return`${String(r).padStart(2,"0")}:${String(o).padStart(2,"0")}`};return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-text-dark p-4 overflow-hidden",children:[t.jsx("div",{className:"flex-1 w-full flex items-center justify-center",ref:x,children:t.jsx("div",{className:"font-bold font-mono leading-none",style:{fontSize:`${S}px`,color:"var(--color-text-light)",textShadow:"0 2px 8px rgba(0, 0, 0, 0.55)",WebkitTextStroke:"1px rgba(0, 0, 0, 0.45)"},children:a===0&&!n?p("widgets.timer.finished"):N(a)})}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("input",{type:"number",className:"w-20 text-center bg-white/85 border-2 border-accent rounded p-1 text-text-dark",value:i,onChange:e=>g(Math.max(0,parseInt(e.target.value)||0)),disabled:n}),t.jsx("span",{className:"text-2xl font-bold",children:":"}),t.jsx("input",{type:"number",className:"w-20 text-center bg-white/85 border-2 border-accent rounded p-1 text-text-dark",value:c,onChange:e=>b(Math.max(0,Math.min(59,parseInt(e.target.value)||0))),disabled:n})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:z,className:"p-3 bg-accent rounded-full hover:bg-[#8ec9c9]",children:n?t.jsx(T,{size:24}):t.jsx(k,{size:24})}),t.jsx("button",{onClick:h,className:"p-3 bg-white/85 border-2 border-accent rounded-full hover:bg-accent/50",children:t.jsx(y,{size:24})})]})]})};export{A as TimerWidget,O as widgetConfig};
