import{x as a,z as s,Q as d,L as l}from"./index-C6KpQlP3.js";const r=(e,n)=>{const i=URL.createObjectURL(e),t=document.createElement("a");t.href=i,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(i)},m=async e=>{const n=e.parentId??a,t=(await s(n)).filter(o=>o.type==="file"&&o.name===e.filename);t.length>0&&await Promise.all(t.map(o=>d(o.id))),await l({name:e.filename,parentId:n,blob:e.blob,mime:e.blob.type,sourceWidgetId:e.sourceWidgetId,sourceWidgetTitleKey:e.sourceWidgetTitleKey}),window.dispatchEvent(new CustomEvent("file-manager-refresh")),window.dispatchEvent(new CustomEvent("file-manager-feedback",{detail:{type:"saved",filename:e.filename}}))},u=(e,n={})=>new Promise(i=>{window.dispatchEvent(new CustomEvent("save-dialog-request",{detail:{resolve:i,suggestedFilename:e,sourceWidgetId:n.sourceWidgetId}}))});export{r as d,u as r,m as s};
